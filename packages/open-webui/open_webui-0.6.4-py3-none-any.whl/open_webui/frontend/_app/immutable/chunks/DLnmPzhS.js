import{a as ct,c as q,g as J,d as Y,r as lt}from"./aTHIJebK.js";import{e as G}from"./BLUdOOmF.js";let k;const ht=new Uint8Array(16);function ut(){if(!k&&(k=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!k))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k(ht)}const E=[];for(let t=0;t<256;++t)E.push((t+256).toString(16).slice(1));function ft(t,e=0){return E[t[e+0]]+E[t[e+1]]+E[t[e+2]]+E[t[e+3]]+"-"+E[t[e+4]]+E[t[e+5]]+"-"+E[t[e+6]]+E[t[e+7]]+"-"+E[t[e+8]]+E[t[e+9]]+"-"+E[t[e+10]]+E[t[e+11]]+E[t[e+12]]+E[t[e+13]]+E[t[e+14]]+E[t[e+15]]}const pt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Z={randomUUID:pt};function dt(t,e,r){if(Z.randomUUID&&!e&&!t)return Z.randomUUID();t=t||{};const s=t.random||(t.rng||ut)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ft(s)}var xt={exports:{}};const gt={},Ft=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"})),X=ct(Ft);/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.10.1
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r=typeof window=="object",s=r?window:{};s.JS_SHA256_NO_WINDOW&&(r=!1);var l=!r&&typeof self=="object",i=!s.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;i?s=q:l&&(s=self);var f=!s.JS_SHA256_NO_COMMON_JS&&!0&&t.exports,p=!s.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",n="0123456789abcdef".split(""),b=[-2147483648,8388608,32768,128],y=[24,16,8,0],I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],T=["hex","array","digest","arrayBuffer"],v=[];(s.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),p&&(s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(a){return typeof a=="object"&&a.buffer&&a.buffer.constructor===ArrayBuffer});var B=function(a,u){return function(d){return new A(u,!0).update(d)[a]()}},_=function(a){var u=B("hex",a);i&&(u=M(u,a)),u.create=function(){return new A(a)},u.update=function(x){return u.create().update(x)};for(var d=0;d<T.length;++d){var h=T[d];u[h]=B(h,a)}return u},M=function(a,u){var d=X,h=X.Buffer,x=u?"sha224":"sha256",c;h.from&&!s.JS_SHA256_NO_BUFFER_FROM?c=h.from:c=function(o){return new h(o)};var g=function(o){if(typeof o=="string")return d.createHash(x).update(o,"utf8").digest("hex");if(o==null)throw new Error(e);return o.constructor===ArrayBuffer&&(o=new Uint8Array(o)),Array.isArray(o)||ArrayBuffer.isView(o)||o.constructor===h?d.createHash(x).update(c(o)).digest("hex"):a(o)};return g},N=function(a,u){return function(d,h){return new j(d,u,!0).update(h)[a]()}},L=function(a){var u=N("hex",a);u.create=function(x){return new j(x,a)},u.update=function(x,c){return u.create(x).update(c)};for(var d=0;d<T.length;++d){var h=T[d];u[h]=N(h,a)}return u};function A(a,u){u?(v[0]=v[16]=v[1]=v[2]=v[3]=v[4]=v[5]=v[6]=v[7]=v[8]=v[9]=v[10]=v[11]=v[12]=v[13]=v[14]=v[15]=0,this.blocks=v):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=a}A.prototype.update=function(a){if(!this.finalized){var u,d=typeof a;if(d!=="string"){if(d==="object"){if(a===null)throw new Error(e);if(p&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!p||!ArrayBuffer.isView(a)))throw new Error(e)}else throw new Error(e);u=!0}for(var h,x=0,c,g=a.length,o=this.blocks;x<g;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),u)for(c=this.start;x<g&&c<64;++x)o[c>>2]|=a[x]<<y[c++&3];else for(c=this.start;x<g&&c<64;++x)h=a.charCodeAt(x),h<128?o[c>>2]|=h<<y[c++&3]:h<2048?(o[c>>2]|=(192|h>>6)<<y[c++&3],o[c>>2]|=(128|h&63)<<y[c++&3]):h<55296||h>=57344?(o[c>>2]|=(224|h>>12)<<y[c++&3],o[c>>2]|=(128|h>>6&63)<<y[c++&3],o[c>>2]|=(128|h&63)<<y[c++&3]):(h=65536+((h&1023)<<10|a.charCodeAt(++x)&1023),o[c>>2]|=(240|h>>18)<<y[c++&3],o[c>>2]|=(128|h>>12&63)<<y[c++&3],o[c>>2]|=(128|h>>6&63)<<y[c++&3],o[c>>2]|=(128|h&63)<<y[c++&3]);this.lastByteIndex=c,this.bytes+=c-this.start,c>=64?(this.block=o[16],this.start=c-64,this.hash(),this.hashed=!0):this.start=c}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},A.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,u=this.lastByteIndex;a[16]=this.block,a[u>>2]|=b[u&3],this.block=a[16],u>=56&&(this.hashed||this.hash(),a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),a[14]=this.hBytes<<3|this.bytes>>>29,a[15]=this.bytes<<3,this.hash()}},A.prototype.hash=function(){var a=this.h0,u=this.h1,d=this.h2,h=this.h3,x=this.h4,c=this.h5,g=this.h6,o=this.h7,F=this.blocks,w,D,S,C,m,R,O,$,V,W,P;for(w=16;w<64;++w)m=F[w-15],D=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=F[w-2],S=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,F[w]=F[w-16]+D+F[w-7]+S<<0;for(P=u&d,w=0;w<64;w+=4)this.first?(this.is224?($=300032,m=F[0]-1413257819,o=m-150054599<<0,h=m+24177077<<0):($=704751109,m=F[0]-210244248,o=m-1521486534<<0,h=m+143694565<<0),this.first=!1):(D=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),S=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),$=a&u,C=$^a&d^P,O=x&c^~x&g,m=o+S+O+I[w]+F[w],R=D+C,o=h+m<<0,h=m+R<<0),D=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),S=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),V=h&a,C=V^h&u^$,O=o&x^~o&c,m=g+S+O+I[w+1]+F[w+1],R=D+C,g=d+m<<0,d=m+R<<0,D=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),S=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),W=d&h,C=W^d&a^V,O=g&o^~g&x,m=c+S+O+I[w+2]+F[w+2],R=D+C,c=u+m<<0,u=m+R<<0,D=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),S=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),P=u&d,C=P^u&h^W,O=c&g^~c&o,m=x+S+O+I[w+3]+F[w+3],R=D+C,x=a+m<<0,a=m+R<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+a<<0,this.h1=this.h1+u<<0,this.h2=this.h2+d<<0,this.h3=this.h3+h<<0,this.h4=this.h4+x<<0,this.h5=this.h5+c<<0,this.h6=this.h6+g<<0,this.h7=this.h7+o<<0},A.prototype.hex=function(){this.finalize();var a=this.h0,u=this.h1,d=this.h2,h=this.h3,x=this.h4,c=this.h5,g=this.h6,o=this.h7,F=n[a>>28&15]+n[a>>24&15]+n[a>>20&15]+n[a>>16&15]+n[a>>12&15]+n[a>>8&15]+n[a>>4&15]+n[a&15]+n[u>>28&15]+n[u>>24&15]+n[u>>20&15]+n[u>>16&15]+n[u>>12&15]+n[u>>8&15]+n[u>>4&15]+n[u&15]+n[d>>28&15]+n[d>>24&15]+n[d>>20&15]+n[d>>16&15]+n[d>>12&15]+n[d>>8&15]+n[d>>4&15]+n[d&15]+n[h>>28&15]+n[h>>24&15]+n[h>>20&15]+n[h>>16&15]+n[h>>12&15]+n[h>>8&15]+n[h>>4&15]+n[h&15]+n[x>>28&15]+n[x>>24&15]+n[x>>20&15]+n[x>>16&15]+n[x>>12&15]+n[x>>8&15]+n[x>>4&15]+n[x&15]+n[c>>28&15]+n[c>>24&15]+n[c>>20&15]+n[c>>16&15]+n[c>>12&15]+n[c>>8&15]+n[c>>4&15]+n[c&15]+n[g>>28&15]+n[g>>24&15]+n[g>>20&15]+n[g>>16&15]+n[g>>12&15]+n[g>>8&15]+n[g>>4&15]+n[g&15];return this.is224||(F+=n[o>>28&15]+n[o>>24&15]+n[o>>20&15]+n[o>>16&15]+n[o>>12&15]+n[o>>8&15]+n[o>>4&15]+n[o&15]),F},A.prototype.toString=A.prototype.hex,A.prototype.digest=function(){this.finalize();var a=this.h0,u=this.h1,d=this.h2,h=this.h3,x=this.h4,c=this.h5,g=this.h6,o=this.h7,F=[a>>24&255,a>>16&255,a>>8&255,a&255,u>>24&255,u>>16&255,u>>8&255,u&255,d>>24&255,d>>16&255,d>>8&255,d&255,h>>24&255,h>>16&255,h>>8&255,h&255,x>>24&255,x>>16&255,x>>8&255,x&255,c>>24&255,c>>16&255,c>>8&255,c&255,g>>24&255,g>>16&255,g>>8&255,g&255];return this.is224||F.push(o>>24&255,o>>16&255,o>>8&255,o&255),F},A.prototype.array=A.prototype.digest,A.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(this.is224?28:32),u=new DataView(a);return u.setUint32(0,this.h0),u.setUint32(4,this.h1),u.setUint32(8,this.h2),u.setUint32(12,this.h3),u.setUint32(16,this.h4),u.setUint32(20,this.h5),u.setUint32(24,this.h6),this.is224||u.setUint32(28,this.h7),a};function j(a,u,d){var h,x=typeof a;if(x==="string"){var c=[],g=a.length,o=0,F;for(h=0;h<g;++h)F=a.charCodeAt(h),F<128?c[o++]=F:F<2048?(c[o++]=192|F>>6,c[o++]=128|F&63):F<55296||F>=57344?(c[o++]=224|F>>12,c[o++]=128|F>>6&63,c[o++]=128|F&63):(F=65536+((F&1023)<<10|a.charCodeAt(++h)&1023),c[o++]=240|F>>18,c[o++]=128|F>>12&63,c[o++]=128|F>>6&63,c[o++]=128|F&63);a=c}else if(x==="object"){if(a===null)throw new Error(e);if(p&&a.constructor===ArrayBuffer)a=new Uint8Array(a);else if(!Array.isArray(a)&&(!p||!ArrayBuffer.isView(a)))throw new Error(e)}else throw new Error(e);a.length>64&&(a=new A(u,!0).update(a).array());var w=[],D=[];for(h=0;h<64;++h){var S=a[h]||0;w[h]=92^S,D[h]=54^S}A.call(this,u,d),this.update(D),this.oKeyPad=w,this.inner=!0,this.sharedMemory=d}j.prototype=new A,j.prototype.finalize=function(){if(A.prototype.finalize.call(this),this.inner){this.inner=!1;var a=this.array();A.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(a),A.prototype.finalize.call(this)}};var U=_();U.sha256=U,U.sha224=_(!0),U.sha256.hmac=L(),U.sha224.hmac=L(!0),f?t.exports=U:(s.sha256=U.sha256,s.sha224=U.sha224)})()})(xt);var Q={exports:{}};(function(t,e){(function(r,s){t.exports=s()})(q,function(){return function(r,s,l){s.prototype.isToday=function(){var i="YYYY-MM-DD",f=l();return this.format(i)===f.format(i)}}})})(Q);var mt=Q.exports;const yt=J(mt);var tt={exports:{}};(function(t,e){(function(r,s){t.exports=s()})(q,function(){return function(r,s,l){s.prototype.isYesterday=function(){var i="YYYY-MM-DD",f=l().subtract(1,"day");return this.format(i)===f.format(i)}}})})(tt);var bt=tt.exports;const vt=J(bt);var et={exports:{}};(function(t,e){(function(r,s){t.exports=s()})(q,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(s,l,i){var f=l.prototype,p=f.format;i.en.formats=r,f.format=function(n){n===void 0&&(n="YYYY-MM-DDTHH:mm:ssZ");var b=this.$locale().formats,y=function(I,T){return I.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(v,B,_){var M=_&&_.toUpperCase();return B||T[_]||r[_]||T[M].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,L,A){return L||A.slice(1)})})}(n,b===void 0?{}:b);return p.call(this,y)}}})})(et);var wt=et.exports;const At=J(wt);var z=(t=>(t.PUNCTUATION="punctuation",t.PARAGRAPHS="paragraphs",t.NONE="none",t))(z||{});Y.extend(lt);Y.extend(yt);Y.extend(vt);Y.extend(At);const Nt=(t,e,r,s)=>{const l=[{regex:/{{char}}/gi,replacement:r},{regex:/{{user}}/gi,replacement:s},{regex:/{{VIDEO_FILE_ID_([a-f0-9-]+)}}/gi,replacement:(f,p)=>`<video src="${G}/api/v1/files/${p}/content" controls></video>`},{regex:/{{HTML_FILE_ID_([a-f0-9-]+)}}/gi,replacement:(f,p)=>`<iframe src="${G}/api/v1/files/${p}/content/html" width="100%" frameborder="0" onload="this.style.height=(this.contentWindow.document.body.scrollHeight+20)+'px';"></iframe>`}];return t=((f,p)=>f.split(/(```[\s\S]*?```|`[\s\S]*?`)/).map(n=>n.startsWith("```")||n.startsWith("`")?n:p(n)).join(""))(t,f=>(l.forEach(({regex:p,replacement:n})=>{n!=null&&(f=f.replace(p,n))}),Array.isArray(e)&&e.forEach((p,n)=>{const b=new RegExp(`\\[${n+1}\\]`,"g");f=f.replace(b,`<source_id data="${n+1}" title="${p}" />`)}),f)),t},Yt=t=>t.replace(/<\|[a-z]*$/,"").replace(/<\|[a-z]+\|$/,"").replace(/<$/,"").replaceAll(/<\|[a-z]+\|>/g," ").replaceAll("<","&lt;").replaceAll(">","&gt;").trim(),$t=t=>t.trim();function Lt(t){return new DOMParser().parseFromString(t,"text/html").documentElement.textContent}const jt=t=>t.charAt(0).toUpperCase()+t.slice(1),Pt=t=>{let e="";return new TransformStream({transform(r,s){e+=r;const l=e.split(t);l.slice(0,-1).forEach(i=>s.enqueue(i)),e=l[l.length-1]},flush(r){e&&r.enqueue(e)}})},kt=t=>{const e={messages:{},currentId:null};let r=null,s=null;for(const l of t)s=dt(),r!==null&&(e.messages[r].childrenIds=[...e.messages[r].childrenIds,s]),e.messages[s]={...l,id:s,parentId:r,childrenIds:[]},r=s;return e.currentId=s,e},Et=()=>{const t=document.createElement("canvas"),e=t.getContext("2d");t.height=1,t.width=1;const r=new ImageData(t.width,t.height),s=r.data;for(let i=0;i<r.data.length;i+=1)i%4!==3?s[i]=Math.floor(256*Math.random()):s[i]=255;e.putImageData(r,0,0);const l=e.getImageData(0,0,t.width,t.height).data;for(let i=0;i<l.length;i+=1)if(l[i]!==s[i])return console.log("canvasPixelTest: Wrong canvas pixel RGB value detected:",l[i],"at:",i,"expected:",s[i]),console.log("canvasPixelTest: Canvas blocking or spoofing is likely"),!1;return!0},zt=async(t,e,r)=>new Promise((s,l)=>{const i=new Image;i.onload=()=>{const f=document.createElement("canvas");let p=i.width,n=i.height;if(e&&r){if(p<=e&&n<=r){s(t);return}p/n>e/r?(n=Math.round(e*n/p),p=e):(p=Math.round(r*p/n),n=r)}else if(e){if(p<=e){s(t);return}n=Math.round(e*n/p),p=e}else if(r){if(n<=r){s(t);return}p=Math.round(r*p/n),n=r}f.width=p,f.height=n,f.getContext("2d").drawImage(i,0,0,p,n);const y=f.toDataURL();s(y)},i.onerror=f=>l(f),i.src=t}),Ht=t=>{const e=document.createElement("canvas"),r=e.getContext("2d");if(e.width=100,e.height=100,!Et())return console.log("generateInitialsImage: failed pixel test, fingerprint evasion is likely. Using default image."),"/user.png";r.fillStyle="#F39C12",r.fillRect(0,0,e.width,e.height),r.fillStyle="#FFFFFF",r.font="40px Helvetica",r.textAlign="center",r.textBaseline="middle";const s=t.trim(),l=s.length>0?s[0]+(s.split(" ").length>1?s[s.lastIndexOf(" ")+1]:""):"";return r.fillText(l.toUpperCase(),e.width/2,e.height/2),e.toDataURL()},qt=t=>{const e=Y(t);return Y(),e.isToday()?`Today at ${e.format("LT")}`:e.isYesterday()?`Yesterday at ${e.format("LT")}`:`${e.format("L")} at ${e.format("LT")}`},Vt=async t=>{let e=!1;if(!navigator.clipboard){const r=document.createElement("textarea");r.value=t,r.style.top="0",r.style.left="0",r.style.position="fixed",document.body.appendChild(r),r.focus(),r.select();try{const l=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+l),e=!0}catch(s){console.error("Fallback: Oops, unable to copy",s)}return document.body.removeChild(r),e}return e=await navigator.clipboard.writeText(t).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(r=>(console.error("Async: Could not copy text: ",r),!1)),e},Wt=(t,e)=>e==="0.0.0"?!1:e.localeCompare(t,void 0,{numeric:!0,sensitivity:"case",caseFirst:"upper"})<0,Jt=t=>{const e=/\{\{([^}]+)\}\}/g,r=[];let s;for(;(s=e.exec(t))!==null;)r.push({word:s[1].trim(),startIndex:s.index,endIndex:e.lastIndex-1});return r},Kt=(t,e)=>{console.log("inputString",t);const r=t.split(`
`),l=r.pop().split(" ");(l.at(-1)===e||e===""&&l.at(-1)==="\\#")&&l.pop();let i=l.join(" ");i!==""&&(i+=" ");const f=[...r,i].join(`
`);return console.log("resultString",f),f},Gt=t=>"mapping"in t[0]?"openai":"webui",Zt=async(t=!1)=>{const e=await new Promise((l,i)=>{navigator.geolocation.getCurrentPosition(l,i)}).catch(l=>{throw console.error("Error getting user location:",l),l});if(!e)return"Location not available";const{latitude:r,longitude:s}=e.coords;return t?{latitude:r,longitude:s}:`${r.toFixed(3)}, ${s.toFixed(3)} (lat, long)`},_t=t=>{var p,n,b,y,I,T,v,B;const e=t.mapping,r=[];let s="",l=null;for(const _ in e){const M=e[_];s=_;try{if(r.length==0&&(M.message==null||((p=M.message.content.parts)==null?void 0:p[0])==""&&M.message.content.text==null))continue;{const N={id:_,parentId:l,childrenIds:M.children||[],role:((b=(n=M.message)==null?void 0:n.author)==null?void 0:b.role)!=="user"?"assistant":"user",content:((T=(I=(y=M.message)==null?void 0:y.content)==null?void 0:I.parts)==null?void 0:T[0])||((B=(v=M.message)==null?void 0:v.content)==null?void 0:B.text)||"",model:"gpt-3.5-turbo",done:!0,context:null};r.push(N),l=s}}catch(N){console.log("Error with",M,`
Error:`,N)}}const i={};return r.forEach(_=>i[_.id]=_),{history:{currentId:s,messages:i},models:["gpt-3.5-turbo"],messages:r,options:{},timestamp:t.create_time,title:t.title??"New Chat"}},Dt=t=>{const e=t.messages;if(e.length===0||e[e.length-1].childrenIds.length!==0||e[0].parentId!==null)return!1;for(const l of e)if(typeof l.content!="string")return!1;return!0},Xt=t=>{const e=[];let r=0;for(const s of t){const l=_t(s);Dt(l)?e.push({id:s.id,user_id:"",title:s.title,chat:l,timestamp:s.create_time}):r++}return console.log(r,"Conversations could not be imported"),e},Qt=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},St=t=>{const e=/[\uD800-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;return t.replace(e,"")},Mt=t=>t.replace(/(```[\s\S]*?```)/g,"").replace(/^\|.*\|$/gm,"").replace(/(?:\*\*|__)(.*?)(?:\*\*|__)/g,"$1").replace(/(?:[*_])(.*?)(?:[*_])/g,"$1").replace(/~~(.*?)~~/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/!?\[([^\]]*)\](?:\([^)]+\)|\[[^\]]*\])/g,"$1").replace(/^\[[^\]]+\]:\s*.*$/gm,"").replace(/^#{1,6}\s+/gm,"").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*(?:\d+\.)\s+/gm,"").replace(/^\s*>[> ]*/gm,"").replace(/^\s*:\s+/gm,"").replace(/\[\^[^\]]*\]/g,"").replace(/[-*_~]/g,"").replace(/\n{2,}/g,`
`),K=t=>Mt(St(t.trim())),rt=(t,e)=>{for(const r of e)t=t.replace(new RegExp(`<details\\s+type="${r}"[^>]*>.*?<\\/details>`,"gis"),"");return t},te=t=>(t=t.replace(/<details[^>]*>.*?<\/details>/gis,""),t),ee=t=>{t=rt(t,["reasoning","code_interpreter"]);const e=/<details\s+type="tool_calls"([^>]*)>([\s\S]*?)<\/details>/gis,r=t.match(e);if(r)for(const s of r){const l=/(\w+)="([^"]*)"/g,i={};let f;for(;(f=l.exec(s))!==null;)i[f[1]]=f[2];t=t.replace(s,`<tool_calls name="${i.name}" result="${i.result}"/>`)}return t},st=/```[\s\S]*?```/g,Tt=t=>{const e=[];let r=0;t=t.replace(st,l=>{const i=`\0${r}\0`;return e[r++]=l,i});let s=t.split(new RegExp("(?<=[.!?])\\s+"));return s=s.map(l=>l.replace(/\u0000(\d+)\u0000/g,(i,f)=>e[f])),s.map(K).filter(Boolean)},It=t=>{const e=[];let r=0;t=t.replace(st,l=>{const i=`\0${r}\0`;return e[r++]=l,i});let s=t.split(/\n+/);return s=s.map(l=>l.replace(/\u0000(\d+)\u0000/g,(i,f)=>e[f])),s.map(K).filter(Boolean)},Ut=t=>Tt(t).reduce((e,r)=>{const s=e.length-1;if(s>=0){const l=e[s],i=l.split(/\s+/).length,f=l.length;i<4||f<50?e[s]=l+" "+r:e.push(r)}else e.push(r);return e},[]),re=(t,e="punctuation")=>{t=rt(t,["reasoning","code_interpreter","tool_calls"]);const r=[];switch(e){default:case z.PUNCTUATION:r.push(...Ut(t));break;case z.PARAGRAPHS:r.push(...It(t));break;case z.NONE:r.push(K(t));break}return r},se=(t,e)=>new File([t],e,{type:t.type}),ne=(t,e)=>({"{{USER_NAME}}":t,"{{USER_LOCATION}}":e||"Unknown","{{CURRENT_DATETIME}}":Ct(),"{{CURRENT_DATE}}":nt(),"{{CURRENT_TIME}}":at(),"{{CURRENT_WEEKDAY}}":it(),"{{CURRENT_TIMEZONE}}":ot(),"{{USER_LANGUAGE}}":localStorage.getItem("locale")||"en-US"}),ae=(t,e,r)=>{const s=new Date,l=s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0"),i=s.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}),f=it(),p=ot(),n=localStorage.getItem("locale")||"en-US";return t=t.replace("{{CURRENT_DATETIME}}",`${l} ${i}`),t=t.replace("{{CURRENT_DATE}}",l),t=t.replace("{{CURRENT_TIME}}",i),t=t.replace("{{CURRENT_WEEKDAY}}",f),t=t.replace("{{CURRENT_TIMEZONE}}",p),t=t.replace("{{USER_LANGUAGE}}",n),e&&(t=t.replace("{{USER_NAME}}",e)),r?t=t.replace("{{USER_LOCATION}}",r):t=t.replace("{{USER_LOCATION}}","LOCATION_UNKNOWN"),t},oe=t=>{const e=new Date,r=new Date(t*1e3),l=(e.getTime()-r.getTime())/(1e3*3600*24),i=e.getDate(),f=e.getMonth(),p=e.getFullYear(),n=r.getDate(),b=r.getMonth(),y=r.getFullYear();return p===y&&f===b&&i===n?"Today":p===y&&f===b&&i-n===1?"Yesterday":l<=7?"Previous 7 days":l<=30?"Previous 30 days":p===y?r.toLocaleString("default",{month:"long"}):r.getFullYear().toString()},ie=t=>{const e={};let r=!1,s=!1;const l=/^\s*([a-z_]+):\s*(.*)\s*$/i,i=t.split(`
`);if(i[0].trim()!=='"""')return{};r=!0;for(let f=1;f<i.length;f++){const p=i[f];if(p.includes('"""')&&r){s=!0;break}if(r&&!s){const n=l.exec(p);if(n){const[,b,y]=n;e[b.trim()]=y.trim()}}}return e},ce=(t,e,r)=>{const s=t.map(i=>i.code);return e.map(i=>s.find(f=>f.startsWith(i))).find(Boolean)||r},nt=()=>{const t=new Date,e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${r}-${s}`},at=()=>new Date().toTimeString().split(" ")[0],Ct=()=>`${nt()} ${at()}`,ot=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,it=()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],Rt=(t,e)=>{if(e===null)return[];const r=t.messages[e];return r!=null&&r.parentId?[...Rt(t,r.parentId),r]:[r]},le=t=>{if(t==null)return"Unknown size";if(typeof t!="number"||t<0)return"Invalid size";if(t===0)return"0 B";const e=["B","KB","MB","GB","TB"];let r=0;for(;t>=1024&&r<e.length-1;)t/=1024,r++;return`${t.toFixed(1)} ${e[r]}`},he=t=>(console.log(typeof t),t?t.split(`
`).length:0);function H(t,e,r=new Set){if(!t)return{};if(t.$ref){const l=t.$ref.split("/").pop();if(r.has(l))return{};r.add(l);const i=e.schemas[l];return H(i,e,r)}if(t.type){const s={type:t.type};switch(t.description&&(s.description=t.description),t.type){case"object":s.properties={},s.required=t.required||[];for(const[l,i]of Object.entries(t.properties||{}))s.properties[l]=H(i,e);break;case"array":s.items=H(t.items,e);break}return s}return{}}const ue=t=>{const e=[];for(const[r,s]of Object.entries(t.paths))for(const[l,i]of Object.entries(s)){const f={type:"function",name:i.operationId,description:i.description||i.summary||"No description available.",parameters:{type:"object",properties:{},required:[]}};if(i.parameters&&i.parameters.forEach(p=>{f.parameters.properties[p.name]={type:p.schema.type,description:p.schema.description||""},p.required&&f.parameters.required.push(p.name)}),i.requestBody){const p=i.requestBody.content;if(p&&p["application/json"]){const n=p["application/json"].schema,b=H(n,t.components);b.properties?(f.parameters.properties={...f.parameters.properties,...b.properties},b.required&&(f.parameters.required=[...new Set([...f.parameters.required,...b.required])])):b.type==="array"&&(f.parameters=b)}}e.push(f)}return e};export{Et as A,Gt as B,Xt as C,nt as D,at as E,Ct as F,ot as G,it as H,Jt as I,Kt as J,Qt as K,ae as L,ee as M,ne as N,Lt as O,Nt as P,$t as Q,z as T,Zt as a,Rt as b,Wt as c,kt as d,ie as e,Yt as f,oe as g,le as h,he as i,jt as j,Ht as k,At as l,Vt as m,se as n,ce as o,yt as p,vt as q,qt as r,Pt as s,zt as t,ft as u,dt as v,te as w,re as x,X as y,ue as z};
//# sourceMappingURL=DLnmPzhS.js.map
