#!/usr/bin/env node
const{log:log,read:read,serve:serve}=require("./index.js"),configurationFileNames=process.argv.reduce(((e,r)=>"--config"!==r&&(!1===e?r:e)),"")||"reserve.json",verbose=process.argv.includes("--verbose"),silent=process.argv.includes("--silent");configurationFileNames.split(",").forEach((e=>{read(e).catch((r=>(verbose&&console.error(r.toString()),console.warn(`'${e}' not found or invalid, applying defaults`),{}))).then((e=>{let r;r=silent?serve(e):log(serve(e),verbose),r.on("ready",(()=>{process.send&&process.send("ready")}))}))}));