import{c as Lt}from"../chunks/qqT9E5ug.js";import{c as Mt,a as E,t as V,s as tt,b as Yt}from"../chunks/BcJYqscY.js";import{p as et,f as st,v as St,a as nt,c as b,j as l,l as at,s as N,r as p,o as rt,t as K,q as $,al as Ft,e as Nt,ad as Xt}from"../chunks/BpDtL3Bg.js";import{e as Tt,r as At,c as Bt,s as qt,a as ot,b as Ot,i as vt}from"../chunks/B-RD8E05.js";import{o as kt,s as dt,u as Ut,B as gt,D as bt,F as jt,H as Kt,J as Pt,T as _t,K as yt,e as ut,c as ct,L as Et,j as It,M as Dt,k as Zt,b as Jt,g as Qt}from"../chunks/CvXgY6iO.js";import{S as Ht,f as ht,a as mt,T as $t,A as te}from"../chunks/DBUhGp8f.js";import{r as Ct}from"../chunks/Cbydd1_z.js";import{a as ee,P as ne}from"../chunks/DI2vuTp2.js";import{p as ae}from"../chunks/BugF3wzh.js";import{S as oe}from"../chunks/CA04jA0E.js";import{g as ie}from"../chunks/pKKESLv8.js";import"../chunks/AnaTxqNM.js";import{a as re}from"../chunks/Cl8qLrYr.js";function se(n){const e=new Map;return n.forEach(o=>{const s=o.annotation_label.annotation_label_name;s&&e.set(s,(e.get(s)||0)+1)}),e}function le(n,e){et(e,!0);let o=At(e,["$$slots","$$events","$$legacy"]);kt(n,Tt({name:"move-left"},()=>o,{iconNode:[["path",{d:"M6 8L2 12L6 16"}],["path",{d:"M2 12H22"}]],children:(m,f)=>{var c=Mt(),y=st(c);dt(y,()=>e.children??St),E(m,c)},$$slots:{default:!0}})),nt()}function ue(n,e){et(e,!0);let o=At(e,["$$slots","$$events","$$legacy"]);kt(n,Tt({name:"zoom-in"},()=>o,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]],children:(m,f)=>{var c=Mt(),y=st(c);dt(y,()=>e.children??St),E(m,c)},$$slots:{default:!0}})),nt()}function ce(n,e){et(e,!0);let o=At(e,["$$slots","$$events","$$legacy"]);kt(n,Tt({name:"zoom-out"},()=>o,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11"}]],children:(m,f)=>{var c=Mt(),y=st(c);dt(y,()=>e.children??St),E(m,c)},$$slots:{default:!0}})),nt()}var de=V('<div class="h-full w-full overflow-hidden"><div class="sample relative h-full w-full"><div class="absolute right-4 top-2 z-10"><!></div> <!></div></div>'),he=V('<div class="flex h-full w-full flex-col space-y-4"><div class="flex w-full items-center space-x-4"><!> <h2 data-testid="sample-filename" class="text-xl font-semibold tracking-tight"> </h2></div> <!> <div class="flex min-h-0 flex-1 gap-4"><div class="flex-1"><!></div> <div class="relative w-[375px]"><!></div></div></div>');function me(n,e){et(e,!0);const[o,s]=qt(),m=()=>Bt(y,"$lastGridType",o),f=()=>Bt(w,"$selectedSampleIds",o),c=at(()=>{const _=ae.data.annotationId;if(_)return e.sample.annotations.find(k=>k.annotation_id===_)}),{lastGridType:y,selectedSampleIds:w,toggleSampleSelection:x}=Ut();let z=rt(!0);const I=()=>{$(z,!l(z))};var A=he(),D=b(A),W=b(D);const L=at(()=>m()==="samples"?Ct.toSamples(e.sample.dataset_id):Ct.toAnnotations(e.sample.dataset_id));gt(W,{variant:"outline",get href(){return l(L)},children:(_,k)=>{le(_,{})},$$slots:{default:!0}});var C=N(W,2),u=b(C);p(C),p(D);var O=N(D,2);Ht(O,{class:"mb-4 bg-border-hard"});var G=N(O,2),Y=b(G),M=b(Y);Vt(M,{className:"h-full",children:(_,k)=>{Wt(_,{className:"h-full",children:(B,R)=>{var Z=de(),F=b(Z),t=b(F),i=b(t);const a=at(()=>f().has(e.sample.sample_id));ee(i,{onSelect:()=>x(e.sample.sample_id),get isSelected(){return l(a)}}),p(t);var r=N(t,2);const h=at(()=>ne+e.sample.file_path_abs);Ne(r,{get imageURL(){return l(h)},get annotations(){return e.sample.annotations},get imageWidth(){return e.sample.width},get imageHeight(){return e.sample.height},get showOnlySelectedAnnotation(){return l(z)},get selectedAnnotation(){return l(c)}}),p(F),p(Z),E(B,Z)},$$slots:{default:!0}})},$$slots:{default:!0}}),p(Y);var d=N(Y,2),S=b(d);Le(S,{get sample(){return e.sample},get selectedAnnotation(){return l(c)},get showOnlySelectedAnnotation(){return l(z)},toggleShowOnlySelectedAnnotation:I}),p(d),p(G),p(A),K(()=>tt(u,`Filename: "${e.sample.file_name??""}"`)),E(n,A),nt(),s()}var fe=V('<div class="pointer-events-auto absolute bottom-0 left-1 z-20 flex select-none items-center gap-1 rounded-lg bg-muted bg-opacity-80 shadow-md backdrop-blur-sm"><!> <div class="h-6 w-px bg-white bg-opacity-20"></div> <!> <div class="w-[32px] text-center text-sm text-muted-foreground" data-testid="zoom-level"> </div> <!></div>');function ve(n,e){var o=fe(),s=b(o);gt(s,{variant:"ghost","data-testid":"zoom-reset",size:"sm",get onclick(){return e.onZoomReset},get disabled(){return e.isResetDisabled},children:(w,x)=>{Ft();var z=Yt("Reset");E(w,z)},$$slots:{default:!0}});var m=N(s,4);gt(m,{title:"zoom out",variant:"ghost",size:"icon","data-testid":"zoom-out",get onclick(){return e.onZoomOut},get disabled(){return e.isZoominDisabled},children:(w,x)=>{ce(w,{class:"h-4 w-4"})},$$slots:{default:!0}});var f=N(m,2),c=b(f);p(f);var y=N(f,2);gt(y,{title:"zoom in",variant:"ghost",size:"icon","data-testid":"zoom-in",get onclick(){return e.onZoomIn},get disabled(){return e.isZoomoutDisabled},children:(w,x)=>{ue(w,{class:"h-4 w-4"})},$$slots:{default:!0}}),p(o),K(w=>tt(c,`${w??""}%`),[()=>Math.round(e.scale*100)]),E(n,o)}function j(n){return typeof n=="string"?new bt([[document.querySelector(n)]],[document.documentElement]):new bt([[n]],jt)}function ge(n){let e;for(;e=n.sourceEvent;)n=e;return n}function it(n,e){if(n=ge(n),e===void 0&&(e=n.currentTarget),e){var o=e.ownerSVGElement||e;if(o.createSVGPoint){var s=o.createSVGPoint();return s.x=n.clientX,s.y=n.clientY,s=s.matrixTransform(e.getScreenCTM().inverse()),[s.x,s.y]}if(e.getBoundingClientRect){var m=e.getBoundingClientRect();return[n.clientX-m.left-e.clientLeft,n.clientY-m.top-e.clientTop]}}return[n.pageX,n.pageY]}function pe(n){return new bt([document.querySelectorAll(n)],[document.documentElement])}const wt={capture:!0,passive:!1};function zt(n){n.preventDefault(),n.stopImmediatePropagation()}function _e(n){var e=n.document.documentElement,o=j(n).on("dragstart.drag",zt,wt);"onselectstart"in e?o.on("selectstart.drag",zt,wt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ye(n,e){var o=n.document.documentElement,s=j(n).on("dragstart.drag",null);e&&(s.on("click.drag",zt,wt),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in o?s.on("selectstart.drag",null):(o.style.MozUserSelect=o.__noselect,delete o.__noselect)}var xe=1e-12;function Gt(n){return((n=Math.exp(n))+1/n)/2}function be(n){return((n=Math.exp(n))-1/n)/2}function we(n){return((n=Math.exp(2*n))-1)/(n+1)}const ze=function n(e,o,s){function m(f,c){var y=f[0],w=f[1],x=f[2],z=c[0],I=c[1],A=c[2],D=z-y,W=I-w,L=D*D+W*W,C,u;if(L<xe)u=Math.log(A/x)/e,C=function(S){return[y+S*D,w+S*W,x*Math.exp(e*S*u)]};else{var O=Math.sqrt(L),G=(A*A-x*x+s*L)/(2*x*o*O),Y=(A*A-x*x-s*L)/(2*A*o*O),M=Math.log(Math.sqrt(G*G+1)-G),d=Math.log(Math.sqrt(Y*Y+1)-Y);u=(d-M)/e,C=function(S){var _=S*u,k=Gt(M),B=x/(o*O)*(k*we(e*_+M)-be(M));return[y+B*D,w+B*W,x*k/Gt(e*_+M)]}}return C.duration=u*1e3*e/Math.SQRT2,C}return m.rho=function(f){var c=Math.max(.001,+f),y=c*c,w=y*y;return n(c,y,w)},m}(Math.SQRT2,2,4),ft=n=>()=>n;function Me(n,{sourceEvent:e,target:o,transform:s,dispatch:m}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:m}})}function xt(n){n.stopImmediatePropagation()}function lt(n){n.preventDefault(),n.stopImmediatePropagation()}function Se(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Te(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Rt(){return this.__zoom||Pt}function Ae(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function ke(){return navigator.maxTouchPoints||"ontouchstart"in this}function Pe(n,e,o){var s=n.invertX(e[0][0])-o[0][0],m=n.invertX(e[1][0])-o[1][0],f=n.invertY(e[0][1])-o[0][1],c=n.invertY(e[1][1])-o[1][1];return n.translate(m>s?(s+m)/2:Math.min(0,s)||Math.max(0,m),c>f?(f+c)/2:Math.min(0,f)||Math.max(0,c))}function Ee(){var n=Se,e=Te,o=Pe,s=Ae,m=ke,f=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],y=250,w=ze,x=Kt("start","zoom","end"),z,I,A,D=500,W=150,L=0,C=10;function u(t){t.property("__zoom",Rt).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",B).filter(m).on("touchstart.zoom",R).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.transform=function(t,i,a,r){var h=t.selection?t.selection():t;h.property("__zoom",Rt),t!==h?M(t,i,a,r):h.interrupt().each(function(){d(this,arguments).event(r).start().zoom(null,typeof i=="function"?i.apply(this,arguments):i).end()})},u.scaleBy=function(t,i,a,r){u.scaleTo(t,function(){var h=this.__zoom.k,v=typeof i=="function"?i.apply(this,arguments):i;return h*v},a,r)},u.scaleTo=function(t,i,a,r){u.transform(t,function(){var h=e.apply(this,arguments),v=this.__zoom,g=a==null?Y(h):typeof a=="function"?a.apply(this,arguments):a,T=v.invert(g),P=typeof i=="function"?i.apply(this,arguments):i;return o(G(O(v,P),g,T),h,c)},a,r)},u.translateBy=function(t,i,a,r){u.transform(t,function(){return o(this.__zoom.translate(typeof i=="function"?i.apply(this,arguments):i,typeof a=="function"?a.apply(this,arguments):a),e.apply(this,arguments),c)},null,r)},u.translateTo=function(t,i,a,r,h){u.transform(t,function(){var v=e.apply(this,arguments),g=this.__zoom,T=r==null?Y(v):typeof r=="function"?r.apply(this,arguments):r;return o(Pt.translate(T[0],T[1]).scale(g.k).translate(typeof i=="function"?-i.apply(this,arguments):-i,typeof a=="function"?-a.apply(this,arguments):-a),v,c)},r,h)};function O(t,i){return i=Math.max(f[0],Math.min(f[1],i)),i===t.k?t:new _t(i,t.x,t.y)}function G(t,i,a){var r=i[0]-a[0]*t.k,h=i[1]-a[1]*t.k;return r===t.x&&h===t.y?t:new _t(t.k,r,h)}function Y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function M(t,i,a,r){t.on("start.zoom",function(){d(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){d(this,arguments).event(r).end()}).tween("zoom",function(){var h=this,v=arguments,g=d(h,v).event(r),T=e.apply(h,v),P=a==null?Y(T):typeof a=="function"?a.apply(h,v):a,U=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),H=h.__zoom,X=typeof i=="function"?i.apply(h,v):i,J=w(H.invert(P).concat(U/H.k),X.invert(P).concat(U/X.k));return function(q){if(q===1)q=X;else{var Q=J(q),pt=U/Q[2];q=new _t(pt,P[0]-Q[0]*pt,P[1]-Q[1]*pt)}g.zoom(null,q)}})}function d(t,i,a){return!a&&t.__zooming||new S(t,i)}function S(t,i){this.that=t,this.args=i,this.active=0,this.sourceEvent=null,this.extent=e.apply(t,i),this.taps=0}S.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,i){return this.mouse&&t!=="mouse"&&(this.mouse[1]=i.invert(this.mouse[0])),this.touch0&&t!=="touch"&&(this.touch0[1]=i.invert(this.touch0[0])),this.touch1&&t!=="touch"&&(this.touch1[1]=i.invert(this.touch1[0])),this.that.__zoom=i,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var i=j(this.that).datum();x.call(t,this.that,new Me(t,{sourceEvent:this.sourceEvent,target:u,transform:this.that.__zoom,dispatch:x}),i)}};function _(t,...i){if(!n.apply(this,arguments))return;var a=d(this,i).event(t),r=this.__zoom,h=Math.max(f[0],Math.min(f[1],r.k*Math.pow(2,s.apply(this,arguments)))),v=it(t);if(a.wheel)(a.mouse[0][0]!==v[0]||a.mouse[0][1]!==v[1])&&(a.mouse[1]=r.invert(a.mouse[0]=v)),clearTimeout(a.wheel);else{if(r.k===h)return;a.mouse=[v,r.invert(v)],yt(this),a.start()}lt(t),a.wheel=setTimeout(g,W),a.zoom("mouse",o(G(O(r,h),a.mouse[0],a.mouse[1]),a.extent,c));function g(){a.wheel=null,a.end()}}function k(t,...i){if(A||!n.apply(this,arguments))return;var a=t.currentTarget,r=d(this,i,!0).event(t),h=j(t.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",U,!0),v=it(t,a),g=t.clientX,T=t.clientY;_e(t.view),xt(t),r.mouse=[v,this.__zoom.invert(v)],yt(this),r.start();function P(H){if(lt(H),!r.moved){var X=H.clientX-g,J=H.clientY-T;r.moved=X*X+J*J>L}r.event(H).zoom("mouse",o(G(r.that.__zoom,r.mouse[0]=it(H,a),r.mouse[1]),r.extent,c))}function U(H){h.on("mousemove.zoom mouseup.zoom",null),ye(H.view,r.moved),lt(H),r.event(H).end()}}function B(t,...i){if(n.apply(this,arguments)){var a=this.__zoom,r=it(t.changedTouches?t.changedTouches[0]:t,this),h=a.invert(r),v=a.k*(t.shiftKey?.5:2),g=o(G(O(a,v),r,h),e.apply(this,i),c);lt(t),y>0?j(this).transition().duration(y).call(M,g,r,t):j(this).call(u.transform,g,r,t)}}function R(t,...i){if(n.apply(this,arguments)){var a=t.touches,r=a.length,h=d(this,i,t.changedTouches.length===r).event(t),v,g,T,P;for(xt(t),g=0;g<r;++g)T=a[g],P=it(T,this),P=[P,this.__zoom.invert(P),T.identifier],h.touch0?!h.touch1&&h.touch0[2]!==P[2]&&(h.touch1=P,h.taps=0):(h.touch0=P,v=!0,h.taps=1+!!z);z&&(z=clearTimeout(z)),v&&(h.taps<2&&(I=P[0],z=setTimeout(function(){z=null},D)),yt(this),h.start())}}function Z(t,...i){if(this.__zooming){var a=d(this,i).event(t),r=t.changedTouches,h=r.length,v,g,T,P;for(lt(t),v=0;v<h;++v)g=r[v],T=it(g,this),a.touch0&&a.touch0[2]===g.identifier?a.touch0[0]=T:a.touch1&&a.touch1[2]===g.identifier&&(a.touch1[0]=T);if(g=a.that.__zoom,a.touch1){var U=a.touch0[0],H=a.touch0[1],X=a.touch1[0],J=a.touch1[1],q=(q=X[0]-U[0])*q+(q=X[1]-U[1])*q,Q=(Q=J[0]-H[0])*Q+(Q=J[1]-H[1])*Q;g=O(g,Math.sqrt(q/Q)),T=[(U[0]+X[0])/2,(U[1]+X[1])/2],P=[(H[0]+J[0])/2,(H[1]+J[1])/2]}else if(a.touch0)T=a.touch0[0],P=a.touch0[1];else return;a.zoom("touch",o(G(g,T,P),a.extent,c))}}function F(t,...i){if(this.__zooming){var a=d(this,i).event(t),r=t.changedTouches,h=r.length,v,g;for(xt(t),A&&clearTimeout(A),A=setTimeout(function(){A=null},D),v=0;v<h;++v)g=r[v],a.touch0&&a.touch0[2]===g.identifier?delete a.touch0:a.touch1&&a.touch1[2]===g.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),a.taps===2&&(g=it(g,this),Math.hypot(I[0]-g[0],I[1]-g[1])<C)){var T=j(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return u.wheelDelta=function(t){return arguments.length?(s=typeof t=="function"?t:ft(+t),u):s},u.filter=function(t){return arguments.length?(n=typeof t=="function"?t:ft(!!t),u):n},u.touchable=function(t){return arguments.length?(m=typeof t=="function"?t:ft(!!t),u):m},u.extent=function(t){return arguments.length?(e=typeof t=="function"?t:ft([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),u):e},u.scaleExtent=function(t){return arguments.length?(f[0]=+t[0],f[1]=+t[1],u):[f[0],f[1]]},u.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],u):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},u.constrain=function(t){return arguments.length?(o=t,u):o},u.duration=function(t){return arguments.length?(y=+t,u):y},u.interpolate=function(t){return arguments.length?(w=t,u):w},u.on=function(){var t=x.on.apply(x,arguments);return t===x?u:t},u.clickDistance=function(t){return arguments.length?(L=(t=+t)*t,u):Math.sqrt(L)},u.tapDistance=function(t){return arguments.length?(C=+t,u):C},u}function Ie(n,e){let o=n.scaleIndependentXForm;o||(o=n.scaleIndependentXForm=e.createSVGTransform(),n.transform.baseVal.appendItem(o));const s=n.parentNode;if(s){const m=s.getScreenCTM();if(m){const f=m.inverse().multiply(e.getScreenCTM());f.e=f.f=0,o.setMatrix(f)}}}var De=V('<div class="relative flex h-full w-full select-none items-center justify-center"><!> <svg class="z-10 h-full w-full cursor-grab" preserveAspectRatio="xMidYMid meet"><g><image></image><!></g></svg> <svg class="pointer-events-none absolute inset-0" preserveAspectRatio="xMidYMid meet"></svg></div>');function Ne(n,e){et(e,!0);let o=rt(null),s=rt(null),m=rt(800),f=rt(600);Nt(()=>{if(!l(o))return;$(m,ot(l(o).clientWidth)),$(f,ot(l(o).clientHeight));const d=new ResizeObserver(()=>{l(o)&&($(m,ot(l(o).clientWidth)),$(f,ot(l(o).clientHeight)))});return d.observe(l(o)),()=>d.disconnect()});const c=at(()=>e.selectedAnnotation&&e.showOnlySelectedAnnotation?[e.selectedAnnotation]:e.annotations),y=10,w=at(()=>{const d={x:0,y:0,width:e.imageWidth,height:e.imageHeight};if(e.selectedAnnotation){const{x:S,y:_,width:k,height:B}=e.selectedAnnotation;return{x:Math.round(Math.max(0,S-y)),y:Math.round(Math.max(0,_-y)),width:Math.round(Math.min(e.imageWidth-S,k+y*2)),height:Math.round(Math.min(e.imageHeight-_,B+y*2))}}return d});let x=rt(ot({k:1,x:0,y:0}));const z=at(()=>{if(!l(o))return 1;const d=l(m)/e.imageWidth,S=l(f)/e.imageHeight,_=Math.min(d,S);return l(x).k*_});let I=rt(null);const A=()=>{l(o)&&($(I,ot(Ee().on("zoom",d=>{$(x,ot(d.transform))}).filter(d=>(!d.ctrlKey||d.type==="wheel")&&!d.button&&!(d.type==="mousedown"&&d.button===2)).wheelDelta(d=>-d.deltaY*.002))),j(l(o)).call(l(I)).on("dblclick.zoom",null))},D=d=>{if(!l(o)||!l(I))return;const S=d?1.5:.75;j(l(o)).transition().duration(300).call(l(I).scaleBy,S)},W=()=>{!l(o)||!l(I)||j(l(o)).transition().duration(300).call(l(I).transform,Pt)};Xt(()=>{A()}),Nt(()=>{l(x).k,pe(".unscaled").each(function(){Ie(this,l(s))})});var L=De(),C=b(L);ve(C,{get scale(){return l(z)},onZoomIn:()=>D(!0),onZoomOut:()=>D(!1),onZoomReset:W});var u=N(C,2),O=b(u),G=b(O),Y=N(G);ut(Y,17,()=>l(c),d=>d.annotation_id,(d,S)=>{oe(d,{get annotation(){return l(S)},showLabel:!0,get imageWidth(){return e.imageWidth}})}),p(O),p(u),Ot(u,d=>$(o,d),()=>l(o));var M=N(u,2);ct(M,"viewBox","0 0 1024 768"),Ot(M,d=>$(s,d),()=>l(s)),p(L),K(()=>{ct(u,"viewBox",`${l(w).x} ${l(w).y} ${l(w).width} ${l(w).height}`),ct(O,"transform",`translate(${l(x).x}, ${l(x).y}) scale(${l(x).k})`),ct(G,"href",e.imageURL)}),E(n,L),nt()}var Be=V('<span class="text-sm"> </span> <span class="break-all text-sm"> </span>',1),Oe=V('<div class="flex flex-col gap-4"><!> <div class="grid grid-cols-[6rem_1fr] gap-y-3 text-diffuse-foreground"></div></div>'),Ze=V("<div> </div>"),Ce=V('<div class="flex gap-1"></div>'),Ge=V('<div class="flex items-center justify-between gap-2 rounded-sm bg-card px-5 py-2"><div class="text-sm"> </div> <div class="text-sm"> </div></div>'),Re=V('<div class="flex flex-col gap-2"></div>'),He=V('<span class="text-sm"> </span> <span class="break-all text-sm"> </span>',1),Ve=V('<div class="grid grid-cols-[6rem_1fr] gap-y-3 text-diffuse-foreground"></div>'),We=V('<div class="flex-none"><div class="mb-2.5 text-lg font-semibold">Sample details</div> <!></div> <div class="flex h-full min-h-0 flex-col space-y-2 overflow-y-auto dark:[color-scheme:dark]"><!> <!> <!> <!></div>',1);function Le(n,e){et(e,!0);const o=e.sample.tags,s=se(e.sample.annotations),m=[{label:"Height:",value:ht(e.sample.height)+"px"},{label:"Width:",value:ht(e.sample.width)+"px"},{label:"Filename:",value:e.sample.file_name},{label:"Filepath:",value:e.sample.file_path_abs}],f=at(()=>e.selectedAnnotation?[{label:"Height:",value:ht(Math.round(e.selectedAnnotation.height))+"px"},{label:"Width:",value:ht(Math.round(e.selectedAnnotation.width))+"px"},{label:"Annotation:",value:e.selectedAnnotation.annotation_label.annotation_label_name},{label:"Type:",value:"Bounding box"}]:[]);Vt(n,{className:"h-full",children:(c,y)=>{Wt(c,{className:"h-full flex flex-col",children:(w,x)=>{var z=We(),I=st(z),A=N(b(I),2);Ht(A,{class:"mb-4 bg-border-hard"}),p(I);var D=N(I,2),W=b(D);{var L=M=>{mt(M,{title:"Selected annotation",children:(d,S)=>{var _=Oe(),k=b(_);re(k,{name:"show-all",label:"Show only selected annotation",get isChecked(){return e.showOnlySelectedAnnotation},helperText:"Hides other annotations for clarity.",get onCheckedChange(){return e.toggleShowOnlySelectedAnnotation}});var B=N(k,2);ut(B,21,()=>l(f),({label:R,value:Z})=>R,(R,Z)=>{let F=()=>l(Z).label,t=()=>l(Z).value;var i=Be(),a=st(i),r=b(a,!0);p(a);var h=N(a,2),v=b(h,!0);p(h),K(()=>{tt(r,F()),tt(v,t())}),E(R,i)}),p(B),p(_),E(d,_)}})};vt(W,M=>{e.selectedAnnotation&&M(L)})}var C=N(W,2);{var u=M=>{mt(M,{title:"Tags",icon:$t,children:(d,S)=>{var _=Ce();ut(_,21,()=>o,Zt,(k,B)=>{var R=Ze(),Z=b(R,!0);p(R),K(F=>{Dt(R,1,F),tt(Z,l(B).name)},[()=>Et(It("inline rounded-lg bg-card px-2 py-2 text-xs"))]),E(k,R)}),p(_),E(d,_)}})};vt(C,M=>{o.length>0&&M(u)})}var O=N(C,2);{var G=M=>{mt(M,{title:"Annotations",children:(d,S)=>{var _=Re();ut(_,21,()=>s,Zt,(k,B)=>{var R=Ge(),Z=b(R),F=b(Z,!0);p(Z);var t=N(Z,2),i=b(t);p(t),p(R),K(a=>{tt(F,l(B)[0]),Jt(t,`color: ${a??""};`),tt(i,`(${l(B)[1]??""})`)},[()=>ie(l(B)[0]).color]),E(k,R)}),p(_),E(d,_)}})};vt(O,M=>{s.size>0&&M(G)})}var Y=N(O,2);mt(Y,{title:"Metadata",children:(M,d)=>{var S=Ve();ut(S,21,()=>m,({label:_,value:k})=>_,(_,k)=>{let B=()=>l(k).label,R=()=>l(k).value;var Z=He(),F=st(Z),t=b(F,!0);p(F);var i=N(F,2),a=b(i,!0);p(i),K(()=>{tt(t,B()),tt(a,R())}),E(_,Z)}),p(S),E(M,S)}}),p(D),E(w,z)},$$slots:{default:!0}})},$$slots:{default:!0}}),nt()}var Ye=V("<div><!></div>");function Vt(n,e){et(e,!0);var o=Ye(),s=b(o);dt(s,()=>e.children),p(o),K(m=>Dt(o,1,m),[()=>Et(It("rounded-lg border border-gray-800 bg-black",e.className))]),E(n,o),nt()}var Fe=V("<div><!></div>");function Wt(n,e){et(e,!0);var o=Fe(),s=b(o);dt(s,()=>e.children),p(o),K(m=>Dt(o,1,m),[()=>Et(It("p-4",e.className))]),E(n,o),nt()}const Xe=async({sample_id:n})=>{const e={data:void 0,error:void 0};try{const o=await Lt.GET("/api/samples/{sample_id}",{params:{path:{sample_id:n}}});if(o.error)throw new Error(JSON.stringify(o.error,null,2));if(!o.data)throw new Error("No data");e.data=o.data}catch(o){e.error="Error loading sample: "+String(o)}return e},qe=async({params:n,url:e})=>{const{sample_id:o}=n,{data:s,error:m}=await Xe({sample_id:o});return{sample:s,annotationId:e.searchParams.get("annotationId"),error:m}},dn=Object.freeze(Object.defineProperty({__proto__:null,load:qe},Symbol.toStringTag,{value:"Module"}));var Ue=V("<a>Go home</a>"),je=V('<div class="flex h-full w-full space-x-4 px-4 pb-4"><div class="h-full w-full space-y-6 rounded-[1vw] bg-card p-4"><!></div></div>');function hn(n,e){et(e,!0);const o=Qt(),[s,m]=o;var f=je(),c=b(f),y=b(c);{var w=z=>{me(z,{get sample(){return e.data.sample}})},x=z=>{te(z,{title:"Sample not found",children:(I,A)=>{var D=Ue();K(W=>ct(D,"href",W),[()=>s("/",void 0)]),E(I,D)}})};vt(y,z=>{e.data.sample?z(w):z(x,!1)})}p(c),p(f),E(n,f),nt()}export{hn as component,dn as universal};
