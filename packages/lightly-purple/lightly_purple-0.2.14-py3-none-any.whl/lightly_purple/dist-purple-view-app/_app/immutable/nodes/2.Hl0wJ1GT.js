var Kr=Object.defineProperty;var Ze=i=>{throw TypeError(i)};var Xr=(i,t,e)=>t in i?Kr(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var F=(i,t,e)=>Xr(i,typeof t!="symbol"?t+"":t,e),qe=(i,t,e)=>t.has(i)||Ze("Cannot "+e);var p=(i,t,e)=>(qe(i,t,"read from private field"),e?e.call(i):t.get(i)),T=(i,t,e)=>t.has(i)?Ze("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),Ot=(i,t,e,r)=>(qe(i,t,"write to private field"),r?r.call(i,e):t.set(i,e),e),q=(i,t,e)=>(qe(i,t,"access private method"),e);import{N as Ke,d as ke,O as Yr,h as X,s as U,a as kt,m as Ce,p as Br,l as Ge,q as Ee,y as Me,w as ur,Q as hr,A as fr,R as vr,U as pr,V as gr,W as mr,X as br,Y as _r,Z as xr,_ as yr,n as tr,e as Ve,C as Ur,b as Gr,c as wr,j as it,$ as Wr,a0 as jr,a1 as Hr,a2 as Jr,a3 as Qr,a4 as er,a5 as Zr,a6 as rr,o as Vt,u as Sr,B as Lt,a7 as ts,k as es,a8 as rs,a9 as ss}from"../chunks/CvXgY6iO.js";import{z as Xe,j as l,q as B,p as V,f as S,a as I,l as b,c as w,v as et,r as y,t as H,h as se,o as xt,a2 as as,aE as sr,Z as zt,w as ns,s as P,al as bt,aH as Ft,aG as is,e as os}from"../chunks/BpDtL3Bg.js";import{c as It}from"../chunks/qqT9E5ug.js";import{a as ls,r as ds}from"../chunks/B5v7Y5Xv.js";import{r as ne}from"../chunks/Cbydd1_z.js";import{c as D,a as g,t as $,o as $t,s as ut,b as Wt}from"../chunks/BcJYqscY.js";import{p as A,i as ht,r as Y,a as at,s as Qt,c as nt,d as j,e as rt,b as ie}from"../chunks/B-RD8E05.js";import{p as cs}from"../chunks/xPRKyJI4.js";import{a as Ie,T as us,f as qt,A as hs,S as Pr}from"../chunks/DBUhGp8f.js";import{S as fs,s as vs,h as ar,n as Ar,a as Tr,i as ps,b as gs,u as $r,l as ms}from"../chunks/BotdLRAo.js";import"../chunks/AnaTxqNM.js";import{a as kr,L as bs}from"../chunks/Cl8qLrYr.js";import{g as nr}from"../chunks/pKKESLv8.js";import{o as Cr,i as _s,g as xs,D as ys,a as ws}from"../chunks/CK79guTp.js";var Ss=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Ps=["difference","intersection","symmetricDifference","union"],ir=!1,Xt,ot,Pt,le,Er;const de=class de extends Set{constructor(e){super();T(this,le);T(this,Xt,new Map);T(this,ot,Xe(0));T(this,Pt,Xe(0));if(e){for(var r of e)super.add(r);p(this,Pt).v=super.size}ir||q(this,le,Er).call(this)}has(e){var r=super.has(e),s=p(this,Xt),a=s.get(e);if(a===void 0){if(!r)return l(p(this,ot)),!1;a=Xe(!0),s.set(e,a)}return l(a),r}add(e){return super.has(e)||(super.add(e),B(p(this,Pt),super.size),Ke(p(this,ot))),this}delete(e){var r=super.delete(e),s=p(this,Xt),a=s.get(e);return a!==void 0&&(s.delete(e),B(a,!1)),r&&(B(p(this,Pt),super.size),Ke(p(this,ot))),r}clear(){if(super.size!==0){super.clear();var e=p(this,Xt);for(var r of e.values())B(r,!1);e.clear(),B(p(this,Pt),0),Ke(p(this,ot))}}keys(){return this.values()}values(){return l(p(this,ot)),super.values()}entries(){return l(p(this,ot)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return l(p(this,Pt))}};Xt=new WeakMap,ot=new WeakMap,Pt=new WeakMap,le=new WeakSet,Er=function(){ir=!0;var e=de.prototype,r=Set.prototype;for(const s of Ss)e[s]=function(...a){return l(p(this,ot)),r[s].apply(this,a)};for(const s of Ps)e[s]=function(...a){l(p(this,ot));var n=r[s].apply(this,a);return new de(n)}};let Ye=de;var As=$("<div><!></div>");function Ts(i,t){V(t,!0);let e=A(t,"id",19,ke),r=A(t,"ref",15,null),s=Y(t,["$$slots","$$events","$$legacy","id","children","child","ref"]);const a=Yr({id:X.with(()=>e()),ref:X.with(()=>r(),u=>r(u))}),n=b(()=>Ce(s,a.props));var o=D(),c=S(o);{var d=u=>{var f=D(),v=S(f);U(v,()=>t.child,()=>({props:l(n)})),g(u,f)},h=u=>{var f=As();let v;var _=w(f);U(_,()=>t.children??et),y(f),H(()=>v=kt(f,v,{...l(n)})),g(u,f)};ht(c,u=>{t.child?u(d):u(h,!1)})}g(i,o),I()}function $s(i,t,e){const r={position:"absolute"};return i==="lr"?(r.left=`${t}%`,r.right=`${e}%`):i==="rl"?(r.right=`${t}%`,r.left=`${e}%`):i==="bt"?(r.bottom=`${t}%`,r.top=`${e}%`):(r.top=`${t}%`,r.bottom=`${e}%`),r}function Mr(i,t){const e={position:"absolute"};return i==="lr"?(e.left=`${t}%`,e.translate="-50% 0"):i==="rl"?(e.right=`${t}%`,e.translate="50% 0"):i==="bt"?(e.bottom=`${t}%`,e.translate="0 50%"):(e.top=`${t}%`,e.translate="0 -50%"),e}function Vr(i,t,e){const r={position:"absolute"};return i==="lr"?(r.left=`${t}%`,r.translate=`${e}% 0`):i==="rl"?(r.right=`${t}%`,r.translate=`${-e}% 0`):i==="bt"?(r.bottom=`${t}%`,r.translate=`0 ${-e}%`):(r.top=`${t}%`,r.translate=`0 ${e}%`),r}function Kt(i,t,e,r){const s=(i-(Number.isNaN(t)?0:t))%r;let a=Math.abs(s)*2>=r?i+Math.sign(s)*(r-Math.abs(s)):i-s;Number.isNaN(t)?!Number.isNaN(e)&&a>e&&(a=Math.floor(e/r)*r):a<t?a=t:!Number.isNaN(e)&&a>e&&(a=t+Math.floor((e-t)/r)*r);const n=r.toString(),o=n.indexOf("."),c=o>=0?n.length-o:0;if(c>0){const d=10**c;a=Math.round(a*d)/d}return a}const ks="data-slider-root",oe="data-slider-thumb",Cs="data-slider-range",Ir="data-slider-tick";var jt,ce,ue,he;class Nr{constructor(t){F(this,"opts");T(this,jt,xt(!1));T(this,ce,b(()=>this.opts.orientation.current==="horizontal"?this.opts.dir.current==="rtl"?"rl":"lr":this.opts.dir.current==="rtl"?"tb":"bt"));T(this,ue,b(()=>{if(!this.opts.disabled.current)return this.opts.orientation.current==="horizontal"?"pan-y":"pan-x"}));F(this,"getAllThumbs",()=>{const t=this.opts.ref.current;return t?Array.from(t.querySelectorAll(`[${oe}]`)):[]});T(this,he,b(()=>({id:this.opts.id.current,"data-orientation":Me(this.opts.orientation.current),"data-disabled":Ee(this.opts.disabled.current),style:{touchAction:l(p(this,ue))},[ks]:""})));this.opts=t,Ge(t)}get isActive(){return l(p(this,jt))}set isActive(t){B(p(this,jt),at(t))}get direction(){return l(p(this,ce))}get props(){return l(p(this,he))}}jt=new WeakMap,ce=new WeakMap,ue=new WeakMap,he=new WeakMap;var fe,ve,pe,ge,me;class Es extends Nr{constructor(e){super(e);F(this,"opts");F(this,"isMulti",!1);F(this,"updateValue",e=>{this.opts.value.current=Kt(e,this.opts.min.current,this.opts.max.current,this.opts.step.current)});F(this,"handlePointerMove",e=>{if(!this.isActive||this.opts.disabled.current)return;e.preventDefault(),e.stopPropagation();const r=this.opts.ref.current,s=this.getAllThumbs()[0];if(!r||!s)return;s.focus();const{left:a,right:n,top:o,bottom:c}=r.getBoundingClientRect();this.direction==="lr"?this.applyPosition({clientXY:e.clientX,start:a,end:n}):this.direction==="rl"?this.applyPosition({clientXY:e.clientX,start:n,end:a}):this.direction==="bt"?this.applyPosition({clientXY:e.clientY,start:c,end:o}):this.direction==="tb"&&this.applyPosition({clientXY:e.clientY,start:o,end:c})});F(this,"handlePointerDown",e=>{if(e.button!==0||this.opts.disabled.current)return;const r=this.opts.ref.current,s=this.getAllThumbs()[0];if(!s||!r)return;const a=e.target;!hr(a)||!r.contains(a)||(e.preventDefault(),s.focus(),this.isActive=!0,this.handlePointerMove(e))});F(this,"handlePointerUp",()=>{this.opts.disabled.current||(this.isActive&&this.opts.onValueCommit.current(se(()=>this.opts.value.current)),this.isActive=!1)});F(this,"getPositionFromValue",e=>{const r=this.opts.min.current,s=this.opts.max.current;return(e-r)/(s-r)*100});T(this,fe,b(()=>{const e=this.opts.value.current;return Array.from({length:1},()=>{const r=e,s=this.getPositionFromValue(r??0),a=Mr(this.direction,s);return{role:"slider","aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":r,"aria-disabled":vr(this.opts.disabled.current),"aria-orientation":fr(this.opts.orientation.current),"data-value":r,tabindex:this.opts.disabled.current?-1:0,style:a,[oe]:""}})}));T(this,ve,b(()=>this.thumbsPropsArr.map((e,r)=>r)));T(this,pe,b(()=>{const e=this.opts.max.current,r=this.opts.min.current,s=this.opts.step.current,a=e-r;let n=Math.ceil(a/s);a%s==0&&n++;const o=this.opts.value.current;return Array.from({length:n},(c,d)=>{const h=d*(s/a)*100,u=d===0,f=d===n-1,v=u?0:f?-100:-50,_=Vr(this.direction,h,v),m=r+d*s,x=m<=o;return{"data-disabled":Ee(this.opts.disabled.current),"data-orientation":Me(this.opts.orientation.current),"data-bounded":x?"":void 0,"data-value":m,style:_,[Ir]:""}})}));T(this,ge,b(()=>this.ticksPropsArr.map((e,r)=>r)));T(this,me,b(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));this.opts=e,Cr(()=>pr($t(document,"pointerdown",this.handlePointerDown),$t(document,"pointerup",this.handlePointerUp),$t(document,"pointermove",this.handlePointerMove),$t(document,"pointerleave",this.handlePointerUp))),ur([()=>this.opts.step.current,()=>this.opts.min.current,()=>this.opts.max.current,()=>this.opts.value.current],([r,s,a,n])=>{const o=d=>Kt(d,s,a,r)===d,c=d=>Kt(d,s,a,r);o(n)||(this.opts.value.current=c(n))})}applyPosition({clientXY:e,start:r,end:s}){const a=this.opts.min.current,n=this.opts.max.current,c=(e-r)/(s-r)*(n-a)+a;if(c<a)this.updateValue(a);else if(c>n)this.updateValue(n);else{const d=this.opts.step.current,h=Math.floor((c-a)/d),u=a+h*d+d/2,f=a+(h+1)*d+d/2,v=c>=u&&c<f?(h+1)*d+a:h*d+a;v<=n&&this.updateValue(v)}}get thumbsPropsArr(){return l(p(this,fe))}get thumbsRenderArr(){return l(p(this,ve))}get ticksPropsArr(){return l(p(this,pe))}get ticksRenderArr(){return l(p(this,ge))}get snippetProps(){return l(p(this,me))}}fe=new WeakMap,ve=new WeakMap,pe=new WeakMap,ge=new WeakMap,me=new WeakMap;var Ht,Jt,be,_e,xe,ye,we,Se;class Ms extends Nr{constructor(e){super(e);F(this,"opts");F(this,"isMulti",!0);T(this,Ht,xt(null));T(this,Jt,xt(0));T(this,be,e=>{const r=this.getAllThumbs();if(!r.length)return;for(const o of r)o.blur();const s=r.map(o=>{if(this.opts.orientation.current==="horizontal"){const{left:c,right:d}=o.getBoundingClientRect();return Math.abs(e.clientX-(c+d)/2)}else{const{top:c,bottom:d}=o.getBoundingClientRect();return Math.abs(e.clientY-(c+d)/2)}}),a=r[s.indexOf(Math.min(...s))],n=r.indexOf(a);return{node:a,idx:n}});F(this,"handlePointerMove",e=>{if(!this.isActive||this.opts.disabled.current)return;e.preventDefault(),e.stopPropagation();const r=this.opts.ref.current,s=this.activeThumb;if(!r||!s)return;s.node.focus();const{left:a,right:n,top:o,bottom:c}=r.getBoundingClientRect(),d=this.direction;d==="lr"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:s.idx,start:a,end:n}):d==="rl"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:s.idx,start:n,end:a}):d==="bt"?this.applyPosition({clientXY:e.clientY,activeThumbIdx:s.idx,start:c,end:o}):d==="tb"&&this.applyPosition({clientXY:e.clientY,activeThumbIdx:s.idx,start:o,end:c})});F(this,"handlePointerDown",e=>{if(e.button!==0||this.opts.disabled.current)return;const r=this.opts.ref.current,s=p(this,be).call(this,e);if(!s||!r)return;const a=e.target;!hr(a)||!r.contains(a)||(e.preventDefault(),this.activeThumb=s,s.node.focus(),this.isActive=!0,this.handlePointerMove(e))});F(this,"handlePointerUp",()=>{this.opts.disabled.current||(this.isActive&&this.opts.onValueCommit.current(se(()=>this.opts.value.current)),this.isActive=!1)});F(this,"getPositionFromValue",e=>{const r=this.opts.min.current,s=this.opts.max.current;return(e-r)/(s-r)*100});F(this,"getAllThumbs",()=>{const e=this.opts.ref.current;return e?Array.from(e.querySelectorAll(`[${oe}]`)):[]});F(this,"updateValue",(e,r)=>{const s=this.opts.value.current;if(!s.length){this.opts.value.current.push(e);return}if(s[r]===e)return;const n=[...s];if(!_s(r,n))return;const o=n[r]>e?-1:1,c=()=>{var _;const f=r+o;n[r]=n[f],n[f]=e;const v=this.getAllThumbs();v.length&&((_=v[f])==null||_.focus(),this.activeThumb={node:v[f],idx:f})};if(this.opts.autoSort.current&&(o===-1&&e<n[r-1]||o===1&&e>n[r+1])){c(),this.opts.value.current=n;return}const d=this.opts.min.current,h=this.opts.max.current,u=this.opts.step.current;n[r]=Kt(e,d,h,u),this.opts.value.current=n});T(this,_e,b(()=>{const e=this.opts.value.current;return Array.from({length:e.length||1},(r,s)=>{const a=se(()=>this.currentThumbIdx);a<e.length&&se(()=>{this.currentThumbIdx=a+1});const n=e[s],o=this.getPositionFromValue(n??0),c=Mr(this.direction,o);return{role:"slider","aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":n,"aria-disabled":vr(this.opts.disabled.current),"aria-orientation":fr(this.opts.orientation.current),"data-value":n,tabindex:this.opts.disabled.current?-1:0,style:c,[oe]:""}})}));T(this,xe,b(()=>this.thumbsPropsArr.map((e,r)=>r)));T(this,ye,b(()=>{const e=this.opts.max.current,r=this.opts.min.current,s=this.opts.step.current,a=e-r;let n=Math.ceil(a/s);a%s==0&&n++;const o=this.opts.value.current;return Array.from({length:n},(c,d)=>{const h=d*(s/a)*100,u=d===0,f=d===n-1,v=u?0:f?-100:-50,_=Vr(this.direction,h,v),m=r+d*s,x=o.length===1?m<=o[0]:o[0]<=m&&m<=o[o.length-1];return{"data-disabled":Ee(this.opts.disabled.current),"data-orientation":Me(this.opts.orientation.current),"data-bounded":x?"":void 0,"data-value":m,style:_,[Ir]:""}})}));T(this,we,b(()=>this.ticksPropsArr.map((e,r)=>r)));T(this,Se,b(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));this.opts=e,Cr(()=>pr($t(document,"pointerdown",this.handlePointerDown),$t(document,"pointerup",this.handlePointerUp),$t(document,"pointermove",this.handlePointerMove),$t(document,"pointerleave",this.handlePointerUp))),ur([()=>this.opts.step.current,()=>this.opts.min.current,()=>this.opts.max.current,()=>this.opts.value.current],([r,s,a,n])=>{const o=d=>Kt(d,s,a,r)===d,c=d=>Kt(d,s,a,r);n.some(d=>!o(d))&&(this.opts.value.current=n.map(c))})}get activeThumb(){return l(p(this,Ht))}set activeThumb(e){B(p(this,Ht),at(e))}get currentThumbIdx(){return l(p(this,Jt))}set currentThumbIdx(e){B(p(this,Jt),at(e))}applyPosition({clientXY:e,activeThumbIdx:r,start:s,end:a}){const n=this.opts.min.current,o=this.opts.max.current,d=(e-s)/(a-s)*(o-n)+n;if(d<n)this.updateValue(n,r);else if(d>o)this.updateValue(o,r);else{const h=this.opts.step.current,u=Math.floor((d-n)/h),f=n+u*h+h/2,v=n+(u+1)*h+h/2,_=d>=f&&d<v?(u+1)*h+n:u*h+n;_<=o&&this.updateValue(_,r)}}get thumbsPropsArr(){return l(p(this,_e))}get thumbsRenderArr(){return l(p(this,xe))}get ticksPropsArr(){return l(p(this,ye))}get ticksRenderArr(){return l(p(this,we))}get snippetProps(){return l(p(this,Se))}}Ht=new WeakMap,Jt=new WeakMap,be=new WeakMap,_e=new WeakMap,xe=new WeakMap,ye=new WeakMap,we=new WeakMap,Se=new WeakMap;const Vs=[gr,mr,br,_r,xr,yr];var Pe,Ae;class Is{constructor(t,e){F(this,"opts");F(this,"root");T(this,Pe,b(()=>{const t=Array.isArray(this.root.opts.value.current)&&this.root.opts.value.current.length>1?this.root.getPositionFromValue(Math.min(...this.root.opts.value.current)??0):0,e=Array.isArray(this.root.opts.value.current)?100-this.root.getPositionFromValue(Math.max(...this.root.opts.value.current)??0):100-this.root.getPositionFromValue(this.root.opts.value.current);return{position:"absolute",...$s(this.root.direction,t,e)}}));T(this,Ae,b(()=>({id:this.opts.id.current,"data-orientation":Me(this.root.opts.orientation.current),"data-disabled":Ee(this.root.opts.disabled.current),style:this.rangeStyles,[Cs]:""})));this.opts=t,this.root=e,Ge(t)}get rangeStyles(){return l(p(this,Pe))}get props(){return l(p(this,Ae))}}Pe=new WeakMap,Ae=new WeakMap;var Te,W,Z,$e;class Ns{constructor(t,e){T(this,W);F(this,"opts");F(this,"root");T(this,Te,b(()=>this.root.opts.disabled.current||this.opts.disabled.current));T(this,$e,b(()=>({...this.root.thumbsPropsArr[this.opts.index.current],id:this.opts.id.current,onkeydown:this.onkeydown})));this.opts=t,this.root=e,Ge(t),this.onkeydown=this.onkeydown.bind(this)}onkeydown(t){if(l(p(this,Te)))return;const e=this.opts.ref.current;if(!e)return;const r=this.root.getAllThumbs();if(!r.length)return;const s=r.indexOf(e);if(this.root.isMulti&&(this.root.currentThumbIdx=s),!Vs.includes(t.key))return;t.preventDefault();const a=this.root.opts.min.current,n=this.root.opts.max.current,o=this.root.opts.value.current,c=Array.isArray(o)?o[s]:o,d=this.root.opts.orientation.current,h=this.root.direction,u=this.root.opts.step.current;switch(t.key){case xr:q(this,W,Z).call(this,a);break;case yr:q(this,W,Z).call(this,n);break;case gr:if(d!=="horizontal")break;if(t.metaKey){const f=h==="rl"?n:a;q(this,W,Z).call(this,f)}else h==="rl"&&c<n?q(this,W,Z).call(this,c+u):h==="lr"&&c>a&&q(this,W,Z).call(this,c-u);break;case mr:if(d!=="horizontal")break;if(t.metaKey){const f=h==="rl"?a:n;q(this,W,Z).call(this,f)}else h==="rl"&&c>a?q(this,W,Z).call(this,c-u):h==="lr"&&c<n&&q(this,W,Z).call(this,c+u);break;case br:if(t.metaKey){const f=h==="tb"?a:n;q(this,W,Z).call(this,f)}else h==="tb"&&c>a?q(this,W,Z).call(this,c-u):h!=="tb"&&c<n&&q(this,W,Z).call(this,c+u);break;case _r:if(t.metaKey){const f=h==="tb"?n:a;q(this,W,Z).call(this,f)}else h==="tb"&&c<n?q(this,W,Z).call(this,c+u):h!=="tb"&&c>a&&q(this,W,Z).call(this,c-u);break}this.root.opts.onValueCommit.current(this.root.opts.value.current)}get props(){return l(p(this,$e))}}Te=new WeakMap,W=new WeakSet,Z=function(t){this.root.isMulti?this.root.updateValue(t,this.opts.index.current):this.root.updateValue(t)},$e=new WeakMap;const We=new Br("Slider.Root");function Rs(i){const{type:t,...e}=i,r=t==="single"?new Es(e):new Ms(e);return We.set(r)}function Ds(i){return new Is(i,We.get())}function Os(i){return new Ns(i,We.get())}var zs=$("<span><!></span>");function Fs(i,t){V(t,!0);let e=A(t,"id",19,ke),r=A(t,"ref",15,null),s=A(t,"value",15),a=A(t,"onValueChange",3,tr),n=A(t,"onValueCommit",3,tr),o=A(t,"disabled",3,!1),c=A(t,"min",3,0),d=A(t,"max",3,100),h=A(t,"step",3,1),u=A(t,"dir",3,"ltr"),f=A(t,"autoSort",3,!0),v=A(t,"orientation",3,"horizontal"),_=Y(t,["$$slots","$$events","$$legacy","children","child","id","ref","value","type","onValueChange","onValueCommit","disabled","min","max","step","dir","autoSort","orientation"]);s()===void 0&&s(t.type==="single"?0:[]);const m=Rs({id:X.with(()=>e()),ref:X.with(()=>r(),k=>r(k)),value:X.with(()=>s(),k=>{s(k),a()(k)}),onValueCommit:X.with(()=>n()),disabled:X.with(()=>o()),min:X.with(()=>c()),max:X.with(()=>d()),step:X.with(()=>h()),dir:X.with(()=>u()),autoSort:X.with(()=>f()),orientation:X.with(()=>v()),type:t.type}),x=b(()=>Ce(_,m.props));var M=D(),O=S(M);{var N=k=>{var z=D(),L=S(z),C=as(()=>({props:l(x),...m.snippetProps}));U(L,()=>t.child,()=>l(C)),g(k,z)},R=k=>{var z=zs();let L;var C=w(z);U(C,()=>t.children??et,()=>m.snippetProps),y(z),H(()=>L=kt(z,L,{...l(x)})),g(k,z)};ht(O,k=>{t.child?k(N):k(R,!1)})}g(i,M),I()}var Ls=$("<span><!></span>");function qs(i,t){V(t,!0);let e=A(t,"ref",15,null),r=A(t,"id",19,ke),s=Y(t,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=Ds({id:X.with(()=>r()),ref:X.with(()=>e(),u=>e(u))}),n=b(()=>Ce(s,a.props));var o=D(),c=S(o);{var d=u=>{var f=D(),v=S(f);U(v,()=>t.child,()=>({props:l(n)})),g(u,f)},h=u=>{var f=Ls();let v;var _=w(f);U(_,()=>t.children??et),y(f),H(()=>v=kt(f,v,{...l(n)})),g(u,f)};ht(c,u=>{t.child?u(d):u(h,!1)})}g(i,o),I()}var Ks=$("<span><!></span>");function Xs(i,t){V(t,!0);let e=A(t,"ref",15,null),r=A(t,"id",19,ke),s=A(t,"disabled",3,!1),a=Y(t,["$$slots","$$events","$$legacy","children","child","ref","id","index","disabled"]);const n=Os({id:X.with(()=>r()),ref:X.with(()=>e(),f=>e(f)),index:X.with(()=>t.index),disabled:X.with(()=>s())}),o=b(()=>Ce(a,n.props));var c=D(),d=S(c);{var h=f=>{var v=D(),_=S(v);U(_,()=>t.child,()=>({props:l(o)})),g(f,v)},u=f=>{var v=Ks();let _;var m=w(v);U(m,()=>t.children??et),y(v),H(()=>_=kt(v,_,{...l(o)})),g(f,v)};ht(d,f=>{t.child?f(h):f(u,!1)})}g(i,c),I()}var At,Tt,tt,_t,yt,ae,Be,cr,Ys=(cr=class extends fs{constructor(t,e){super();T(this,yt);T(this,At);T(this,Tt);T(this,tt);T(this,_t);Ot(this,At,t),this.setOptions(e),this.bindMethods(),q(this,yt,ae).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const e=this.options;this.options=p(this,At).defaultMutationOptions(t),vs(this.options,e)||p(this,At).getMutationCache().notify({type:"observerOptionsUpdated",mutation:p(this,tt),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&ar(e.mutationKey)!==ar(this.options.mutationKey)?this.reset():((r=p(this,tt))==null?void 0:r.state.status)==="pending"&&p(this,tt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=p(this,tt))==null||t.removeObserver(this)}onMutationUpdate(t){q(this,yt,ae).call(this),q(this,yt,Be).call(this,t)}getCurrentResult(){return p(this,Tt)}reset(){var t;(t=p(this,tt))==null||t.removeObserver(this),Ot(this,tt,void 0),q(this,yt,ae).call(this),q(this,yt,Be).call(this)}mutate(t,e){var r;return Ot(this,_t,e),(r=p(this,tt))==null||r.removeObserver(this),Ot(this,tt,p(this,At).getMutationCache().build(p(this,At),this.options)),p(this,tt).addObserver(this),p(this,tt).execute(t)}},At=new WeakMap,Tt=new WeakMap,tt=new WeakMap,_t=new WeakMap,yt=new WeakSet,ae=function(){var e;const t=((e=p(this,tt))==null?void 0:e.state)??xs();Ot(this,Tt,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Be=function(t){Ar.batch(()=>{var e,r,s,a,n,o,c,d;if(p(this,_t)&&this.hasListeners()){const h=p(this,Tt).variables,u=p(this,Tt).context;(t==null?void 0:t.type)==="success"?((r=(e=p(this,_t)).onSuccess)==null||r.call(e,t.data,h,u),(a=(s=p(this,_t)).onSettled)==null||a.call(s,t.data,null,h,u)):(t==null?void 0:t.type)==="error"&&((o=(n=p(this,_t)).onError)==null||o.call(n,t.error,h,u),(d=(c=p(this,_t)).onSettled)==null||d.call(c,void 0,t.error,h,u))}this.listeners.forEach(h=>{h(p(this,Tt))})})},cr);function Bs(i,t){const e=Tr(),r=ps(i)?i:sr(i),s=new Ys(e,zt(r));let a;r.subscribe(c=>{a=(d,h)=>{s.mutate(d,h).catch(gs)},s.setOptions(c)});const n=sr(s.getCurrentResult(),c=>s.subscribe(Ar.batchCalls(d=>c(d)))),{subscribe:o}=ns(n,c=>({...c,mutate:a,mutateAsync:c.mutate}));return{subscribe:o}}var Us=$('<div class="flex items-center space-x-2 py-1"><!></div>'),Gs=$("<p>No tag, create a tag</p>"),Ws=$('<div class="mb-3 w-full space-y-2"></div>');function js(i,t){V(t,!0);const[e,r]=Qt(),s=()=>nt(l(o),"$tags",e),a=()=>nt(l(c),"$tagsSelected",e),n=b(()=>$r({dataset_id:t.dataset_id,kind:[t.gridType==="annotations"?"annotation":"sample"]})),o=b(()=>l(n).tags),c=b(()=>l(n).tagsSelected),d=b(()=>l(n).tagSelectionToggle);Ie(i,{title:"Tags",icon:us,children:(h,u)=>{var f=Ws();Ve(f,5,s,v=>v.tag_id,(v,_)=>{var m=Us(),x=w(m);const M=b(()=>a().has(l(_).tag_id));kr(x,{get name(){return l(_).tag_id},get isChecked(){return l(M)},get label(){return l(_).name},onCheckedChange:()=>l(d)(l(_).tag_id)}),y(m),g(v,m)},v=>{var _=Gs();g(v,_)}),y(f),g(h,f)}}),I(),r()}var Hs=$('<div class="h-3 w-3 rounded-sm border"></div> <p class="flex-1 truncate text-base font-normal"> </p> <span class="text-sm text-diffuse-foreground"> </span>',1),Js=$('<div class="width-full flex items-center space-x-2"><!> <!></div>'),Qs=$('<div class="width-full space-y-2 overflow-hidden"></div>');function Zs(i,t){V(t,!0);const[e,r]=Qt(),s=()=>nt(a(),"$annotationFilters",e);let a=A(t,"annotationFilters",19,()=>[]);Ie(i,{title:"Labels",children:(n,o)=>{var c=Qs();Ve(c,5,s,({label_name:d,current_count:h,total_count:u,selected:f})=>d,(d,h)=>{let u=()=>l(h).label_name,f=()=>l(h).current_count,v=()=>l(h).total_count,_=()=>l(h).selected;var m=Js(),x=w(m);const M=b(()=>`${u()}-label`);Ur(x,{get id(){return u()},get checked(){return _()},get"aria-labelledby"(){return l(M)},onCheckedChange:()=>t.onToggleAnnotationFilter(u())});var O=P(x,2);const N=b(()=>`${u()}-label`);bs(O,{get id(){return l(N)},get for(){return u()},class:"flex min-w-0 flex-1 cursor-pointer items-center space-x-2 text-nowrap peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(R,k)=>{var z=Hs(),L=S(z),C=P(L,2),lt=w(C,!0);y(C);var J=P(C,2),ft=w(J);y(J),H((vt,Ct,wt)=>{Gr(L,vt),ut(lt,u()),ut(ft,`${Ct??""} of ${wt??""}`)},[()=>`
                            border-color: ${nr(u()).color};
                            background-color: ${nr(u(),_()?1:.6).color};
                        `,()=>qt(f()),()=>qt(v())]),g(R,z)},$$slots:{default:!0}}),y(m),H(()=>wr(m,"title",u())),g(d,m)}),y(c),g(n,c)},$$slots:{default:!0}}),I(),r()}function ta(i,t){V(t,!0);let e=A(t,"ref",15,null),r=Y(t,["$$slots","$$events","$$legacy","ref","class"]);var s=D(),a=S(s);const n=b(()=>it("text-lg font-semibold leading-none tracking-tight",t.class));j(a,()=>ys,(o,c)=>{c(o,rt({get class(){return l(n)}},()=>r,{get ref(){return e()},set ref(d){e(d)}}))}),g(i,s),I()}var ea=$("<div><!></div>");function ra(i,t){V(t,!0);let e=A(t,"ref",15,null),r=Y(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=ea();let a;var n=w(s);U(n,()=>t.children??et),y(s),ie(s,o=>e(o),()=>e()),H(o=>a=kt(s,a,{class:o,...r}),[()=>it("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t.class)]),g(i,s),I()}var sa=$("<div><!></div>");function aa(i,t){V(t,!0);let e=A(t,"ref",15,null),r=Y(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=sa();let a;var n=w(s);U(n,()=>t.children??et),y(s),ie(s,o=>e(o),()=>e()),H(o=>a=kt(s,a,{class:o,...r}),[()=>it("flex flex-col space-y-1.5 text-center sm:text-left",t.class)]),g(i,s),I()}function na(i,t){V(t,!0);let e=A(t,"ref",15,null),r=Y(t,["$$slots","$$events","$$legacy","ref","class"]);var s=D(),a=S(s);const n=b(()=>it("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",t.class));j(a,()=>Wr,(o,c)=>{c(o,rt({get class(){return l(n)}},()=>r,{get ref(){return e()},set ref(d){e(d)}}))}),g(i,s),I()}var ia=$('<!> <span class="sr-only">Close</span>',1),oa=$("<!> <!>",1),la=$("<!> <!>",1);function da(i,t){V(t,!0);let e=A(t,"ref",15,null),r=Y(t,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var s=D(),a=S(s);j(a,()=>ha,(n,o)=>{o(n,rt(()=>t.portalProps,{children:(c,d)=>{var h=la(),u=S(h);j(u,()=>na,(_,m)=>{m(_,{})});var f=P(u,2);const v=b(()=>it("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] bg-background fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",t.class));j(f,()=>jr,(_,m)=>{m(_,rt({get class(){return l(v)}},()=>r,{get ref(){return e()},set ref(x){e(x)},children:(x,M)=>{var O=oa(),N=S(O);U(N,()=>t.children??et);var R=P(N,2);j(R,()=>Hr,(k,z)=>{z(k,{class:"ring-offset-background focus:ring-ring absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(L,C)=>{var lt=ia(),J=S(lt);Jr(J,{class:"size-4"}),bt(2),g(L,lt)},$$slots:{default:!0}})}),g(x,O)},$$slots:{default:!0}}))}),g(c,h)},$$slots:{default:!0}}))}),g(i,s),I()}function ca(i,t){V(t,!0);let e=A(t,"ref",15,null),r=Y(t,["$$slots","$$events","$$legacy","ref","class"]);var s=D(),a=S(s);const n=b(()=>it("text-muted-foreground text-sm",t.class));j(a,()=>Ts,(o,c)=>{c(o,rt({get class(){return l(n)}},()=>r,{get ref(){return e()},set ref(d){e(d)}}))}),g(i,s),I()}const ua=ws,ha=Qr,fa=async({dataset_id:i,tag_id:t,annotationIdsBody:e})=>{const r={data:void 0,error:void 0};try{const s=await It.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/annotations",{params:{path:{dataset_id:i,tag_id:t}},body:e});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No data");r.data=s.data}catch(s){r.error="Error assigning annotationIds to a tag: "+String(s)}return r};var va=$("<input>"),pa=$("<input>");function Rr(i,t){V(t,!0);let e=A(t,"ref",15,null),r=A(t,"value",15),s=A(t,"files",15),a=Y(t,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var n=D(),o=S(n);{var c=h=>{var u=va();er(u);let f;ie(u,v=>e(v),()=>e()),H(v=>f=kt(u,f,{class:v,type:"file",...a}),[()=>it("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)]),Zr(u,s),rr(u,r),g(h,u)},d=h=>{var u=pa();er(u);let f;ie(u,v=>e(v),()=>e()),H(v=>f=kt(u,f,{class:v,type:t.type,...a}),[()=>it("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)]),rr(u,r),g(h,u)};ht(o,h=>{t.type==="file"?h(c):h(d,!1)})}g(i,n),I()}const ga=async({dataset_id:i,tag_id:t,sampleIdsBody:e})=>{const r={data:void 0,error:void 0};try{const s=await It.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/samples",{params:{path:{dataset_id:i,tag_id:t}},body:e});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No data");r.data=s.data}catch(s){r.error="Error assigning sampleIds to tag: "+String(s)}return r},ma=async({dataset_id:i,tagInputBody:t})=>{const e={data:void 0,error:void 0};try{const r=await It.POST("/api/datasets/{dataset_id}/tags",{params:{path:{dataset_id:i}},body:t});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No data");e.data=r.data}catch(r){e.error="Error creating tag: "+String(r)}return e};function ba(i,t){V(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Vt(i,rt({name:"eraser"},()=>e,{iconNode:[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}],["path",{d:"M22 21H7"}],["path",{d:"m5 11 9 9"}]],children:(s,a)=>{var n=D(),o=S(n);U(o,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),I()}function _a(i,t){V(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Vt(i,rt({name:"plus"},()=>e,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(s,a)=>{var n=D(),o=S(n);U(o,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),I()}var xa=$("<!> Create new Tags",1),ya=$("<!> <!>",1),wa=$('<div class="flex space-x-2 py-1"><!></div>'),Sa=$('<!> <!> <div class="grid gap-4"><!></div> <div><!> <!></div> <!>',1),Pa=$('<div class="flex space-x-1"><!> <!></div> <!>',1);function Aa(i,t){V(t,!0);const[e,r]=Qt(),s=()=>nt(f,"$selectedSampleIds",e),a=()=>nt(v,"$selectedSampleAnnotationCropIds",e),n=()=>nt(l(u),"$tags",e),o=()=>nt(l(M),"$itemsSelected",e),c=()=>nt(Ct,"$submitTagAndMutate",e);let d=b(()=>t.gridType==="samples"?"sample":"annotation");const h=b(()=>$r({dataset_id:t.datasetId,kind:[l(d)]})),u=b(()=>l(h).tags),{selectedSampleIds:f,selectedSampleAnnotationCropIds:v,clearSelectedSampleAnnotationCrops:_,clearSelectedSamples:m}=Sr(),x=b(()=>t.gridType==="samples"?m:_),M=b(()=>t.gridType==="samples"?f:v);let O=xt(!1);const N=b(()=>s().size>0&&t.gridType==="samples"||a().size>0&&t.gridType==="annotations");let R=xt(""),k=xt(at([])),z=()=>{l(k).push(l(R)),C.add(l(R)),B(R,"")};const L=b(()=>[...l(k).map(E=>({tag_id:E,name:E,kind:l(d)})),...n()].filter(E=>E.name.includes(l(R))));let C=at(new Ye);const lt=E=>{C.has(E)?(C.delete(E),l(k).splice(l(k).indexOf(E),1)):C.add(E)};let J=xt(null);const ft=async()=>{await Promise.all([...l(k)].map(async E=>{var K;const Q=await ma({dataset_id:t.datasetId,tagInputBody:{name:E,description:`${E} description`,kind:l(d)}});if(Q.error)throw Q.error;return(K=Q.data)!=null&&K.tag_id&&(C.delete(E),C.add(Q.data.tag_id)),Q})),await Promise.all([...C].map(async E=>{const Q=l(d)==="sample"?await ga({dataset_id:t.datasetId,tag_id:E,sampleIdsBody:{sample_ids:[...o()]}}):await fa({dataset_id:t.datasetId,tag_id:E,annotationIdsBody:{annotation_ids:[...o()]}});if(Q.error)throw Q.error;return Q}))},vt=Tr(),Ct=Bs({mutationFn:async()=>{await ft()},onError:E=>{B(J,at(E))},onSuccess:()=>{vt.invalidateQueries({queryKey:ms({dataset_id:t.datasetId})}),l(x)(),wt(!1)}}),wt=E=>{B(O,at(E)),B(J,null),B(R,""),B(k,at([])),C.clear()},Nt=b(()=>C.size>0||l(k).length>0);var St=Pa(),pt=S(St),Zt=w(pt);const Ne=b(()=>!l(N));Lt(Zt,{variant:"outline",get disabled(){return l(Ne)},class:"flex-1",onclick:()=>B(O,!0),children:(E,Q)=>{var K=xa(),gt=S(K);_a(gt,{}),bt(),g(E,K)},$$slots:{default:!0}});var te=P(Zt,2);const Re=b(()=>!l(N));Lt(te,{variant:"outline",get disabled(){return l(Re)},size:"icon",title:"Clear selection",get onclick(){return l(x)},children:(E,Q)=>{ba(E,{})},$$slots:{default:!0}}),y(pt);var ee=P(pt,2);j(ee,()=>ua,(E,Q)=>{Q(E,{onOpenChange:wt,get open(){return l(O)},children:(K,gt)=>{var mt=D(),Rt=S(mt);j(Rt,()=>da,(Yt,De)=>{De(Yt,{class:"sm:max-w-[425px]",children:(Bt,Ga)=>{var je=Sa(),He=S(je);j(He,()=>aa,(G,st)=>{st(G,{children:(dt,Et)=>{var ct=ya(),Dt=S(ct);j(Dt,()=>ta,(Mt,Ut)=>{Ut(Mt,{children:(re,Le)=>{bt();var Gt=Wt();H(()=>ut(Gt,`Add the selected ${l(d)??""} to a tag`)),g(re,Gt)},$$slots:{default:!0}})});var Fe=P(Dt,2);j(Fe,()=>ca,(Mt,Ut)=>{Ut(Mt,{children:(re,Le)=>{bt();var Gt=Wt();H(()=>ut(Gt,`Add the selected ${o().size??""}
                ${l(d)??""} to an new or existing tag. Tags can later be exported.`)),g(re,Gt)},$$slots:{default:!0}})}),g(dt,ct)},$$slots:{default:!0}})});var Je=P(He,2);{var Or=G=>{hs(G,{title:"Error occured",children:(st,dt)=>{bt();var Et=Wt();H(()=>ut(Et,l(J))),g(st,Et)}})};ht(Je,G=>{l(J)&&G(Or)})}var Oe=P(Je,2),zr=w(Oe);Rr(zr,{type:"text",placeholder:"Create or search tags",autofocus:!0,get value(){return l(R)},set value(G){B(R,at(G))}}),y(Oe);var ze=P(Oe,2),Qe=w(ze);Ve(Qe,17,()=>l(L),G=>G.tag_id,(G,st)=>{var dt=wa(),Et=w(dt);const ct=b(()=>`tagCreateDialog-tag-${l(st).tag_id}`),Dt=b(()=>C.has(l(st).tag_id));kr(Et,{get name(){return l(ct)},get isChecked(){return l(Dt)},get label(){return l(st).name},onCheckedChange:()=>lt(l(st).tag_id)}),y(dt),g(G,dt)});var Fr=P(Qe,2);{var Lr=G=>{const st=b(()=>it("",...ts({variant:"outline"})));Lt(G,{type:"button",variant:"outline",get class(){return l(st)},onclick:z,children:(dt,Et)=>{bt();var ct=Wt();H(()=>ut(ct,`Create tag "${l(R)??""}"`)),g(dt,ct)},$$slots:{default:!0}})};ht(Fr,G=>{l(R)&&G(Lr)})}y(ze);var qr=P(ze,2);j(qr,()=>ra,(G,st)=>{st(G,{children:(dt,Et)=>{var ct=D(),Dt=S(ct);{var Fe=Mt=>{Lt(Mt,{type:"submit",onclick:()=>c().mutate(),children:(Ut,re)=>{bt();var Le=Wt("Save changes");g(Ut,Le)},$$slots:{default:!0}})};ht(Dt,Mt=>{l(Nt)&&Mt(Fe)})}g(dt,ct)},$$slots:{default:!0}})}),g(Bt,je)},$$slots:{default:!0}})}),g(K,mt)},$$slots:{default:!0}})}),g(i,St),I(),r()}var Ta=$(`<span class="bg-secondary relative grow overflow-hidden rounded-full data-[orientation='horizontal']:h-2 data-[orientation='vertical']:h-full data-[orientation='horizontal']:w-full data-[orientation='vertical']:w-2"><!></span> <!>`,1);function Ue(i,t){V(t,!0);let e=A(t,"ref",15,null),r=A(t,"value",15),s=A(t,"orientation",3,"horizontal"),a=Y(t,["$$slots","$$events","$$legacy","ref","value","orientation","class"]);var n=D(),o=S(n);const c=b(()=>it("relative flex touch-none select-none items-center data-[orientation='vertical']:h-full data-[orientation='vertical']:min-h-44 data-[orientation='horizontal']:w-full data-[orientation='vertical']:w-auto data-[orientation='vertical']:flex-col",t.class));j(o,()=>Fs,(d,h)=>{h(d,rt({get orientation(){return s()},get class(){return l(c)}},()=>a,{get ref(){return e()},set ref(f){e(f)},get value(){return r()},set value(f){r(f)},children:(f,v)=>{let _=()=>v==null?void 0:v().thumbs;var m=Ta(),x=S(m),M=w(x);j(M,()=>qs,(N,R)=>{R(N,{class:"bg-primary absolute data-[orientation='horizontal']:h-full data-[orientation='vertical']:w-full"})}),y(x);var O=P(x,2);Ve(O,17,_,es,(N,R)=>{var k=D(),z=S(k);j(z,()=>Xs,(L,C)=>{C(L,{get index(){return l(R)},class:"border-primary bg-background ring-offset-background focus-visible:ring-ring block size-5 rounded-full border-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})}),g(N,k)}),H(()=>wr(x,"data-orientation",s())),g(f,m)},$$slots:{default:!0}}))}),g(i,n),I()}function $a(i,t){V(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Vt(i,rt({name:"component"},()=>e,{iconNode:[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}]],children:(s,a)=>{var n=D(),o=S(n);U(o,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),I()}function ka(i,t){V(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Vt(i,rt({name:"grid-3x3"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]],children:(s,a)=>{var n=D(),o=S(n);U(o,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),I()}function Dr(i,t){V(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Vt(i,rt({name:"image"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(s,a)=>{var n=D(),o=S(n);U(o,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),I()}function Ca(i,t){V(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Vt(i,rt({name:"search"},()=>e,{iconNode:[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]],children:(s,a)=>{var n=D(),o=S(n);U(o,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),I()}function Ea(i,t){V(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Vt(i,rt({name:"sliders-horizontal"},()=>e,{iconNode:[["line",{x1:"21",x2:"14",y1:"4",y2:"4"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22"}]],children:(s,a)=>{var n=D(),o=S(n);U(o,()=>t.children??et),g(s,n)},$$slots:{default:!0}})),I()}var Ma=$('<div class="w-300 flex space-x-4 text-diffuse-foreground"><!> <!> <!></div>');function Va(i,t){V(t,!0);const e=A(t,"min",3,100),r=A(t,"max",3,1500),s=rs.throttle(h=>{t.onChange(h[0])},100);var a=Ma(),n=w(a);ka(n,{class:"h-6 w-6"});var o=P(n,2);const c=b(()=>[t.width]);Ue(o,{class:"w-full flex-1",get value(){return l(c)},get min(){return e()},get max(){return r()},step:1,onValueChange:s});var d=P(o,2);Dr(d,{class:"h-6 w-6"}),y(a),g(i,a),I()}var Ia=$('<div class="space-y-4"><div class="space-y-1"><h2 class="text-md">Width Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div> <div class="space-y-1"><h2 class="text-md">Height Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div></div>');function Na(i,t){V(t,!0);const[e,r]=Qt(),s=()=>nt(t.dimensions,"$dimensions",e),{min_width:a,max_width:n,min_height:o,max_height:c}=s(),d=u=>{t.onChange({min_width:u[0],max_width:u[1],min_height:o,max_height:c})},h=u=>{t.onChange({min_width:a,max_width:n,min_height:u[0],max_height:u[1]})};Ie(i,{title:"Metadata",children:(u,f)=>{var v=Ia(),_=w(v),m=P(w(_),2),x=w(m),M=w(x);y(x);var O=P(x,2),N=w(O);y(O),y(m);var R=P(m,2),k=w(R);Ue(k,{type:"multiple",class:"filter-width",min:a,max:n,value:[a,n],onValueChange:d}),y(R),y(_);var z=P(_,2),L=P(w(z),2),C=w(L),lt=w(C);y(C);var J=P(C,2),ft=w(J);y(J),y(L);var vt=P(L,2),Ct=w(vt);Ue(Ct,{type:"multiple",class:"filter-height",min:o,max:c,value:[o,c],onValueChange:h}),y(vt),y(z),y(v),H((wt,Nt,St,pt)=>{ut(M,`${wt??""}px`),ut(N,`${Nt??""}px`),ut(lt,`${St??""}px`),ut(ft,`${pt??""}px`)},[()=>qt(s().min_width),()=>qt(s().max_width),()=>qt(s().min_height),()=>qt(s().max_height)]),g(u,v)},$$slots:{default:!0}}),I(),r()}var Ra=$("<!> Samples",1),Da=$("<!> Annotations",1),Oa=$('<div class="mb-5 mt-2 text-lg font-semibold">Collections</div> <!> <div class="flex space-x-2"><!> <!></div>',1);function za(i,t){V(t,!0);var e=Oa(),r=P(S(e),2);Pr(r,{class:"mb-4 bg-border-hard"});var s=P(r,2),a=w(s);const n=b(()=>it("flex-1","px-2",t.gridType=="samples"&&"inline-flex rounded-md bg-muted")),o=b(()=>ne.toSamples(t.datasetId));Lt(a,{variant:"ghost",get class(){return l(n)},get href(){return l(o)},"data-sveltekit-noscroll":!0,children:(u,f)=>{var v=Ra(),_=S(v);Dr(_,{class:"size-4"}),bt(),g(u,v)},$$slots:{default:!0}});var c=P(a,2);const d=b(()=>it("flex-1","px-2",t.gridType=="annotations"&&"inline-flex rounded-md bg-muted")),h=b(()=>ne.toAnnotations(t.datasetId));Lt(c,{get class(){return l(d)},variant:"ghost",get href(){return l(h)},"data-sveltekit-noscroll":!0,children:(u,f)=>{var v=Da(),_=S(v);$a(_,{class:"size-4"}),bt(),g(u,v)},$$slots:{default:!0}}),y(s),g(i,e),I()}function Fa(){const i=Ft({width:200,height:200});return{sampleSize:i,updateWidth:e=>{i.set({width:e,height:e})}}}const or=async({dataset_id:i,filtered_labels:t,dimensions:e})=>{const r={data:[],error:void 0};try{const s=await It.GET("/api/annotations/count",{params:{query:{dataset_id:i,...t&&{filtered_labels:t},...(e==null?void 0:e.min_width)&&{min_width:e.min_width},...(e==null?void 0:e.max_width)&&{max_width:e.max_width},...(e==null?void 0:e.min_height)&&{min_height:e.min_height},...(e==null?void 0:e.max_height)&&{max_height:e.max_height}}}});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No annotation counts found");r.data=s.data.map(a=>({label_name:a.label_name,total_count:a.total_count,current_count:a.current_count}))}catch(s){console.error("Error loading annotation counts:",s),r.error="Error loading annotation counts: "+String(s)}return r},La=async()=>{const i={data:[],error:void 0};try{const t=await It.GET("/api/annotation_labels");t.data&&(i.data=t.data)}catch(t){i.error="Error loading annotation labels: "+String(t)}return i},qa=async({dataset_id:i,annotation_labels:t})=>{const e={data:void 0,error:void 0};try{const r=await It.GET("/api/samples/dimensions",{params:{query:{dataset_id:i,annotation_labels:t}}});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No dimension bounds data");e.data=r.data}catch(r){e.error="Error loading dimension bounds: "+String(r)}return e},lr=(i,t)=>i.map(e=>({...e,selected:t.includes(e.label_name)})),dr=i=>t=>t.includes(i)?t.filter(e=>e!==i):[...t,i],Ka=async({params:{dataset_id:i}})=>{const{data:t,error:e}=await ls(i);if(e||!t)throw ds(307,ne.toHome());const r=Ft({min_width:0,max_width:0,min_height:0,max_height:0}),{selectedAnnotationFilterIds:s}=Sr(),a=Array.from(zt(s)),n=Ft([]),o=Ft(a),c=Ft([]),d=Ft(void 0),h=m=>{d.set(m)},[u]=await Promise.all([La().then(m=>{const x=m.data.reduce((O,N)=>({...O,[N.annotation_label_name]:N.annotation_label_id}),{}),M=Object.entries(x).filter(([,O])=>a.includes(O)).map(([O])=>O);return n.set(M),x}),qa({dataset_id:i}).then(({data:m})=>{m&&r.set(m)}),or({dataset_id:i}).then(({data:m})=>{if(m){const x=zt(n);c.set(lr(m,x))}})]),f=async()=>{try{const m=zt(n),{data:x}=await or({dataset_id:i,filtered_labels:m.length>0?m:void 0,dimensions:zt(r)});x&&c.update(()=>lr(x||[],m))}catch(m){d.set(`Failed to load annotations: ${String(m)}`)}},v=m=>{m&&(r.set(m),f())};return{datasetId:i,annotationFilters:c,toggleAnnotationFilterSelection:m=>{n.update(dr(m));const x=u[m];s.update(M=>(M.has(x)?M.delete(x):M.add(x),M)),o.update(dr(x)),f()},annotationFilterLabels:u,selectedAnnotationFilter:n,selectedAnnotationFilterIds:o,dimensions:is(r),updateDimensions:v,error:zt(d),setError:h,sampleSize:Fa()}},cn=Object.freeze(Object.defineProperty({__proto__:null,load:Ka},Symbol.toStringTag,{value:"Module"})),Xa=async({query_text:i="",model_id:t=""})=>{const e={data:[],error:void 0};try{const r=await It.GET("/api/text_embedding/embed_text",{params:{query:{query_text:i,model_id:t}}});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No data");e.data=r.data}catch(r){e.error="Error creating text embedding: "+String(r)}return e};var Ya=$('<div class="space-y-2"><!> <!></div>'),Ba=$('<div class="relative"><!> <!></div>'),Ua=$('<div class="flex h-full w-full space-x-4 px-4 pb-4"><div class="flex w-80 flex-col space-y-6 rounded-[1vw] bg-card py-4"><div class="px-4"><!></div> <div class="min-h-0 flex-1 space-y-2 overflow-y-auto px-4 dark:[color-scheme:dark]"><div><!> <!></div> <!></div></div> <div class="flex1 flex flex-grow flex-col space-y-4 rounded-[1vw] bg-card p-4"><div class="my-2 flex items-center space-x-4"><div class="flex-1"><!></div> <div class="w-4/12"><!></div></div> <!> <div class="flex min-h-0 flex-1"><!></div></div></div>');function un(i,t){V(t,!0);const[e,r]=Qt(),s=()=>nt(cs,"$page",e),a=()=>nt(m,"$textEmbedding",e),n=()=>nt(O,"$bonndedSampleSize",e);let o=s().params.dataset_id;const{dimensions:c,updateDimensions:d,annotationFilters:h,toggleAnnotationFilterSelection:u,sampleSize:f,setError:v,globalStorage:{setTextEmbedding:_,textEmbedding:m,setLastGridType:x}}=t.data;let M=xt("samples");os(()=>{B(M,at(s().url.pathname===ne.toAnnotations(o)?"annotations":"samples")),x(l(M))});const O=f.sampleSize;let N=xt(at(a()?a().queryText:""));async function R(){if(l(N).trim()!=="")try{return(await Xa({query_text:l(N),model_id:void 0})).data}catch(K){v(K.message),console.error("Error during API call:",K)}}async function k(K){if(K.key==="Enter"){const gt=await R();_({queryText:l(N),embedding:gt})}}var z=Ua(),L=w(z),C=w(L),lt=w(C);za(lt,{datasetId:o,get gridType(){return l(M)}}),y(C);var J=P(C,2),ft=w(J),vt=w(ft);js(vt,{dataset_id:o,get gridType(){return l(M)}});var Ct=P(vt,2);Aa(Ct,{datasetId:o,get gridType(){return l(M)}}),y(ft);var wt=P(ft,2);Ie(wt,{title:"Filters",icon:Ea,children:(K,gt)=>{var mt=Ya(),Rt=w(mt);Zs(Rt,{annotationFilters:h,onToggleAnnotationFilter:u});var Yt=P(Rt,2);{var De=Bt=>{Na(Bt,{dimensions:c,onChange:d})};ht(Yt,Bt=>{c&&Bt(De)})}y(mt),g(K,mt)}}),y(J),y(L);var Nt=P(L,2),St=w(Nt),pt=w(St),Zt=w(pt);{var Ne=K=>{var gt=Ba(),mt=w(gt);Ca(mt,{class:"absolute left-2 top-[50%] h-4 w-4 translate-y-[-50%] text-muted-foreground"});var Rt=P(mt,2);Rr(Rt,{placeholder:"Search",class:"pl-8",onkeydown:k,get value(){return l(N)},set value(Yt){B(N,at(Yt))}}),y(gt),g(K,gt)};ht(Zt,K=>{l(M)==="samples"&&K(Ne)})}y(pt);var te=P(pt,2),Re=w(te);Va(Re,{get width(){return n().width},get onChange(){return f.updateWidth}}),y(te),y(St);var ee=P(St,2);Pr(ee,{class:"mb-4 bg-border-hard"});var E=P(ee,2),Q=w(E);ss(Q,t,"default",{},null),y(E),y(Nt),y(z),g(i,z),I(),r()}export{un as component,cn as universal};
