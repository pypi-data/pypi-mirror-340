import{bJ as Jt,_ as Z,bK as Yt,v as z,m as V,w as le,q as E,s as st,z as He,A as ot,bL as Je,L as Ye,l as ue,a as i,H as Xt,n as Zt,r as J,bM as ea,g as K,p as R,b as Y,aQ as de,aP as ta,aO as aa,bm as Pe,aR as be,d as he,bc as la,c as k,b4 as fe,t as T,u as ee,aT as na,J as ra,K as j,b6 as Xe,aV as Ze,aS as Ge,bN as it,b5 as Oe,i as ne,aU as re,bO as sa,f as N,bg as oa,bP as ia,bQ as ua,bB as Le,bC as ut,bR as ye,bS as ve,bo as je,F as X,x as et,aa as me,bT as Ne,bU as ge,bV as dt,o as da,V as ca,y as ct,a5 as fa,bW as va,k as tt}from"./main-JUy8mnXG.js";import{V as M,w as ma,d as ga,F as ba,j as ha,x as ya,e as pa,A as xa,H as Sa,D as wa,c as Pa,L as ka,k as at}from"./forwardRefs-BxFNqo8E.js";import{S as _a,V as Da}from"./VForm-DXrmSq46.js";import{useAdminStore as ft}from"./admin-BpE7-fB4.js";import{V as Ia}from"./VDialog-CoOMSEbM.js";import{d as vt,c as Me,f as Ta,g as Va,h as Ca}from"./VSelect-BpkoCPsm.js";import{V as ze}from"./VCheckboxBtn-D8jQ_2In.js";import{m as Ba,V as pe}from"./VTable-DbFt9lJE.js";import{m as mt,u as gt}from"./filter-D-aPctKp.js";import{a as Ra}from"./VDivider-BXrVdmrm.js";import{C as Fa}from"./confirm-dialog-BRUkbajJ.js";function lt(e,l,a){return Object.keys(e).filter(t=>Jt(t)&&t.endsWith(l)).reduce((t,n)=>(t[n.slice(0,-l.length)]=r=>e[n](r,a(r)),t),{})}const Aa={name:"AdminCreateUpdateButton",props:{update:{type:Boolean,default:!1},table:{type:String,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{mdiPencil:Yt}}};function $a(e,l,a,t,n,r){return a.update?(E(),z(M,V({key:0,icon:n.mdiPencil},e.$attrs,{size:a.size,density:a.density}),null,16,["icon","size","density"])):(E(),z(M,V({key:1},e.$attrs,{size:a.size,density:a.density}),{default:le(()=>[st("span",null,"+ "+He(a.table),1)]),_:1},16,["size","density"]))}const Oa=Z(Aa,[["render",$a]]),La={name:"AdminCreateUpdateDialog",components:{AdminCreateUpdateButton:Oa,SubmitFooter:_a},props:{table:{type:String,required:!0},label:{type:String,default:""},oldRow:{type:[Object,Boolean],default:!1},inputs:{type:Object,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{row:{},showDialog:!1,submitButtonEnabled:!1}},computed:{verb(){return this.oldRow?"Update":"Add"},title(){return this.label||this.table},buttonTitle(){return(this.oldRow?"Edit":"Add")+" "+this.title}},watch:{showDialog(e){this.row=this.getRow(e)}},methods:{...ot(ft,["createRow","updateRow"]),validate(){let e=!1;for(const[a,t]of Object.entries(this.row))if(!Je(this.oldRow[a],t)){e=!0;break}if(!e)return!1;const l=this.$refs.form;return l?l.validate().then(({valid:a})=>a).catch(()=>!1):!1},change(e){this.row=e,this.submitButtonEnabled=this.validate()},getRow(e){if(!e||!this.oldRow)return Ye(this.inputs.EMPTY_ROW);const l={};for(const a of this.inputs.UPDATE_KEYS)l[a]=Ye(this.oldRow[a]);return l},doUpdate:function(){const e={};for(const[l,a]of Object.entries(this.row))Je(this.oldRow[l],a)||(e[l]=a);this.updateRow(this.table,this.oldRow.pk,e).then(()=>(this.showDialog=!1,!0)).catch(console.error)},doCreate:function(){this.createRow(this.table,this.row).then(()=>(this.showDialog=!1,!0)).catch(console.error)},submit:function(){const e=this.$refs.form;e&&e.validate().then(({valid:l})=>{if(l)return this.oldRow?this.doUpdate():this.doCreate()}).catch(console.warn)}}};function Na(e,l,a,t,n,r){const o=ue("AdminCreateUpdateButton"),s=ue("SubmitFooter");return E(),z(Ia,V({modelValue:n.showDialog,"onUpdate:modelValue":l[1]||(l[1]=c=>n.showDialog=c),transition:"scale-transition"},e.$attrs),{activator:le(({props:c})=>[i(o,V({update:!!a.oldRow,table:a.table,label:a.label},c,{size:a.size,density:a.density,title:r.buttonTitle}),null,16,["update","table","label","size","density","title"])]),default:le(()=>[i(Da,{ref:"form",class:"cuForm"},{default:le(()=>[st("h2",null,He(r.title),1),(E(),z(Xt(a.inputs),{"old-row":a.oldRow,onChange:r.change},null,40,["old-row","onChange"])),i(s,{verb:r.verb,table:a.table,label:a.label,disabled:!n.submitButtonEnabled,onSubmit:r.submit,onCancel:l[0]||(l[0]=c=>n.showDialog=!1)},null,8,["verb","table","label","disabled","onSubmit"])]),_:1},512)]),_:1},16,["modelValue"])}const Al=Z(La,[["render",Na],["__scopeId","data-v-b61575f9"]]),Ea={name:"GroupChip",props:{titleKey:{type:String,default:""},groupType:{type:Boolean,default:void 0},item:{type:Object,default:void 0}},computed:{classes(){let e={};return this.groupType&&this.item&&(e.include=!this.item.exclude,e.exclude=this.item.exclude),e},text(){return this.item&&this.titleKey?this.item[this.titleKey]:""},value(){if(this.item)return this.groupType?this.item.exclude:this.item.value}}};function Ha(e,l,a,t,n,r){return E(),z(vt,{class:Zt(r.classes),text:r.text,value:r.value},null,8,["class","text","value"])}const bt=Z(Ea,[["render",Ha],["__scopeId","data-v-fe7786ef"]]),Ga={name:"AdminRelationPicker",components:{GroupChip:bt},props:{objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{vuetifyItems(){const e=[];for(const l of this.objs)e.push({...l,value:l.pk,title:l[this.titleKey]});return e}}};function ja(e,l,a,t,n,r){const o=ue("GroupChip");return E(),z(Me,V({chips:!0,"closable-chips":!0,density:"compact",multiple:!0,items:r.vuetifyItems},e.$attrs),{chip:le(({item:s})=>[i(o,{"title-key":"title",item:s,"group-type":a.groupType},null,8,["item","group-type"])]),_:1},16,["items"])}const $l=Z(Ga,[["render",ja]]);function Ma(){const e=J([]);ea(()=>e.value=[]);function l(a,t){e.value[t]=a}return{refs:e,updateRef:l}}const za=R({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:j,default:"$first"},prevIcon:{type:j,default:"$prev"},nextIcon:{type:j,default:"$next"},lastIcon:{type:j,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...xa(),...ra(),...pa(),...ya(),...ha(),...ba(),...ga({tag:"nav"}),...na(),...ma({variant:"text"})},"VPagination"),nt=K()({name:"VPagination",props:za(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,l){let{slots:a,emit:t}=l;const n=Y(e,"modelValue"),{t:r,n:o}=de(),{isRtl:s}=ta(),{themeClasses:c}=aa(e),{width:f}=Pe(),m=be(-1);he(void 0,{scoped:!0});const{resizeRef:y}=la(b=>{if(!b.length)return;const{target:d,contentRect:w}=b[0],P=d.querySelector(".v-pagination__list > *");if(!P)return;const I=w.width,B=P.offsetWidth+parseFloat(getComputedStyle(P).marginRight)*2;m.value=x(I,B)}),v=k(()=>parseInt(e.length,10)),p=k(()=>parseInt(e.start,10)),h=k(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):m.value>=0?m.value:x(f.value,58));function x(b,d){const w=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((b-d*w)/d).toFixed(2))))}const g=k(()=>{if(v.value<=0||isNaN(v.value)||v.value>Number.MAX_SAFE_INTEGER)return[];if(h.value<=0)return[];if(h.value===1)return[n.value];if(v.value<=h.value)return fe(v.value,p.value);const b=h.value%2===0,d=b?h.value/2:Math.floor(h.value/2),w=b?d:d+1,P=v.value-d;if(w-n.value>=0)return[...fe(Math.max(1,h.value-1),p.value),e.ellipsis,v.value];if(n.value-P>=(b?1:0)){const I=h.value-1,B=v.value-I+p.value;return[p.value,e.ellipsis,...fe(I,B)]}else{const I=Math.max(1,h.value-2),B=I===1?n.value:n.value-Math.ceil(I/2)+p.value;return[p.value,e.ellipsis,...fe(I,B),e.ellipsis,v.value]}});function D(b,d,w){b.preventDefault(),n.value=d,w&&t(w,d)}const{refs:u,updateRef:_}=Ma();he({VPaginationBtn:{color:T(e,"color"),border:T(e,"border"),density:T(e,"density"),size:T(e,"size"),variant:T(e,"variant"),rounded:T(e,"rounded"),elevation:T(e,"elevation")}});const C=k(()=>g.value.map((b,d)=>{const w=P=>_(P,d);if(typeof b=="string")return{isActive:!1,key:`ellipsis-${d}`,page:b,props:{ref:w,ellipsis:!0,icon:!0,disabled:!0}};{const P=b===n.value;return{isActive:P,key:b,page:o(b),props:{ref:w,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:P?e.activeColor:e.color,"aria-current":P,"aria-label":r(P?e.currentPageAriaLabel:e.pageAriaLabel,b),onClick:I=>D(I,b)}}}})),S=k(()=>{const b=!!e.disabled||n.value<=p.value,d=!!e.disabled||n.value>=p.value+v.value-1;return{first:e.showFirstLastPage?{icon:s.value?e.lastIcon:e.firstIcon,onClick:w=>D(w,p.value,"first"),disabled:b,"aria-label":r(e.firstAriaLabel),"aria-disabled":b}:void 0,prev:{icon:s.value?e.nextIcon:e.prevIcon,onClick:w=>D(w,n.value-1,"prev"),disabled:b,"aria-label":r(e.previousAriaLabel),"aria-disabled":b},next:{icon:s.value?e.prevIcon:e.nextIcon,onClick:w=>D(w,n.value+1,"next"),disabled:d,"aria-label":r(e.nextAriaLabel),"aria-disabled":d},last:e.showFirstLastPage?{icon:s.value?e.firstIcon:e.lastIcon,onClick:w=>D(w,p.value+v.value-1,"last"),disabled:d,"aria-label":r(e.lastAriaLabel),"aria-disabled":d}:void 0}});function F(){var d;const b=n.value-p.value;(d=u.value[b])==null||d.$el.focus()}function O(b){b.key===Xe.left&&!e.disabled&&n.value>Number(e.start)?(n.value=n.value-1,Ze(F)):b.key===Xe.right&&!e.disabled&&n.value<p.value+v.value-1&&(n.value=n.value+1,Ze(F))}return ee(()=>i(e.tag,{ref:y,class:["v-pagination",c.value,e.class],style:e.style,role:"navigation","aria-label":r(e.ariaLabel),onKeydown:O,"data-test":"v-pagination-root"},{default:()=>[i("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&i("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[a.first?a.first(S.value.first):i(M,V({_as:"VPaginationBtn"},S.value.first),null)]),i("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[a.prev?a.prev(S.value.prev):i(M,V({_as:"VPaginationBtn"},S.value.prev),null)]),C.value.map((b,d)=>i("li",{key:b.key,class:["v-pagination__item",{"v-pagination__item--is-active":b.isActive}],"data-test":"v-pagination-item"},[a.item?a.item(b):i(M,V({_as:"VPaginationBtn"},b.props),{default:()=>[b.page]})])),i("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[a.next?a.next(S.value.next):i(M,V({_as:"VPaginationBtn"},S.value.next),null)]),e.showFirstLastPage&&i("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[a.last?a.last(S.value.last):i(M,V({_as:"VPaginationBtn"},S.value.last),null)])])]})),{}}}),qa=R({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),ht=Symbol.for("vuetify:data-table-pagination");function Ua(e){const l=Y(e,"page",void 0,t=>Number(t??1)),a=Y(e,"itemsPerPage",void 0,t=>Number(t??10));return{page:l,itemsPerPage:a}}function Ka(e){const{page:l,itemsPerPage:a,itemsLength:t}=e,n=k(()=>a.value===-1?0:a.value*(l.value-1)),r=k(()=>a.value===-1?t.value:Math.min(t.value,n.value+a.value)),o=k(()=>a.value===-1||t.value===0?1:Math.ceil(t.value/a.value));Ge([l,o],()=>{l.value>o.value&&(l.value=o.value)});function s(v){a.value=v,l.value=1}function c(){l.value=Oe(l.value+1,1,o.value)}function f(){l.value=Oe(l.value-1,1,o.value)}function m(v){l.value=Oe(v,1,o.value)}const y={page:l,itemsPerPage:a,startIndex:n,stopIndex:r,pageCount:o,itemsLength:t,nextPage:c,prevPage:f,setPage:m,setItemsPerPage:s};return re(ht,y),y}function Wa(){const e=ne(ht);if(!e)throw new Error("Missing pagination!");return e}function Qa(e){const l=it("usePaginatedItems"),{items:a,startIndex:t,stopIndex:n,itemsPerPage:r}=e,o=k(()=>r.value<=0?a.value:a.value.slice(t.value,n.value));return Ge(o,s=>{l.emit("update:currentItems",s)},{immediate:!0}),{paginatedItems:o}}const yt=R({prevIcon:{type:j,default:"$prev"},nextIcon:{type:j,default:"$next"},firstIcon:{type:j,default:"$first"},lastIcon:{type:j,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),rt=K()({name:"VDataTableFooter",props:yt(),setup(e,l){let{slots:a}=l;const{t}=de(),{page:n,pageCount:r,startIndex:o,stopIndex:s,itemsLength:c,itemsPerPage:f,setItemsPerPage:m}=Wa(),y=k(()=>e.itemsPerPageOptions.map(v=>typeof v=="number"?{value:v,title:v===-1?t("$vuetify.dataFooter.itemsPerPageAll"):String(v)}:{...v,title:isNaN(Number(v.title))?t(v.title):v.title}));return ee(()=>{var p;const v=nt.filterProps(e);return i("div",{class:"v-data-table-footer"},[(p=a.prepend)==null?void 0:p.call(a),i("div",{class:"v-data-table-footer__items-per-page"},[i("span",null,[t(e.itemsPerPageText)]),i(Me,{items:y.value,modelValue:f.value,"onUpdate:modelValue":h=>m(Number(h)),density:"compact",variant:"outlined","hide-details":!0},null)]),i("div",{class:"v-data-table-footer__info"},[i("div",null,[t(e.pageText,c.value?o.value+1:0,s.value,c.value)])]),i("div",{class:"v-data-table-footer__pagination"},[i(nt,V({modelValue:n.value,"onUpdate:modelValue":h=>n.value=h,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:r.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},v),null)])])}),{}}}),xe=sa({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,l)=>{let{slots:a}=l;const t=e.tag??"td";return i(t,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:N(e.height),width:N(e.width),maxWidth:N(e.maxWidth),left:N(e.fixedOffset||null)}},{default:()=>{var n;return[(n=a.default)==null?void 0:n.call(a)]}})}),Ja=R({headers:Array},"DataTable-header"),pt=Symbol.for("vuetify:data-table-headers"),xt={title:"",sortable:!1},Ya={...xt,width:48};function Xa(){const l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(a=>({element:a,priority:0}));return{enqueue:(a,t)=>{let n=!1;for(let r=0;r<l.length;r++)if(l[r].priority>t){l.splice(r,0,{element:a,priority:t}),n=!0;break}n||l.push({element:a,priority:t})},size:()=>l.length,count:()=>{let a=0;if(!l.length)return 0;const t=Math.floor(l[0].priority);for(let n=0;n<l.length;n++)Math.floor(l[n].priority)===t&&(a+=1);return a},dequeue:()=>l.shift()}}function Ee(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)l.push(e);else for(const a of e.children)Ee(a,l);return l}function St(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const a of e)a.key&&l.add(a.key),a.children&&St(a.children,l);return l}function Za(e){if(e.key){if(e.key==="data-table-group")return xt;if(["data-table-expand","data-table-select"].includes(e.key))return Ya}}function qe(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(l,...e.children.map(a=>qe(a,l+1))):l}function el(e){let l=!1;function a(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r)if(o&&(r.fixed=!0),r.fixed)if(r.children)for(let s=r.children.length-1;s>=0;s--)a(r.children[s],!0);else l?isNaN(Number(r.width))?ua(`Multiple fixed columns should have a static width (key: ${r.key})`):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0):r.lastFixed=!0,l=!0;else if(r.children)for(let s=r.children.length-1;s>=0;s--)a(r.children[s]);else l=!1}for(let r=e.length-1;r>=0;r--)a(e[r]);function t(r){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!r)return o;if(r.children){r.fixedOffset=o;for(const s of r.children)o=t(s,o)}else r.fixed&&(r.fixedOffset=o,o+=parseFloat(r.width||"0")||0);return o}let n=0;for(const r of e)n=t(r,n)}function tl(e,l){const a=[];let t=0;const n=Xa(e);for(;n.size()>0;){let o=n.count();const s=[];let c=1;for(;o>0;){const{element:f,priority:m}=n.dequeue(),y=l-t-qe(f);if(s.push({...f,rowspan:y??1,colspan:f.children?Ee(f).length:1}),f.children)for(const v of f.children){const p=m%1+c/Math.pow(10,t+2);n.enqueue(v,t+y+p)}c+=1,o-=1}t+=1,a.push(s)}return{columns:e.map(o=>Ee(o)).flat(),headers:a}}function wt(e){const l=[];for(const a of e){const t={...Za(a),...a},n=t.key??(typeof t.value=="string"?t.value:null),r=t.value??n??null,o={...t,key:n,value:r,sortable:t.sortable??(t.key!=null||!!t.sort),children:t.children?wt(t.children):void 0};l.push(o)}return l}function Pt(e,l){const a=J([]),t=J([]),n=J({}),r=J({}),o=J({});oa(()=>{var x,g,D;const f=(e.headers||Object.keys(e.items[0]??{}).map(u=>({key:u,title:ia(u)}))).slice(),m=St(f);(x=l==null?void 0:l.groupBy)!=null&&x.value.length&&!m.has("data-table-group")&&f.unshift({key:"data-table-group",title:"Group"}),(g=l==null?void 0:l.showSelect)!=null&&g.value&&!m.has("data-table-select")&&f.unshift({key:"data-table-select"}),(D=l==null?void 0:l.showExpand)!=null&&D.value&&!m.has("data-table-expand")&&f.push({key:"data-table-expand"});const y=wt(f);el(y);const v=Math.max(...y.map(u=>qe(u)))+1,p=tl(y,v);a.value=p.headers,t.value=p.columns;const h=p.headers.flat(1);for(const u of h)u.key&&(u.sortable&&(u.sort&&(n.value[u.key]=u.sort),u.sortRaw&&(r.value[u.key]=u.sortRaw)),u.filter&&(o.value[u.key]=u.filter))});const s={headers:a,columns:t,sortFunctions:n,sortRawFunctions:r,filterFunctions:o};return re(pt,s),s}function ke(){const e=ne(pt);if(!e)throw new Error("Missing headers!");return e}const al={showSelectAll:!1,allSelected:()=>[],select:e=>{var t;let{items:l,value:a}=e;return new Set(a?[(t=l[0])==null?void 0:t.value]:[])},selectAll:e=>{let{selected:l}=e;return l}},kt={showSelectAll:!0,allSelected:e=>{let{currentPage:l}=e;return l},select:e=>{let{items:l,value:a,selected:t}=e;for(const n of l)a?t.add(n.value):t.delete(n.value);return t},selectAll:e=>{let{value:l,currentPage:a,selected:t}=e;return kt.select({items:a,value:l,selected:t})}},_t={showSelectAll:!0,allSelected:e=>{let{allItems:l}=e;return l},select:e=>{let{items:l,value:a,selected:t}=e;for(const n of l)a?t.add(n.value):t.delete(n.value);return t},selectAll:e=>{let{value:l,allItems:a,selected:t}=e;return _t.select({items:a,value:l,selected:t})}},ll=R({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:ut}},"DataTable-select"),Dt=Symbol.for("vuetify:data-table-selection");function It(e,l){let{allItems:a,currentPage:t}=l;const n=Y(e,"modelValue",e.modelValue,u=>new Set(Le(u).map(_=>{var C;return((C=a.value.find(S=>e.valueComparator(_,S.value)))==null?void 0:C.value)??_})),u=>[...u.values()]),r=k(()=>a.value.filter(u=>u.selectable)),o=k(()=>t.value.filter(u=>u.selectable)),s=k(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return al;case"all":return _t;case"page":default:return kt}}),c=be(null);function f(u){return Le(u).every(_=>n.value.has(_.value))}function m(u){return Le(u).some(_=>n.value.has(_.value))}function y(u,_){const C=s.value.select({items:u,value:_,selected:new Set(n.value)});n.value=C}function v(u,_,C){const S=[];if(_=_??t.value.findIndex(F=>F.value===u.value),e.selectStrategy!=="single"&&(C!=null&&C.shiftKey)&&c.value!==null){const[F,O]=[c.value,_].sort((b,d)=>b-d);S.push(...t.value.slice(F,O+1))}else S.push(u),c.value=_;y(S,!f([u]))}function p(u){const _=s.value.selectAll({value:u,allItems:r.value,currentPage:o.value,selected:new Set(n.value)});n.value=_}const h=k(()=>n.value.size>0),x=k(()=>{const u=s.value.allSelected({allItems:r.value,currentPage:o.value});return!!u.length&&f(u)}),g=k(()=>s.value.showSelectAll),D={toggleSelect:v,select:y,selectAll:p,isSelected:f,isSomeSelected:m,someSelected:h,allSelected:x,showSelectAll:g,lastSelectedIndex:c,selectStrategy:s};return re(Dt,D),D}function _e(){const e=ne(Dt);if(!e)throw new Error("Missing selection!");return e}const nl=R({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),Tt=Symbol.for("vuetify:data-table-sort");function Vt(e){const l=Y(e,"sortBy"),a=T(e,"mustSort"),t=T(e,"multiSort");return{sortBy:l,mustSort:a,multiSort:t}}function Ct(e){const{sortBy:l,mustSort:a,multiSort:t,page:n}=e,r=c=>{if(c.key==null)return;let f=l.value.map(y=>({...y}))??[];const m=f.find(y=>y.key===c.key);m?m.order==="desc"?a.value&&f.length===1?m.order="asc":f=f.filter(y=>y.key!==c.key):m.order="desc":t.value?f.push({key:c.key,order:"asc"}):f=[{key:c.key,order:"asc"}],l.value=f,n&&(n.value=1)};function o(c){return!!l.value.find(f=>f.key===c.key)}const s={sortBy:l,toggleSort:r,isSorted:o};return re(Tt,s),s}function Bt(){const e=ne(Tt);if(!e)throw new Error("Missing sort!");return e}function Rt(e,l,a,t){const n=de();return{sortedItems:k(()=>{var o,s;return a.value.length?rl(l.value,a.value,n.current.value,{transform:t==null?void 0:t.transform,sortFunctions:{...e.customKeySort,...(o=t==null?void 0:t.sortFunctions)==null?void 0:o.value},sortRawFunctions:(s=t==null?void 0:t.sortRawFunctions)==null?void 0:s.value}):l.value})}}function rl(e,l,a,t){const n=new Intl.Collator(a,{sensitivity:"accent",usage:"sort"});return e.map(o=>[o,t!=null&&t.transform?t.transform(o):o]).sort((o,s)=>{var c,f;for(let m=0;m<l.length;m++){let y=!1;const v=l[m].key,p=l[m].order??"asc";if(p===!1)continue;let h=ye(o[1],v),x=ye(s[1],v),g=o[0].raw,D=s[0].raw;if(p==="desc"&&([h,x]=[x,h],[g,D]=[D,g]),(c=t==null?void 0:t.sortRawFunctions)!=null&&c[v]){const u=t.sortRawFunctions[v](g,D);if(u==null)continue;if(y=!0,u)return u}if((f=t==null?void 0:t.sortFunctions)!=null&&f[v]){const u=t.sortFunctions[v](h,x);if(u==null)continue;if(y=!0,u)return u}if(!y){if(h instanceof Date&&x instanceof Date)return h.getTime()-x.getTime();if([h,x]=[h,x].map(u=>u!=null?u.toString().toLocaleLowerCase():u),h!==x)return ve(h)&&ve(x)?0:ve(h)?-1:ve(x)?1:!isNaN(h)&&!isNaN(x)?Number(h)-Number(x):n.compare(h,x)}}return 0}).map(o=>{let[s]=o;return s})}const Ft=R({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:j,default:"$sortAsc"},sortDescIcon:{type:j,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...je(),...Sa()},"VDataTableHeaders"),Se=K()({name:"VDataTableHeaders",props:Ft(),setup(e,l){let{slots:a}=l;const{t}=de(),{toggleSort:n,sortBy:r,isSorted:o}=Bt(),{someSelected:s,allSelected:c,selectAll:f,showSelectAll:m}=_e(),{columns:y,headers:v}=ke(),{loaderClasses:p}=wa(e);function h(b,d){if(!(!(e.sticky||e.fixedHeader)&&!b.fixed))return{position:"sticky",left:b.fixed?N(b.fixedOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${d})`:void 0}}function x(b){const d=r.value.find(w=>w.key===b.key);return d?d.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:g,backgroundColorStyles:D}=Pa(e,"color"),{displayClasses:u,mobile:_}=Pe(e),C=k(()=>({headers:v.value,columns:y.value,toggleSort:n,isSorted:o,sortBy:r.value,someSelected:s.value,allSelected:c.value,selectAll:f,getSortIcon:x})),S=k(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},u.value,p.value]),F=b=>{let{column:d,x:w,y:P}=b;const I=d.key==="data-table-select"||d.key==="data-table-expand",B=V(e.headerProps??{},d.headerProps??{});return i(xe,V({tag:"th",align:d.align,class:[{"v-data-table__th--sortable":d.sortable&&!e.disableSort,"v-data-table__th--sorted":o(d),"v-data-table__th--fixed":d.fixed},...S.value],style:{width:N(d.width),minWidth:N(d.minWidth),maxWidth:N(d.maxWidth),...h(d,P)},colspan:d.colspan,rowspan:d.rowspan,onClick:d.sortable?()=>n(d):void 0,fixed:d.fixed,nowrap:d.nowrap,lastFixed:d.lastFixed,noPadding:I},B),{default:()=>{var U;const q=`header.${d.key}`,te={column:d,selectAll:f,isSorted:o,toggleSort:n,sortBy:r.value,someSelected:s.value,allSelected:c.value,getSortIcon:x};return a[q]?a[q](te):d.key==="data-table-select"?((U=a["header.data-table-select"])==null?void 0:U.call(a,te))??(m.value&&i(ze,{modelValue:c.value,indeterminate:s.value&&!c.value,"onUpdate:modelValue":f},null)):i("div",{class:"v-data-table-header__content"},[i("span",null,[d.title]),d.sortable&&!e.disableSort&&i(at,{key:"icon",class:"v-data-table-header__sort-icon",icon:x(d)},null),e.multiSort&&o(d)&&i("div",{key:"badge",class:["v-data-table-header__sort-badge",...g.value],style:D.value},[r.value.findIndex(W=>W.key===d.key)+1])])}})},O=()=>{const b=V(e.headerProps??{}??{}),d=k(()=>y.value.filter(P=>(P==null?void 0:P.sortable)&&!e.disableSort)),w=k(()=>{if(y.value.find(I=>I.key==="data-table-select")!=null)return c.value?"$checkboxOn":s.value?"$checkboxIndeterminate":"$checkboxOff"});return i(xe,V({tag:"th",class:[...S.value],colspan:v.value.length+1},b),{default:()=>[i("div",{class:"v-data-table-header__content"},[i(Me,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:d.value,label:t("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:w.value,"onClick:append":()=>f(!c.value)},{...a,chip:P=>{var I;return i(vt,{onClick:(I=P.item.raw)!=null&&I.sortable?()=>n(P.item.raw):void 0,onMousedown:B=>{B.preventDefault(),B.stopPropagation()}},{default:()=>[P.item.title,i(at,{class:["v-data-table__td-sort-icon",o(P.item.raw)&&"v-data-table__td-sort-icon-active"],icon:x(P.item.raw),size:"small"},null)]})}})])]})};ee(()=>_.value?i("tr",null,[i(O,null,null)]):i(X,null,[a.headers?a.headers(C.value):v.value.map((b,d)=>i("tr",null,[b.map((w,P)=>i(F,{column:w,x:P,y:d},null))])),e.loading&&i("tr",{class:"v-data-table-progress"},[i("th",{colspan:y.value.length},[i(ka,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:a.loader})])])]))}}),At=R({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),$t=Symbol.for("vuetify:data-table-group");function Ot(e){return{groupBy:Y(e,"groupBy")}}function Lt(e){const{disableSort:l,groupBy:a,sortBy:t}=e,n=J(new Set),r=k(()=>a.value.map(m=>({...m,order:m.order??!1})).concat(l!=null&&l.value?[]:t.value));function o(m){return n.value.has(m.id)}function s(m){const y=new Set(n.value);o(m)?y.delete(m.id):y.add(m.id),n.value=y}function c(m){function y(v){const p=[];for(const h of v.items)"type"in h&&h.type==="group"?p.push(...y(h)):p.push(h);return[...new Set(p)]}return y({items:m})}const f={sortByWithGroups:r,toggleGroup:s,opened:n,groupBy:a,extractRows:c,isGroupOpen:o};return re($t,f),f}function Nt(){const e=ne($t);if(!e)throw new Error("Missing group!");return e}function sl(e,l){if(!e.length)return[];const a=new Map;for(const t of e){const n=ye(t.raw,l);a.has(n)||a.set(n,[]),a.get(n).push(t)}return a}function Et(e,l){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!l.length)return[];const n=sl(e,l[0]),r=[],o=l.slice(1);return n.forEach((s,c)=>{const f=l[0],m=`${t}_${f}_${c}`;r.push({depth:a,id:m,key:f,value:c,items:o.length?Et(s,o,a+1,m):s,type:"group"})}),r}function Ht(e,l){const a=[];for(const t of e)"type"in t&&t.type==="group"?(t.value!=null&&a.push(t),(l.has(t.id)||t.value==null)&&a.push(...Ht(t.items,l))):a.push(t);return a}function Gt(e,l,a){return{flatItems:k(()=>{if(!l.value.length)return e.value;const n=Et(e.value,l.value.map(r=>r.key));return Ht(n,a.value)})}}const ol=R({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),il=K()({name:"VDataTableGroupHeaderRow",props:ol(),setup(e,l){let{slots:a}=l;const{isGroupOpen:t,toggleGroup:n,extractRows:r}=Nt(),{isSelected:o,isSomeSelected:s,select:c}=_e(),{columns:f}=ke(),m=k(()=>r([e.item]));return()=>i("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[f.value.map(y=>{var v,p;if(y.key==="data-table-group"){const h=t(e.item)?"$expand":"$next",x=()=>n(e.item);return((v=a["data-table-group"])==null?void 0:v.call(a,{item:e.item,count:m.value.length,props:{icon:h,onClick:x}}))??i(xe,{class:"v-data-table-group-header-row__column"},{default:()=>[i(M,{size:"small",variant:"text",icon:h,onClick:x},null),i("span",null,[e.item.value]),i("span",null,[et("("),m.value.length,et(")")])]})}if(y.key==="data-table-select"){const h=o(m.value),x=s(m.value)&&!h,g=D=>c(m.value,D);return((p=a["data-table-select"])==null?void 0:p.call(a,{props:{modelValue:h,indeterminate:x,"onUpdate:modelValue":g}}))??i("td",null,[i(ze,{modelValue:h,indeterminate:x,"onUpdate:modelValue":g},null)])}return i("td",null,null)})])}}),ul=R({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),jt=Symbol.for("vuetify:datatable:expanded");function Mt(e){const l=T(e,"expandOnClick"),a=Y(e,"expanded",e.expanded,s=>new Set(s),s=>[...s.values()]);function t(s,c){const f=new Set(a.value);c?f.add(s.value):f.delete(s.value),a.value=f}function n(s){return a.value.has(s.value)}function r(s){t(s,!n(s))}const o={expand:t,expanded:a,expandOnClick:l,isExpanded:n,toggleExpand:r};return re(jt,o),o}function zt(){const e=ne(jt);if(!e)throw new Error("foo");return e}const dl=R({index:Number,item:Object,cellProps:[Object,Function],onClick:Ne(),onContextmenu:Ne(),onDblclick:Ne(),...je()},"VDataTableRow"),qt=K()({name:"VDataTableRow",props:dl(),setup(e,l){let{slots:a}=l;const{displayClasses:t,mobile:n}=Pe(e,"v-data-table__tr"),{isSelected:r,toggleSelect:o,someSelected:s,allSelected:c,selectAll:f}=_e(),{isExpanded:m,toggleExpand:y}=zt(),{toggleSort:v,sortBy:p,isSorted:h}=Bt(),{columns:x}=ke();ee(()=>i("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},t.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&x.value.map((g,D)=>{const u=e.item,_=`item.${g.key}`,C=`header.${g.key}`,S={index:e.index,item:u.raw,internalItem:u,value:ye(u.columns,g.key),column:g,isSelected:r,toggleSelect:o,isExpanded:m,toggleExpand:y},F={column:g,selectAll:f,isSorted:h,toggleSort:v,sortBy:p.value,someSelected:s.value,allSelected:c.value,getSortIcon:()=>""},O=typeof e.cellProps=="function"?e.cellProps({index:S.index,item:S.item,internalItem:S.internalItem,value:S.value,column:g}):e.cellProps,b=typeof g.cellProps=="function"?g.cellProps({index:S.index,item:S.item,internalItem:S.internalItem,value:S.value}):g.cellProps;return i(xe,V({align:g.align,class:{"v-data-table__td--expanded-row":g.key==="data-table-expand","v-data-table__td--select-row":g.key==="data-table-select"},fixed:g.fixed,fixedOffset:g.fixedOffset,lastFixed:g.lastFixed,maxWidth:n.value?void 0:g.maxWidth,noPadding:g.key==="data-table-select"||g.key==="data-table-expand",nowrap:g.nowrap,width:n.value?void 0:g.width},O,b),{default:()=>{var w,P,I,B;if(g.key==="data-table-select")return((w=a["item.data-table-select"])==null?void 0:w.call(a,{...S,props:{disabled:!u.selectable,modelValue:r([u]),onClick:me(()=>o(u),["stop"])}}))??i(ze,{disabled:!u.selectable,modelValue:r([u]),onClick:me(q=>o(u,e.index,q),["stop"])},null);if(g.key==="data-table-expand")return((P=a["item.data-table-expand"])==null?void 0:P.call(a,{...S,props:{icon:m(u)?"$collapse":"$expand",size:"small",variant:"text",onClick:me(()=>y(u),["stop"])}}))??i(M,{icon:m(u)?"$collapse":"$expand",size:"small",variant:"text",onClick:me(()=>y(u),["stop"])},null);if(a[_]&&!n.value)return a[_](S);const d=He(S.value);return n.value?i(X,null,[i("div",{class:"v-data-table__td-title"},[((I=a[C])==null?void 0:I.call(a,F))??g.title]),i("div",{class:"v-data-table__td-value"},[((B=a[_])==null?void 0:B.call(a,S))??d])]):d}})})]))}}),Ut=R({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...je()},"VDataTableRows"),we=K()({name:"VDataTableRows",inheritAttrs:!1,props:Ut(),setup(e,l){let{attrs:a,slots:t}=l;const{columns:n}=ke(),{expandOnClick:r,toggleExpand:o,isExpanded:s}=zt(),{isSelected:c,toggleSelect:f}=_e(),{toggleGroup:m,isGroupOpen:y}=Nt(),{t:v}=de(),{mobile:p}=Pe(e);return ee(()=>{var h,x;return e.loading&&(!e.items.length||t.loading)?i("tr",{class:"v-data-table-rows-loading",key:"loading"},[i("td",{colspan:n.value.length},[((h=t.loading)==null?void 0:h.call(t))??v(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?i("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[i("td",{colspan:n.value.length},[((x=t["no-data"])==null?void 0:x.call(t))??v(e.noDataText)])]):i(X,null,[e.items.map((g,D)=>{var C;if(g.type==="group"){const S={index:D,item:g,columns:n.value,isExpanded:s,toggleExpand:o,isSelected:c,toggleSelect:f,toggleGroup:m,isGroupOpen:y};return t["group-header"]?t["group-header"](S):i(il,V({key:`group-header_${g.id}`,item:g},lt(a,":group-header",()=>S)),t)}const u={index:D,item:g.raw,internalItem:g,columns:n.value,isExpanded:s,toggleExpand:o,isSelected:c,toggleSelect:f},_={...u,props:V({key:`item_${g.key??g.index}`,onClick:r.value?()=>{o(g)}:void 0,index:D,item:g,cellProps:e.cellProps,mobile:p.value},lt(a,":row",()=>u),typeof e.rowProps=="function"?e.rowProps({item:u.item,index:u.index,internalItem:u.internalItem}):e.rowProps)};return i(X,{key:_.props.key},[t.item?t.item(_):i(qt,_.props,t),s(g)&&((C=t["expanded-row"])==null?void 0:C.call(t,u))])})])}),{}}}),cl=R({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function fl(e,l,a,t){const n=e.returnObject?l:ge(l,e.itemValue),r=ge(l,e.itemSelectable,!0),o=t.reduce((s,c)=>(c.key!=null&&(s[c.key]=ge(l,c.value)),s),{});return{type:"item",key:e.returnObject?ge(l,e.itemValue):n,index:a,value:n,selectable:r,columns:o,raw:l}}function vl(e,l,a){return l.map((t,n)=>fl(e,t,n,a))}function Kt(e,l){return{items:k(()=>vl(e,e.items,l.value))}}function Wt(e){let{page:l,itemsPerPage:a,sortBy:t,groupBy:n,search:r}=e;const o=it("VDataTable"),s=k(()=>({page:l.value,itemsPerPage:a.value,sortBy:t.value,groupBy:n.value,search:r.value}));let c=null;Ge(s,()=>{ut(c,s.value)||(c&&c.search!==s.value.search&&(l.value=1),o.emit("update:options",s.value),c=s.value)},{deep:!0,immediate:!0})}const Qt=R({...Ut(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ul(),...At(),...Ja(),...cl(),...ll(),...nl(),...Ft(),...Ba()},"DataTable"),ml=R({...qa(),...Qt(),...mt(),...yt()},"VDataTable");K()({name:"VDataTable",props:ml(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const{groupBy:n}=Ot(e),{sortBy:r,multiSort:o,mustSort:s}=Vt(e),{page:c,itemsPerPage:f}=Ua(e),{disableSort:m}=dt(e),{columns:y,headers:v,sortFunctions:p,sortRawFunctions:h,filterFunctions:x}=Pt(e,{groupBy:n,showSelect:T(e,"showSelect"),showExpand:T(e,"showExpand")}),{items:g}=Kt(e,y),D=T(e,"search"),{filteredItems:u}=gt(e,g,D,{transform:H=>H.columns,customKeyFilter:x}),{toggleSort:_}=Ct({sortBy:r,multiSort:o,mustSort:s,page:c}),{sortByWithGroups:C,opened:S,extractRows:F,isGroupOpen:O,toggleGroup:b}=Lt({groupBy:n,sortBy:r,disableSort:m}),{sortedItems:d}=Rt(e,u,C,{transform:H=>({...H.raw,...H.columns}),sortFunctions:p,sortRawFunctions:h}),{flatItems:w}=Gt(d,n,S),P=k(()=>w.value.length),{startIndex:I,stopIndex:B,pageCount:q,setItemsPerPage:te}=Ka({page:c,itemsPerPage:f,itemsLength:P}),{paginatedItems:U}=Qa({items:w,startIndex:I,stopIndex:B,itemsPerPage:f}),W=k(()=>F(U.value)),{isSelected:De,select:Ie,selectAll:Te,toggleSelect:Ve,someSelected:Ce,allSelected:Be}=It(e,{allItems:g,currentPage:W}),{isExpanded:Re,toggleExpand:Fe}=Mt(e);Wt({page:c,itemsPerPage:f,sortBy:r,groupBy:n,search:D}),he({VDataTableRows:{hideNoData:T(e,"hideNoData"),noDataText:T(e,"noDataText"),loading:T(e,"loading"),loadingText:T(e,"loadingText")}});const A=k(()=>({page:c.value,itemsPerPage:f.value,sortBy:r.value,pageCount:q.value,toggleSort:_,setItemsPerPage:te,someSelected:Ce.value,allSelected:Be.value,isSelected:De,select:Ie,selectAll:Te,toggleSelect:Ve,isExpanded:Re,toggleExpand:Fe,isGroupOpen:O,toggleGroup:b,items:W.value.map(H=>H.raw),internalItems:W.value,groupedItems:U.value,columns:y.value,headers:v.value}));return ee(()=>{const H=rt.filterProps(e),Ae=Se.filterProps(e),G=we.filterProps(e),$=pe.filterProps(e);return i(pe,V({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},$,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var Q;return(Q=t.top)==null?void 0:Q.call(t,A.value)},default:()=>{var Q,ce,L,se,oe,ie;return t.default?t.default(A.value):i(X,null,[(Q=t.colgroup)==null?void 0:Q.call(t,A.value),!e.hideDefaultHeader&&i("thead",{key:"thead"},[i(Se,Ae,t)]),(ce=t.thead)==null?void 0:ce.call(t,A.value),!e.hideDefaultBody&&i("tbody",null,[(L=t["body.prepend"])==null?void 0:L.call(t,A.value),t.body?t.body(A.value):i(we,V(a,G,{items:U.value}),t),(se=t["body.append"])==null?void 0:se.call(t,A.value)]),(oe=t.tbody)==null?void 0:oe.call(t,A.value),(ie=t.tfoot)==null?void 0:ie.call(t,A.value)])},bottom:()=>t.bottom?t.bottom(A.value):!e.hideDefaultFooter&&i(X,null,[i(Ra,null,null),i(rt,H,{prepend:t["footer.prepend"]})])})}),{}}});const gl=R({...da(Qt(),["hideDefaultFooter"]),...At(),...Va(),...mt()},"VDataTableVirtual"),bl=K()({name:"VDataTableVirtual",props:gl(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,l){let{attrs:a,slots:t}=l;const{groupBy:n}=Ot(e),{sortBy:r,multiSort:o,mustSort:s}=Vt(e),{disableSort:c}=dt(e),{columns:f,headers:m,filterFunctions:y,sortFunctions:v,sortRawFunctions:p}=Pt(e,{groupBy:n,showSelect:T(e,"showSelect"),showExpand:T(e,"showExpand")}),{items:h}=Kt(e,f),x=T(e,"search"),{filteredItems:g}=gt(e,h,x,{transform:$=>$.columns,customKeyFilter:y}),{toggleSort:D}=Ct({sortBy:r,multiSort:o,mustSort:s}),{sortByWithGroups:u,opened:_,extractRows:C,isGroupOpen:S,toggleGroup:F}=Lt({groupBy:n,sortBy:r,disableSort:c}),{sortedItems:O}=Rt(e,g,u,{transform:$=>({...$.raw,...$.columns}),sortFunctions:v,sortRawFunctions:p}),{flatItems:b}=Gt(O,n,_),d=k(()=>C(b.value)),{isSelected:w,select:P,selectAll:I,toggleSelect:B,someSelected:q,allSelected:te}=It(e,{allItems:d,currentPage:d}),{isExpanded:U,toggleExpand:W}=Mt(e),{containerRef:De,markerRef:Ie,paddingTop:Te,paddingBottom:Ve,computedItems:Ce,handleItemResize:Be,handleScroll:Re,handleScrollend:Fe,calculateVisibleItems:A,scrollToIndex:H}=Ta(e,b),Ae=k(()=>Ce.value.map($=>$.raw));Wt({sortBy:r,page:be(1),itemsPerPage:be(-1),groupBy:n,search:x}),he({VDataTableRows:{hideNoData:T(e,"hideNoData"),noDataText:T(e,"noDataText"),loading:T(e,"loading"),loadingText:T(e,"loadingText")}});const G=k(()=>({sortBy:r.value,toggleSort:D,someSelected:q.value,allSelected:te.value,isSelected:w,select:P,selectAll:I,toggleSelect:B,isExpanded:U,toggleExpand:W,isGroupOpen:S,toggleGroup:F,items:d.value.map($=>$.raw),internalItems:d.value,groupedItems:b.value,columns:f.value,headers:m.value}));return ee(()=>{const $=Se.filterProps(e),Q=we.filterProps(e),ce=pe.filterProps(e);return i(pe,V({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},ce,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var L;return(L=t.top)==null?void 0:L.call(t,G.value)},wrapper:()=>{var L,se,oe,ie,Ue,Ke;return i("div",{ref:De,onScrollPassive:Re,onScrollend:Fe,class:"v-table__wrapper",style:{height:N(e.height)}},[i("table",null,[(L=t.colgroup)==null?void 0:L.call(t,G.value),!e.hideDefaultHeader&&i("thead",{key:"thead"},[i(Se,$,t)]),(se=t.thead)==null?void 0:se.call(t,G.value),!e.hideDefaultBody&&i("tbody",{key:"tbody"},[i("tr",{ref:Ie,style:{height:N(Te.value),border:0}},[i("td",{colspan:f.value.length,style:{height:0,border:0}},null)]),(oe=t["body.prepend"])==null?void 0:oe.call(t,G.value),i(we,V(a,Q,{items:Ae.value}),{...t,item:ae=>i(Ca,{key:ae.internalItem.index,renderless:!0,"onUpdate:height":$e=>Be(ae.internalItem.index,$e)},{default:$e=>{var Qe;let{itemRef:We}=$e;return((Qe=t.item)==null?void 0:Qe.call(t,{...ae,itemRef:We}))??i(qt,V(ae.props,{ref:We,key:ae.internalItem.index,index:ae.internalItem.index}),t)}})}),(ie=t["body.append"])==null?void 0:ie.call(t,G.value),i("tr",{style:{height:N(Ve.value),border:0}},[i("td",{colspan:f.value.length,style:{height:0,border:0}},null)])]),(Ue=t.tbody)==null?void 0:Ue.call(t,G.value),(Ke=t.tfoot)==null?void 0:Ke.call(t,G.value)])])},bottom:()=>{var L;return(L=t.bottom)==null?void 0:L.call(t,G.value)}})}),{calculateVisibleItems:A,scrollToIndex:H}}}),hl={name:"AdminTable"};function yl(e,l,a,t,n,r){return E(),z(bl,{"fixed-header":"","item-value":"pk",mobile:e.$vuetify.display.xs},ca({_:2},[ct(e.$slots,(o,s)=>({name:s,fn:le(c=>[fa(e.$slots,s,V({props:o},c),void 0,!0)])}))]),1032,["mobile"])}const Ol=Z(hl,[["render",yl],["__scopeId","data-v-8b5d9183"]]),pl={name:"AdminDeleteRowDialog",components:{ConfirmDialog:Fa},props:{table:{type:String,required:!0},pk:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{mdiTrashCan:va}},computed:{titleText(){return`Delete ${this.table}`}},methods:{...ot(ft,["deleteRow"]),confirm(){this.deleteRow(this.table,this.pk),this.showDialog=!1}}};function xl(e,l,a,t,n,r){const o=ue("ConfirmDialog");return E(),z(o,{icon:n.mdiTrashCan,"title-text":r.titleText,text:a.name,"confirm-text":r.titleText,onConfirm:r.confirm},null,8,["icon","title-text","text","confirm-text","onConfirm"])}const Ll=Z(pl,[["render",xl]]),Sl={name:"RelationChips",components:{GroupChip:bt},props:{pks:{type:Array,required:!0},objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{map(){const e={};for(const l of this.objs)e[l.pk]=l;return e}}};function wl(e,l,a,t,n,r){const o=ue("GroupChip");return E(),tt("span",null,[(E(!0),tt(X,null,ct(a.pks,s=>(E(),z(o,{key:s,"title-key":a.titleKey,"group-type":a.groupType,item:r.map[s]},null,8,["title-key","group-type","item"]))),128))])}const Nl=Z(Sl,[["render",wl]]);export{$l as A,bt as G,Nl as R,Al as a,Ll as b,Ol as c};
