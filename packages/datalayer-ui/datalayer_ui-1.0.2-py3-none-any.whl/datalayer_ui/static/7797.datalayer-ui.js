"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[7797],{17797:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeLesson:()=>A,default:()=>C});var n=t(9387),l=t(20568),a=t(97096),r=t(98754),o=t(8586),c=t(76818),i=t(52032),d=t(99180),u=t(15824),h=t(2159),m=t(16476),x=t(86218),f=t(17810),j=t(53850),g=t(23530),p=t(97734),y=t(50906),k=t(18683);const A=()=>{const e=(0,n.useMemo)((()=>[new h._]),[]),{accountHandle:s,spaceHandle:t,courseId:A,lessonId:C}=(0,l.g)();if(!C)return(0,k.jsx)(k.Fragment,{});const v=(0,f.J)(),b=(0,y.mt)(),I=(0,m.Gx)(),{confirmCourseItemCompletion:L,getLesson:S,getStudent:w,refreshLesson:_,refreshStudent:z}=(0,j.E)(),[F,B]=(0,n.useState)("lesson"),[E,H]=(0,n.useState)(S(C)),[M,T]=(0,n.useState)(!1),[$,P]=(0,n.useState)(!1),q=(0,g.Z)(),{enqueueToast:D}=(0,p.d)(),G=(e,s)=>{s.preventDefault(),b.layout().resetRightPortal(),B(e)};return(0,n.useEffect)((()=>(b.layout().showBackdrop(),_(C).then((e=>{if(b.layout().hideBackdrop(),e.success){const e=S(C);e?(H(e),b.layout().setItem(e)):q("/")}})).finally((()=>{b.layout().hideBackdrop()})),()=>{H(void 0),I.reset(),b.layout().setItem(void 0)})),[C]),(0,n.useEffect)((()=>(z(A,v?.id).then((e=>{if(e.success){const e=w(A,v?.id),s=e?.studentItems?.get(C);s&&T(s.completed)}})),()=>{H(void 0),I.reset(),b.layout().setItem(void 0)})),[C]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(a.z,{children:(0,k.jsxs)(r.A,{display:"flex",children:[(0,k.jsx)(r.A,{flex:1,children:(0,k.jsx)(o.A,{sx:{fontSize:3},children:"Course lesson"})}),(0,k.jsxs)(r.A,{children:[(0,k.jsx)(c.A,{children:"Completed"}),(0,k.jsx)(i.A,{onClick:()=>{P(!0),L(A,"lesson",C,!M).then((e=>{e.success&&(D(e.message,{variant:"success"}),T(!M))})).finally((()=>{P(!1)}))},checked:M,size:"small",loading:$,"aria-labelledby":"switchLabel"})]}),(0,k.jsx)(r.A,{ml:3,children:(0,k.jsx)(d.Q,{variant:"default",size:"small",onClick:()=>q(`/${s}/${t}/course/${A}/progress`),children:"My course progress"})})]})}),E&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(u.A,{sx:{mt:3,mb:3},children:[(0,k.jsx)(u.A.Link,{href:"",selected:"lesson"===F,onClick:e=>G("lesson",e),children:"Lesson"}),(0,k.jsx)(u.A.Link,{href:"",selected:"comments"===F,onClick:e=>G("comments",e),children:"Comments"})]}),"lesson"===F&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(r.A,{children:E.nbformat&&(0,k.jsx)(x.g,{id:C,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",readonly:!1,cellMetadataPanel:!1,nbformat:E.nbformat,extensions:e})})}),"comments"===F&&(0,k.jsx)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,k.jsx)(r.A,{})})]})]})},C=A}}]);