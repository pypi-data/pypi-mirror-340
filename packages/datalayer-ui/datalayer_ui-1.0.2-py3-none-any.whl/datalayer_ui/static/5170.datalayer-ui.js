(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5170],{25170:(t,e,r)=>{"use strict";r.d(e,{Z:()=>l});var n=r(97789),o=r(98820),i=r(72490),s=r(18565),a=r(58264);class c{constructor(t){this._stream=new i.Stream(this),this._serverSettings=t.serverSettings}async emit(t){}dispose(){}get isDisposed(){return!0}get stream(){return this._stream}get serverSettings(){return this._serverSettings}}class l extends o.l{constructor(t){var e;super(t),this.name="JupyterLite Server",this.namespace=this.name,this.version="unknown",this._router=new a.I;const r={...n.ServerConnection.makeSettings(),WebSocket:s.WebSocket,fetch:null!==(e=this.fetch.bind(this))&&void 0!==e?e:void 0};this._serviceManager=new n.ServiceManager({standby:"never",serverSettings:r,events:new c({serverSettings:r})})}get router(){return this._router}get serviceManager(){return this._serviceManager}async fetch(t,e){if(!(t instanceof Request))throw Error("Request info is not a Request");return this._router.route(t)}attachShell(t){}evtResize(t){}registerPluginModule(t){let e=t.default;Object.prototype.hasOwnProperty.call(t,"__esModule")||(e=t),Array.isArray(e)||(e=[e]),e.forEach((t=>{try{this.registerPlugin(t)}catch(t){console.error(t)}}))}registerPluginModules(t){t.forEach((t=>{this.registerPluginModule(t)}))}}},58264:(t,e,r)=>{"use strict";r.d(e,{I:()=>n});class n{constructor(){this._routes=[]}get(t,e){this._add("GET",t,e)}put(t,e){this._add("PUT",t,e)}post(t,e){this._add("POST",t,e)}patch(t,e){this._add("PATCH",t,e)}delete(t,e){this._add("DELETE",t,e)}async route(t){const e=new URL(t.url),{method:r}=t,{pathname:n}=e;for(const o of this._routes){if(o.method!==r)continue;const i=n.match(o.pattern);if(!i)continue;const s=i.slice(1);let a;if("PATCH"===o.method||"PUT"===o.method||"POST"===o.method)try{a=JSON.parse(await t.text())}catch{a=void 0}return o.callback.call(null,{pathname:n,body:a,query:Object.fromEntries(e.searchParams)},...s)}throw new Error("Cannot route "+t.method+" "+t.url)}_add(t,e,r){"string"==typeof e&&(e=new RegExp(e)),this._routes.push({method:t,pattern:e,callback:r})}}},98820:(t,e,r)=>{"use strict";r.d(e,{l:()=>u});var n,o,i,s,a=r(16950),c=r(98238),l=r(14809);!function(t){function e(t,e,r=0,n=-1){let o,i=t.length;if(0===i)return-1;r=r<0?Math.max(0,r+i):Math.min(r,i-1),o=(n=n<0?Math.max(0,n+i):Math.min(n,i-1))<r?n+1+(i-r):n-r+1;for(let n=0;n<o;++n){let o=(r+n)%i;if(t[o]===e)return o}return-1}function r(t,e,r=-1,n=0){let o,i=t.length;if(0===i)return-1;o=(r=r<0?Math.max(0,r+i):Math.min(r,i-1))<(n=n<0?Math.max(0,n+i):Math.min(n,i-1))?r+1+(i-n):r-n+1;for(let n=0;n<o;++n){let o=(r-n+i)%i;if(t[o]===e)return o}return-1}function n(t,e,r=0,n=-1){let o,i=t.length;if(0===i)return-1;r=r<0?Math.max(0,r+i):Math.min(r,i-1),o=(n=n<0?Math.max(0,n+i):Math.min(n,i-1))<r?n+1+(i-r):n-r+1;for(let n=0;n<o;++n){let o=(r+n)%i;if(e(t[o],o))return o}return-1}function o(t,e,r=-1,n=0){let o,i=t.length;if(0===i)return-1;o=(r=r<0?Math.max(0,r+i):Math.min(r,i-1))<(n=n<0?Math.max(0,n+i):Math.min(n,i-1))?r+1+(i-n):r-n+1;for(let n=0;n<o;++n){let o=(r-n+i)%i;if(e(t[o],o))return o}return-1}function i(t,e=0,r=-1){let n=t.length;if(!(n<=1))for(e=e<0?Math.max(0,e+n):Math.min(e,n-1),r=r<0?Math.max(0,r+n):Math.min(r,n-1);e<r;){let n=t[e],o=t[r];t[e++]=o,t[r--]=n}}function s(t,e){let r=t.length;if(e<0&&(e+=r),e<0||e>=r)return;let n=t[e];for(let n=e+1;n<r;++n)t[n-1]=t[n];return t.length=r-1,n}t.firstIndexOf=e,t.lastIndexOf=r,t.findFirstIndex=n,t.findLastIndex=o,t.findFirstValue=function(t,e,r=0,o=-1){let i=n(t,e,r,o);return-1!==i?t[i]:void 0},t.findLastValue=function(t,e,r=-1,n=0){let i=o(t,e,r,n);return-1!==i?t[i]:void 0},t.lowerBound=function(t,e,r,n=0,o=-1){let i=t.length;if(0===i)return 0;let s=n=n<0?Math.max(0,n+i):Math.min(n,i-1),a=(o=o<0?Math.max(0,o+i):Math.min(o,i-1))-n+1;for(;a>0;){let n=a>>1,o=s+n;r(t[o],e)<0?(s=o+1,a-=n+1):a=n}return s},t.upperBound=function(t,e,r,n=0,o=-1){let i=t.length;if(0===i)return 0;let s=n=n<0?Math.max(0,n+i):Math.min(n,i-1),a=(o=o<0?Math.max(0,o+i):Math.min(o,i-1))-n+1;for(;a>0;){let n=a>>1,o=s+n;r(t[o],e)>0?a=n:(s=o+1,a-=n+1)}return s},t.shallowEqual=function(t,e,r){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;++n)if(r?!r(t[n],e[n]):t[n]!==e[n])return!1;return!0},t.slice=function(t,e={}){let{start:r,stop:n,step:o}=e;if(void 0===o&&(o=1),0===o)throw new Error("Slice `step` cannot be zero.");let i,s=t.length;void 0===r?r=o<0?s-1:0:r<0?r=Math.max(r+s,o<0?-1:0):r>=s&&(r=o<0?s-1:s),void 0===n?n=o<0?-1:s:n<0?n=Math.max(n+s,o<0?-1:0):n>=s&&(n=o<0?s-1:s),i=o<0&&n>=r||o>0&&r>=n?0:o<0?Math.floor((n-r+1)/o+1):Math.floor((n-r-1)/o+1);let a=[];for(let e=0;e<i;++e)a[e]=t[r+e*o];return a},t.move=function(t,e,r){let n=t.length;if(n<=1)return;if((e=e<0?Math.max(0,e+n):Math.min(e,n-1))===(r=r<0?Math.max(0,r+n):Math.min(r,n-1)))return;let o=t[e],i=e<r?1:-1;for(let n=e;n!==r;n+=i)t[n]=t[n+i];t[r]=o},t.reverse=i,t.rotate=function(t,e,r=0,n=-1){let o=t.length;if(o<=1)return;if((r=r<0?Math.max(0,r+o):Math.min(r,o-1))>=(n=n<0?Math.max(0,n+o):Math.min(n,o-1)))return;let s=n-r+1;if(e>0?e%=s:e<0&&(e=(e%s+s)%s),0===e)return;let a=r+e;i(t,r,a-1),i(t,a,n),i(t,r,n)},t.fill=function(t,e,r=0,n=-1){let o,i=t.length;if(0!==i){r=r<0?Math.max(0,r+i):Math.min(r,i-1),o=(n=n<0?Math.max(0,n+i):Math.min(n,i-1))<r?n+1+(i-r):n-r+1;for(let n=0;n<o;++n)t[(r+n)%i]=e}},t.insert=function(t,e,r){let n=t.length;e=e<0?Math.max(0,e+n):Math.min(e,n);for(let r=n;r>e;--r)t[r]=t[r-1];t[e]=r},t.removeAt=s,t.removeFirstOf=function(t,r,n=0,o=-1){let i=e(t,r,n,o);return-1!==i&&s(t,i),i},t.removeLastOf=function(t,e,n=-1,o=0){let i=r(t,e,n,o);return-1!==i&&s(t,i),i},t.removeAllOf=function(t,e,r=0,n=-1){let o=t.length;if(0===o)return 0;r=r<0?Math.max(0,r+o):Math.min(r,o-1),n=n<0?Math.max(0,n+o):Math.min(n,o-1);let i=0;for(let s=0;s<o;++s)r<=n&&s>=r&&s<=n&&t[s]===e||n<r&&(s<=n||s>=r)&&t[s]===e?i++:i>0&&(t[s-i]=t[s]);return i>0&&(t.length=o-i),i},t.removeFirstWhere=function(t,e,r=0,o=-1){let i,a=n(t,e,r,o);return-1!==a&&(i=s(t,a)),{index:a,value:i}},t.removeLastWhere=function(t,e,r=-1,n=0){let i,a=o(t,e,r,n);return-1!==a&&(i=s(t,a)),{index:a,value:i}},t.removeAllWhere=function(t,e,r=0,n=-1){let o=t.length;if(0===o)return 0;r=r<0?Math.max(0,r+o):Math.min(r,o-1),n=n<0?Math.max(0,n+o):Math.min(n,o-1);let i=0;for(let s=0;s<o;++s)r<=n&&s>=r&&s<=n&&e(t[s],s)||n<r&&(s<=n||s>=r)&&e(t[s],s)?i++:i>0&&(t[s-i]=t[s]);return i>0&&(t.length=o-i),i}}(n||(n={})),function(t){t.rangeLength=function(t,e,r){return 0===r?1/0:t>e&&r>0||t<e&&r<0?0:Math.ceil((e-t)/r)}}(o||(o={})),function(t){function e(t,e,r=0){let n=new Array(e.length);for(let o=0,i=r,s=e.length;o<s;++o,++i){if(i=t.indexOf(e[o],i),-1===i)return null;n[o]=i}return n}t.findIndices=e,t.matchSumOfSquares=function(t,r,n=0){let o=e(t,r,n);if(!o)return null;let i=0;for(let t=0,e=o.length;t<e;++t){let e=o[t]-n;i+=e*e}return{score:i,indices:o}},t.matchSumOfDeltas=function(t,r,n=0){let o=e(t,r,n);if(!o)return null;let i=0,s=n-1;for(let t=0,e=o.length;t<e;++t){let e=o[t];i+=e-s-1,s=e}return{score:i,indices:o}},t.highlight=function(t,e,r){let n=[],o=0,i=0,s=e.length;for(;o<s;){let a=e[o],c=e[o];for(;++o<s&&e[o]===c+1;)c++;i<a&&n.push(t.slice(i,a)),a<c+1&&n.push(r(t.slice(a,c+1))),i=c+1}return i<t.length&&n.push(t.slice(i)),n},t.cmp=function(t,e){return t<e?-1:t>e?1:0}}(i||(i={}));class u{constructor(t){this._delegate=new c.PromiseDelegate,this._plugins=new Map,this._services=new Map,this._started=!1,this.commands=new a.J,this.contextMenu=new l.tz({commands:this.commands,renderer:t.contextMenuRenderer}),this.shell=t.shell}get started(){return this._delegate.promise}getPluginDescription(t){var e,r;return null!==(r=null===(e=this._plugins.get(t))||void 0===e?void 0:e.description)&&void 0!==r?r:""}hasPlugin(t){return this._plugins.has(t)}isPluginActivated(t){var e,r;return null!==(r=null===(e=this._plugins.get(t))||void 0===e?void 0:e.activated)&&void 0!==r&&r}listPlugins(){return Array.from(this._plugins.keys())}registerPlugin(t){if(this._plugins.has(t.id))throw new TypeError(`Plugin '${t.id}' is already registered.`);const e=s.createPluginData(t);s.ensureNoCycle(e,this._plugins,this._services),e.provides&&this._services.set(e.provides,e.id),this._plugins.set(e.id,e)}registerPlugins(t){for(const e of t)this.registerPlugin(e)}deregisterPlugin(t,e){const r=this._plugins.get(t);if(r){if(r.activated&&!e)throw new Error(`Plugin '${t}' is still active.`);this._plugins.delete(t)}}async activatePlugin(t){const e=this._plugins.get(t);if(!e)throw new ReferenceError(`Plugin '${t}' is not registered.`);if(e.activated)return;if(e.promise)return e.promise;const r=e.requires.map((t=>this.resolveRequiredService(t))),n=e.optional.map((t=>this.resolveOptionalService(t)));return e.promise=Promise.all([...r,...n]).then((t=>e.activate.apply(void 0,[this,...t]))).then((t=>{e.service=t,e.activated=!0,e.promise=null})).catch((t=>{throw e.promise=null,t})),e.promise}async deactivatePlugin(t){const e=this._plugins.get(t);if(!e)throw new ReferenceError(`Plugin '${t}' is not registered.`);if(!e.activated)return[];if(!e.deactivate)throw new TypeError(`Plugin '${t}'#deactivate() method missing`);const r=s.findDependents(t,this._plugins,this._services),n=r.map((t=>this._plugins.get(t)));for(const e of n)if(!e.deactivate)throw new TypeError(`Plugin ${e.id}#deactivate() method missing (depends on ${t})`);for(const t of n){const e=[...t.requires,...t.optional].map((t=>{const e=this._services.get(t);return e?this._plugins.get(e).service:null}));await t.deactivate(this,...e),t.service=null,t.activated=!1}return r.pop(),r}async resolveRequiredService(t){const e=this._services.get(t);if(!e)throw new TypeError(`No provider for: ${t.name}.`);const r=this._plugins.get(e);return r.activated||await this.activatePlugin(e),r.service}async resolveOptionalService(t){const e=this._services.get(t);if(!e)return null;const r=this._plugins.get(e);if(!r.activated)try{await this.activatePlugin(e)}catch(t){return console.error(t),null}return r.service}start(t={}){if(this._started)return this._delegate.promise;this._started=!0;const e=t.hostID||"",r=s.collectStartupPlugins(this._plugins,t).map((t=>this.activatePlugin(t).catch((e=>{console.error(`Plugin '${t}' failed to activate.`),console.error(e)}))));return Promise.all(r).then((()=>{this.attachShell(e),this.addEventListeners(),this._delegate.resolve()})),this._delegate.promise}get deferredPlugins(){return Array.from(this._plugins).filter((([t,e])=>"defer"===e.autoStart)).map((([t,e])=>t))}async activateDeferredPlugins(){const t=this.deferredPlugins.filter((t=>this._plugins.get(t).autoStart)).map((t=>this.activatePlugin(t)));await Promise.all(t)}handleEvent(t){switch(t.type){case"resize":this.evtResize(t);break;case"keydown":this.evtKeydown(t);break;case"contextmenu":this.evtContextMenu(t)}}attachShell(t){l.x0.attach(this.shell,t&&document.getElementById(t)||document.body)}addEventListeners(){document.addEventListener("contextmenu",this),document.addEventListener("keydown",this,!0),window.addEventListener("resize",this)}evtKeydown(t){this.commands.processKeydownEvent(t)}evtContextMenu(t){t.shiftKey||this.contextMenu.open(t)&&(t.preventDefault(),t.stopPropagation())}evtResize(t){this.shell.update()}}!function(t){t.createPluginData=function(t){var e,r,n,o;return{id:t.id,description:null!==(e=t.description)&&void 0!==e?e:"",service:null,promise:null,activated:!1,activate:t.activate,deactivate:null!==(r=t.deactivate)&&void 0!==r?r:null,provides:null!==(n=t.provides)&&void 0!==n?n:null,autoStart:null!==(o=t.autoStart)&&void 0!==o&&o,requires:t.requires?t.requires.slice():[],optional:t.optional?t.optional.slice():[]}},t.ensureNoCycle=function(t,e,r){const n=[...t.requires,...t.optional],o=n=>{if(n===t.provides)return!0;const s=r.get(n);if(!s)return!1;const a=e.get(s),c=[...a.requires,...a.optional];return 0!==c.length&&(i.push(s),!!c.some(o)||(i.pop(),!1))};if(!t.provides||0===n.length)return;const i=[t.id];if(n.some(o))throw new ReferenceError(`Cycle detected: ${i.join(" -> ")}.`)},t.findDependents=function(t,e,r){const n=new Array,o=t=>{const o=e.get(t),i=[...o.requires,...o.optional];n.push(...i.reduce(((e,n)=>{const o=r.get(n);return o&&e.push([t,o]),e}),[]))};for(const t of e.keys())o(t);const i=n.filter((e=>e[1]===t));let s=0;for(;i.length>s;){const t=i.length,e=new Set(i.map((t=>t[0])));for(const t of e)n.filter((e=>e[1]===t)).forEach((t=>{i.includes(t)||i.push(t)}));s=t}const a=function(t){let e=[],r=new Set,n=new Map;for(const e of t)o(e);for(const[t]of n)i(t);return e;function o(t){let[e,r]=t,o=n.get(r);o?o.push(e):n.set(r,[e])}function i(t){if(r.has(t))return;r.add(t);let o=n.get(t);if(o)for(const t of o)i(t);e.push(t)}}(i),c=a.findIndex((e=>e===t));return-1===c?[t]:a.slice(0,c+1)},t.collectStartupPlugins=function(t,e){const r=new Set;for(const e of t.keys())!0===t.get(e).autoStart&&r.add(e);if(e.startPlugins)for(const t of e.startPlugins)r.add(t);if(e.ignorePlugins)for(const t of e.ignorePlugins)r.delete(t);return Array.from(r)}}(s||(s={}))},18565:function(t,e,r){var n=r(42165);!function(t){"use strict";var e="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},o=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t},i=Object.prototype.hasOwnProperty;function s(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function a(t){try{return encodeURIComponent(t)}catch(t){return null}}var c={stringify:function(t,e){e=e||"";var r,n,o=[];for(n in"string"!=typeof e&&(e="?"),t)if(i.call(t,n)){if((r=t[n])||null!=r&&!isNaN(r)||(r=""),n=a(n),r=a(r),null===n||null===r)continue;o.push(n+"="+r)}return o.length?e+o.join("&"):""},parse:function(t){for(var e,r=/([^=?#&]+)=?([^&]*)/g,n={};e=r.exec(t);){var o=s(e[1]),i=s(e[2]);null===o||null===i||o in n||(n[o]=i)}return n}},l=/[\n\r\t]/g,u=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,p=/^[a-zA-Z]:/,f=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/;function d(t){return(t||"").toString().replace(f,"")}var v=[["#","hash"],["?","query"],function(t,e){return y(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],g={hash:1,query:1};function m(t){var r,n=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(t=t||n);if("blob:"===t.protocol)o=new w(unescape(t.pathname),{});else if("string"===i)for(r in o=new w(t,{}),g)delete o[r];else if("object"===i){for(r in t)r in g||(o[r]=t[r]);void 0===o.slashes&&(o.slashes=u.test(t.href))}return o}function y(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function E(t,e){t=(t=d(t)).replace(l,""),e=e||{};var r,n=h.exec(t),o=n[1]?n[1].toLowerCase():"",i=!!n[2],s=!!n[3],a=0;return i?s?(r=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(r=n[2]+n[4],a=n[2].length):s?(r=n[3]+n[4],a=n[3].length):r=n[4],"file:"===o?a>=2&&(r=r.slice(2)):y(o)?r=n[4]:o?i&&(r=r.slice(2)):a>=2&&y(e.protocol)&&(r=n[4]),{protocol:o,slashes:i||y(o),slashesCount:a,rest:r}}function w(t,e,r){if(t=(t=d(t)).replace(l,""),!(this instanceof w))return new w(t,e,r);var n,i,s,a,u,h,f=v.slice(),g=typeof e,b=this,S=0;for("object"!==g&&"string"!==g&&(r=e,e=null),r&&"function"!=typeof r&&(r=c.parse),n=!(i=E(t||"",e=m(e))).protocol&&!i.slashes,b.slashes=i.slashes||n&&e.slashes,b.protocol=i.protocol||e.protocol||"",t=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||p.test(t))||!i.slashes&&(i.protocol||i.slashesCount<2||!y(b.protocol)))&&(f[3]=[/(.*)/,"pathname"]);S<f.length;S++)"function"!=typeof(a=f[S])?(s=a[0],h=a[1],s!=s?b[h]=t:"string"==typeof s?~(u="@"===s?t.lastIndexOf(s):t.indexOf(s))&&("number"==typeof a[2]?(b[h]=t.slice(0,u),t=t.slice(u+a[2])):(b[h]=t.slice(u),t=t.slice(0,u))):(u=s.exec(t))&&(b[h]=u[1],t=t.slice(0,u.index)),b[h]=b[h]||n&&a[3]&&e[h]||"",a[4]&&(b[h]=b[h].toLowerCase())):t=a(t,b);r&&(b.query=r(b.query)),n&&e.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==e.pathname)&&(b.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,o=r[n-1],i=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(i=!0),r.splice(n,1),s--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(b.pathname,e.pathname)),"/"!==b.pathname.charAt(0)&&y(b.protocol)&&(b.pathname="/"+b.pathname),o(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(u=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,u),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(u+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&y(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}w.prototype={set:function(t,e,r){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||c.parse)(e)),n[t]=e;break;case"port":n[t]=e,o(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(e){var i="pathname"===t?"/":"#";n[t]=e.charAt(0)!==i?i+e:e}else n[t]=e;break;case"username":case"password":n[t]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(n.username=e.slice(0,s),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=e.slice(s+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(e))}for(var a=0;a<v.length;a++){var l=v[a];l[4]&&(n[l[1]]=n[l[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin="file:"!==n.protocol&&y(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(t){t&&"function"==typeof t||(t=c.stringify);var e,r=this,n=r.host,o=r.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var i=o+(r.protocol&&r.slashes||y(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&y(r.protocol)&&!n&&"/"!==r.pathname&&(i+="@"),":"===n[n.length-1]&&(n+=":"),i+=n+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(i+=r.hash),i}},w.extractProtocol=E,w.location=m,w.trimLeft=d,w.qs=c;var b=w;function S(t,e){setTimeout((function(e){return t.call(e)}),4,e)}function O(t,e){void 0!==n&&console[t].call(null,e)}function C(t,e){void 0===t&&(t=[]);var r=[];return t.forEach((function(t){e(t)||r.push(t)})),r}var _=function(){this.listeners={}};function k(t){var e=t.indexOf("?");return e>=0?t.slice(0,e):t}_.prototype.addEventListener=function(t,e){"function"==typeof e&&(Array.isArray(this.listeners[t])||(this.listeners[t]=[]),0===function(t,e){void 0===t&&(t=[]);var r=[];return t.forEach((function(t){e(t)&&r.push(t)})),r}(this.listeners[t],(function(t){return t===e})).length&&this.listeners[t].push(e))},_.prototype.removeEventListener=function(t,e){var r=this.listeners[t];this.listeners[t]=C(r,(function(t){return t===e}))},_.prototype.dispatchEvent=function(t){for(var e=this,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var o=t.type,i=this.listeners[o];return!!Array.isArray(i)&&(i.forEach((function(n){r.length>0?n.apply(e,r):n.call(e,t)})),!0)};var M=function(){this.urlMap={}};M.prototype.attachWebSocket=function(t,e){var r=k(e),n=this.urlMap[r];if(n&&n.server&&-1===n.websockets.indexOf(t))return n.websockets.push(t),n.server},M.prototype.addMembershipToRoom=function(t,e){var r=this.urlMap[k(t.url)];r&&r.server&&-1!==r.websockets.indexOf(t)&&(r.roomMemberships[e]||(r.roomMemberships[e]=[]),r.roomMemberships[e].push(t))},M.prototype.attachServer=function(t,e){var r=k(e);if(!this.urlMap[r])return this.urlMap[r]={server:t,websockets:[],roomMemberships:{}},t},M.prototype.serverLookup=function(t){var e=k(t),r=this.urlMap[e];if(r)return r.server},M.prototype.websocketsLookup=function(t,e,r){var n,o=k(t),i=this.urlMap[o];return n=i?i.websockets:[],e&&(n=i.roomMemberships[e]||[]),r?n.filter((function(t){return t!==r})):n},M.prototype.removeServer=function(t){delete this.urlMap[k(t)]},M.prototype.removeWebSocket=function(t,e){var r=k(e),n=this.urlMap[r];n&&(n.websockets=C(n.websockets,(function(e){return e===t})))},M.prototype.removeMembershipFromRoom=function(t,e){var r=this.urlMap[k(t.url)],n=r.roomMemberships[e];r&&null!==n&&(r.roomMemberships[e]=C(n,(function(e){return e===t})))};var R=new M,L=1e3,P=1005,T=1006,N={CONSTRUCTOR_ERROR:"Failed to construct 'WebSocket':",CLOSE_ERROR:"Failed to execute 'close' on 'WebSocket':",EVENT:{CONSTRUCT:"Failed to construct 'Event':",MESSAGE:"Failed to construct 'MessageEvent':",CLOSE:"Failed to construct 'CloseEvent':"}},x=function(){};x.prototype.stopPropagation=function(){},x.prototype.stopImmediatePropagation=function(){},x.prototype.initEvent=function(t,e,r){void 0===t&&(t="undefined"),void 0===e&&(e=!1),void 0===r&&(r=!1),this.type=""+t,this.bubbles=Boolean(e),this.cancelable=Boolean(r)};var I=function(t){function e(e,r){if(void 0===r&&(r={}),t.call(this),!e)throw new TypeError(N.EVENT_ERROR+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(N.EVENT_ERROR+" parameter 2 ('eventInitDict') is not an object.");var n=r.bubbles,o=r.cancelable;this.type=""+e,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!o&&Boolean(o),this.cancelBubble=!1,this.bubbles=!!n&&Boolean(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(x),A=function(t){function e(e,r){if(void 0===r&&(r={}),t.call(this),!e)throw new TypeError(N.EVENT.MESSAGE+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(N.EVENT.MESSAGE+" parameter 2 ('eventInitDict') is not an object");var n=r.bubbles,o=r.cancelable,i=r.data,s=r.origin,a=r.lastEventId,c=r.ports;this.type=""+e,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!o&&Boolean(o),this.canncelBubble=!1,this.bubbles=!!n&&Boolean(n),this.origin=""+s,this.ports=void 0===c?null:c,this.data=void 0===i?null:i,this.lastEventId=""+(a||"")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(x),W=function(t){function e(e,r){if(void 0===r&&(r={}),t.call(this),!e)throw new TypeError(N.EVENT.CLOSE+" 1 argument required, but only 0 present.");if("object"!=typeof r)throw new TypeError(N.EVENT.CLOSE+" parameter 2 ('eventInitDict') is not an object");var n=r.bubbles,o=r.cancelable,i=r.code,s=r.reason,a=r.wasClean;this.type=""+e,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=!!o&&Boolean(o),this.cancelBubble=!1,this.bubbles=!!n&&Boolean(n),this.code="number"==typeof i?parseInt(i,10):0,this.reason=""+(s||""),this.wasClean=!!a&&Boolean(a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(x);function j(t){var e=t.type,r=t.target,n=new I(e);return r&&(n.target=r,n.srcElement=r,n.currentTarget=r),n}function D(t){var e=t.type,r=t.origin,n=t.data,o=t.target,i=new A(e,{data:n,origin:r});return o&&(i.target=o,i.srcElement=o,i.currentTarget=o),i}function U(t){var e=t.code,r=t.reason,n=t.type,o=t.target,i=t.wasClean;i||(i=e===L||e===P);var s=new W(n,{code:e,reason:r,wasClean:i});return o&&(s.target=o,s.srcElement=o,s.currentTarget=o),s}function q(t,e,r){t.readyState=z.CLOSING;var n=R.serverLookup(t.url),o=U({type:"close",target:t.target,code:e,reason:r});S((function(){R.removeWebSocket(t,t.url),t.readyState=z.CLOSED,t.dispatchEvent(o),n&&n.dispatchEvent(o,n)}),t)}function G(t){return"[object Blob]"===Object.prototype.toString.call(t)||t instanceof ArrayBuffer||(t=String(t)),t}var B=new WeakMap;function F(t){if(B.has(t))return B.get(t);var e=new Proxy(t,{get:function(r,n){if("close"===n)return function(t){void 0===t&&(t={});var r=t.code||L,n=t.reason||"";q(e,r,n)};if("send"===n)return function(e){e=G(e),t.dispatchEvent(D({type:"message",data:e,origin:this.url,target:t}))};var o=function(t){return"message"===t?"server::"+t:t};return"on"===n?function(e,r){t.addEventListener(o(e),r)}:"off"===n?function(e,r){t.removeEventListener(o(e),r)}:"target"===n?t:r[n]}});return B.set(t,e),e}var z=function(t){function e(r,n){t.call(this),this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null,this.url=function(t){var e=new b(t),r=e.pathname,n=e.protocol,o=e.hash;if(!t)throw new TypeError(N.CONSTRUCTOR_ERROR+" 1 argument required, but only 0 present.");if(r||(e.pathname="/"),""===n)throw new SyntaxError(N.CONSTRUCTOR_ERROR+" The URL '"+e.toString()+"' is invalid.");if("ws:"!==n&&"wss:"!==n)throw new SyntaxError(N.CONSTRUCTOR_ERROR+" The URL's scheme must be either 'ws' or 'wss'. '"+n+"' is not allowed.");if(""!==o)throw new SyntaxError(N.CONSTRUCTOR_ERROR+" The URL contains a fragment identifier ('"+o+"'). Fragment identifiers are not allowed in WebSocket URLs.");return e.toString()}(r),n=function(t){if(void 0===t&&(t=[]),!Array.isArray(t)&&"string"!=typeof t)throw new SyntaxError(N.CONSTRUCTOR_ERROR+" The subprotocol '"+t.toString()+"' is invalid.");"string"==typeof t&&(t=[t]);var e=t.map((function(t){return{count:1,protocol:t}})).reduce((function(t,e){return t[e.protocol]=(t[e.protocol]||0)+e.count,t}),{}),r=Object.keys(e).filter((function(t){return e[t]>1}));if(r.length>0)throw new SyntaxError(N.CONSTRUCTOR_ERROR+" The subprotocol '"+r[0]+"' is duplicated.");return t}(n),this.protocol=n[0]||"",this.binaryType="blob",this.readyState=e.CONNECTING;var o=F(this),i=R.attachWebSocket(o,this.url);S((function(){if(this.readyState===e.CONNECTING)if(i)if(i.options.verifyClient&&"function"==typeof i.options.verifyClient&&!i.options.verifyClient())this.readyState=e.CLOSED,O("error","WebSocket connection to '"+this.url+"' failed: HTTP Authentication failed; no valid credentials available"),R.removeWebSocket(o,this.url),this.dispatchEvent(j({type:"error",target:this})),this.dispatchEvent(U({type:"close",target:this,code:L}));else{if(i.options.selectProtocol&&"function"==typeof i.options.selectProtocol){var t=i.options.selectProtocol(n),r=""!==t,s=-1!==n.indexOf(t);if(r&&!s)return this.readyState=e.CLOSED,O("error","WebSocket connection to '"+this.url+"' failed: Invalid Sub-Protocol"),R.removeWebSocket(o,this.url),this.dispatchEvent(j({type:"error",target:this})),void this.dispatchEvent(U({type:"close",target:this,code:L}));this.protocol=t}this.readyState=e.OPEN,this.dispatchEvent(j({type:"open",target:this})),i.dispatchEvent(j({type:"connection"}),o)}else this.readyState=e.CLOSED,this.dispatchEvent(j({type:"error",target:this})),this.dispatchEvent(U({type:"close",target:this,code:L})),O("error","WebSocket connection to '"+this.url+"' failed")}),this)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={onopen:{},onmessage:{},onclose:{},onerror:{}};return r.onopen.get=function(){return this._onopen},r.onmessage.get=function(){return this._onmessage},r.onclose.get=function(){return this._onclose},r.onerror.get=function(){return this._onerror},r.onopen.set=function(t){this.removeEventListener("open",this._onopen),this._onopen=t,this.addEventListener("open",t)},r.onmessage.set=function(t){this.removeEventListener("message",this._onmessage),this._onmessage=t,this.addEventListener("message",t)},r.onclose.set=function(t){this.removeEventListener("close",this._onclose),this._onclose=t,this.addEventListener("close",t)},r.onerror.set=function(t){this.removeEventListener("error",this._onerror),this._onerror=t,this.addEventListener("error",t)},e.prototype.send=function(t){var r=this;if(this.readyState===e.CONNECTING)throw new Error("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state");var n=D({type:"server::message",origin:this.url,data:G(t)}),o=R.serverLookup(this.url);o&&S((function(){r.dispatchEvent(n,t)}),o)},e.prototype.close=function(t,r){if(void 0!==t&&("number"!=typeof t||1e3!==t&&(t<3e3||t>4999)))throw new TypeError(N.CLOSE_ERROR+" The code must be either 1000, or between 3000 and 4999. "+t+" is neither.");if(void 0!==r&&(n=r,o=encodeURIComponent(n).match(/%[89ABab]/g),n.length+(o?o.length:0)>123))throw new SyntaxError(N.CLOSE_ERROR+" The message must not be greater than 123 bytes.");var n,o;if(this.readyState!==e.CLOSING&&this.readyState!==e.CLOSED){var i=F(this);this.readyState===e.CONNECTING?function(t,e,r){t.readyState=z.CLOSING;var n=R.serverLookup(t.url),o=U({type:"close",target:t.target,code:e,reason:r,wasClean:!1}),i=j({type:"error",target:t.target});S((function(){R.removeWebSocket(t,t.url),t.readyState=z.CLOSED,t.dispatchEvent(i),t.dispatchEvent(o),n&&n.dispatchEvent(o,n)}),t)}(i,t||T,r):q(i,t||P,r)}},Object.defineProperties(e.prototype,r),e}(_);z.CONNECTING=0,z.prototype.CONNECTING=z.CONNECTING,z.OPEN=1,z.prototype.OPEN=z.OPEN,z.CLOSING=2,z.prototype.CLOSING=z.CLOSING,z.CLOSED=3,z.prototype.CLOSED=z.CLOSED;var V=function(t){function e(r,n){var o=this;void 0===r&&(r="socket.io"),void 0===n&&(n=""),t.call(this),this.binaryType="blob";var i=new b(r);i.pathname||(i.pathname="/"),this.url=i.toString(),this.readyState=e.CONNECTING,this.protocol="",this.target=this,"string"==typeof n||"object"==typeof n&&null!==n?this.protocol=n:Array.isArray(n)&&n.length>0&&(this.protocol=n[0]);var s=R.attachWebSocket(this,this.url);S((function(){s?(this.readyState=e.OPEN,s.dispatchEvent(j({type:"connection"}),s,this),s.dispatchEvent(j({type:"connect"}),s,this),this.dispatchEvent(j({type:"connect",target:this}))):(this.readyState=e.CLOSED,this.dispatchEvent(j({type:"error",target:this})),this.dispatchEvent(U({type:"close",target:this,code:L})),O("error","Socket.io connection to '"+this.url+"' failed"))}),this),this.addEventListener("close",(function(t){o.dispatchEvent(U({type:"disconnect",target:t.target,code:t.code}))}))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={broadcast:{}};return e.prototype.close=function(){if(this.readyState===e.OPEN){var t=R.serverLookup(this.url);return R.removeWebSocket(this,this.url),this.readyState=e.CLOSED,this.dispatchEvent(U({type:"close",target:this,code:L})),t&&t.dispatchEvent(U({type:"disconnect",target:this,code:L}),t),this}},e.prototype.disconnect=function(){return this.close()},e.prototype.emit=function(t){for(var r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];if(this.readyState!==e.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var o=D({type:t,origin:this.url,data:r}),i=R.serverLookup(this.url);return i&&i.dispatchEvent.apply(i,[o].concat(r)),this},e.prototype.send=function(t){return this.emit("message",t),this},r.broadcast.get=function(){if(this.readyState!==e.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var t=this,r=R.serverLookup(this.url);if(!r)throw new Error("SocketIO can not find a server at the specified URL ("+this.url+")");return{emit:function(e,n){return r.emit(e,n,{websockets:R.websocketsLookup(t.url,null,t)}),t},to:function(e){return r.to(e,t)},in:function(e){return r.in(e,t)}}},e.prototype.on=function(t,e){return this.addEventListener(t,e),this},e.prototype.off=function(t,e){this.removeEventListener(t,e)},e.prototype.hasListeners=function(t){var e=this.listeners[t];return!!Array.isArray(e)&&!!e.length},e.prototype.join=function(t){R.addMembershipToRoom(this,t)},e.prototype.leave=function(t){R.removeMembershipFromRoom(this,t)},e.prototype.to=function(t){return this.broadcast.to(t)},e.prototype.in=function(){return this.to.apply(null,arguments)},e.prototype.dispatchEvent=function(t){for(var e=this,r=[],n=arguments.length-1;n-- >0;)r[n]=arguments[n+1];var o=t.type,i=this.listeners[o];if(!Array.isArray(i))return!1;i.forEach((function(n){r.length>0?n.apply(e,r):n.call(e,t.data?t.data:t)}))},Object.defineProperties(e.prototype,r),e}(_);V.CONNECTING=0,V.OPEN=1,V.CLOSING=2,V.CLOSED=3;var $=function(t,e){return new V(t,e)};$.connect=function(t,e){return $(t,e)};function K(){return"undefined"!=typeof window?window:"object"==typeof n&&"object"==typeof r.g?r.g:this}var Z={mock:!0,verifyClient:null,selectProtocol:null},H=function(t){function e(e,r){void 0===r&&(r=Z),t.call(this);var n=new b(e);if(n.pathname||(n.pathname="/"),this.url=n.toString(),this.originalWebSocket=null,!R.attachServer(this,this.url))throw this.dispatchEvent(j({type:"error"})),new Error("A mock server is already listening on this url");this.options=Object.assign({},Z,r),this.options.mock&&this.mockWebsocket()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.mockWebsocket=function(){var t=K();this.originalWebSocket=t.WebSocket,t.WebSocket=z},e.prototype.restoreWebsocket=function(){var t=K();null!==this.originalWebSocket&&(t.WebSocket=this.originalWebSocket),this.originalWebSocket=null},e.prototype.stop=function(t){void 0===t&&(t=function(){}),this.options.mock&&this.restoreWebsocket(),R.removeServer(this.url),"function"==typeof t&&t()},e.prototype.on=function(t,e){this.addEventListener(t,e)},e.prototype.off=function(t,e){this.removeEventListener(t,e)},e.prototype.close=function(t){void 0===t&&(t={});var e=t.code,r=t.reason,n=t.wasClean,o=R.websocketsLookup(this.url);R.removeServer(this.url),o.forEach((function(t){t.readyState=z.CLOSED,t.dispatchEvent(U({type:"close",target:t.target,code:e||L,reason:r||"",wasClean:n}))})),this.dispatchEvent(U({type:"close"}),this)},e.prototype.emit=function(t,e,r){var n=this;void 0===r&&(r={});var o,i=r.websockets;i||(i=R.websocketsLookup(this.url)),"object"!=typeof r||arguments.length>3?(e=Array.prototype.slice.call(arguments,1,arguments.length),o=e.map((function(t){return G(t)}))):o=G(e),i.forEach((function(r){var i=r instanceof V?e:o;Array.isArray(i)?r.dispatchEvent.apply(r,[D({type:t,data:i,origin:n.url,target:r.target})].concat(i)):r.dispatchEvent(D({type:t,data:i,origin:n.url,target:r.target}))}))},e.prototype.clients=function(){return R.websocketsLookup(this.url)},e.prototype.to=function(t,e,r){var n=this;void 0===r&&(r=[]);var o=this,i=r.concat(R.websocketsLookup(this.url,t,e)).reduce((function(t,e){return t.indexOf(e)>-1?t:t.concat(e)}),[]);return{to:function(t,e){return n.to.call(n,t,e,i)},emit:function(t,e){o.emit(t,e,{websockets:i})}}},e.prototype.in=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this.to.apply(null,t)},e.prototype.simulate=function(t){var e=R.websocketsLookup(this.url);"error"===t&&e.forEach((function(t){t.readyState=z.CLOSED,t.dispatchEvent(j({type:"error",target:t.target}))}))},e}(_);H.of=function(t){return new H(t)};var J=H,Q=z,X=$;t.Server=J,t.WebSocket=Q,t.SocketIO=X,Object.defineProperty(t,"__esModule",{value:!0})}(e)}}]);