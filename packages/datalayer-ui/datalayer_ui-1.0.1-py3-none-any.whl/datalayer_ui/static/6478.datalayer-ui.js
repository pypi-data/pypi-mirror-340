"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[6478],{86478:(e,t,n)=>{n.r(t),n.d(t,{CellEdit:()=>pe,default:()=>me});var s=n(9387),a=n(45222),i=n(20568),r=n(79026),o=n(97096),l=n(98754),c=n(99180),d=n(38621),u=n(17810),h=n(23530),p=n(97734),m=n(53850),g=n(50906),_=n(47785),x=n(55388),C=n(68914),y=n(18683);const k=()=>{const{getSpaceDatasets:e,refreshSpaceDatasets:t}=(0,m.E)(),n=(0,g.mt)(),a=(0,x.LC)(),i=n.layout().space,r=n.layout().organization,[o,l]=(0,s.useState)(e()),c=o.filter((e=>e.public)),u=o.filter((e=>!e.public));return(0,s.useEffect)((()=>{i&&t(i,r).then((t=>{t.success&&l(e())}))}),[i]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(_.l,{showDividers:!0,role:"menu",children:[(0,y.jsxs)(_.l.Group,{children:[(0,y.jsx)(_.l.GroupHeading,{children:"My public datasets"}),c.map((e=>(0,y.jsxs)(_.l.Item,{onClick:t=>{t.preventDefault(),a.setDataset("cell",e)},children:[(0,y.jsx)(_.l.LeadingVisual,{children:(0,y.jsx)(d.bN0,{})}),e.name,(0,y.jsx)(_.l.Description,{children:(0,C.b)(e.description)})]},e.id))),0===c.length&&(0,y.jsx)(_.l.Item,{disabled:!0,children:"No public dataset"})]}),(0,y.jsxs)(_.l.Group,{children:[(0,y.jsx)(_.l.GroupHeading,{children:"My private datasets"}),u.map((e=>(0,y.jsxs)(_.l.Item,{onClick:t=>{t.preventDefault(),a.setDataset("cell",e)},children:[(0,y.jsx)(_.l.LeadingVisual,{children:(0,y.jsx)(d.bN0,{})}),e.name,(0,y.jsx)(_.l.Description,{children:(0,C.b)(e.description)})]},e.id))),0===u.length&&(0,y.jsx)(_.l.Item,{disabled:!0,children:"No private dataset"})]})]})})};var v=n(88996),w=n(48371),f=n(64664),j=n(92985),S=n(85545),b=n(87237),I=n(27199),K=n(76818),A=n(88670);const M=e=>{const{cell:t}=e,n=((0,h.Z)(),t.outputshotUrl||t.outputshotData);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(A.Zp,{border:!0,rounded:"medium",shadow:"medium",sx:{maxWidth:360},children:[(0,y.jsx)(A.Zp.Header,{title:"Cell",description:(0,C.b)(t.name,100)}),(0,y.jsx)(A.Zp.Image,{height:200,image:n}),(0,y.jsx)(A.Zp.Content,{children:(0,y.jsx)(K.A,{color:"fg.muted",children:(0,C.b)(t.description,100)})})]})})},N=(0,j.t)((0,S.Y)((()=>Promise.all([n.e(7583),n.e(754)]).then(n.bind(n,60754))))),D=()=>{const{cell:e,update:t}=(0,b.Xp)();if(!e)return(0,y.jsx)(y.Fragment,{});const{updateCell:n}=(0,m.E)(),{space:a,showBackdrop:i,triggerItemsRefresh:r,hideBackdrop:o}=(0,I.l5)(),{enqueueToast:d}=(0,p.d)(),[u,h]=(0,s.useState)(!1),[g,_]=(0,s.useState)({name:e.name,description:e.description}),[x,C]=(0,s.useState)({name:!0,description:!0});return(0,s.useEffect)((()=>{C({...x,name:void 0===g.name?void 0:g.name.length>2,description:void 0===g.description?void 0:g.description.length>2})}),[g]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(l.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[(0,y.jsxs)(l.A,{sx:{label:{marginTop:2}},children:[(0,y.jsxs)(v.A,{children:[(0,y.jsx)(v.A.Label,{children:"Name"}),(0,y.jsx)(w.A,{block:!0,value:g.name,onChange:e=>{_((t=>({...t,name:e.target.value}))),t({name:e.target.value})}}),!1===x.name&&(0,y.jsx)(v.A.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,y.jsxs)(v.A,{children:[(0,y.jsx)(v.A.Label,{children:"Description"}),(0,y.jsx)(f.Ay,{block:!0,value:g.description,onChange:e=>{_((t=>({...t,description:e.target.value}))),t({description:e.target.value})}}),!1===x.description&&(0,y.jsx)(v.A.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,y.jsx)(v.A,{sx:{marginTop:3},children:(0,y.jsxs)(l.A,{display:"flex",children:[(0,y.jsx)(c.Q,{variant:"primary",disabled:u||!x.name||!x.description,onClick:()=>{e?.outputshotData.length>3e5?d(`Output screenshot is too large (actual size is ${e?.outputshotData.length}, the maximum allowed is 300000)`,{variant:"error"}):(i(),h(!0),n({id:e?.id,name:e?.name,description:e?.description,source:e.source,outputshotUrl:e.outputshotUrl,outputshotData:e?.outputshotUrl?void 0:e?.outputshotData,spaceId:a?.id}).then((n=>{if(h(!1),n.success){const n={...e,public:e.public,description:e.description,source:e.source,outputshotUrl:e.outputshotUrl,outputshotData:e.outputshotData};r(),t(n),d("The cell is successfully updated.",{variant:"success"})}})).finally((()=>{h(!1),o()})))},children:u?"Updating cell...":"Update cell"}),(0,y.jsx)(l.A,{ml:3,children:(0,y.jsx)(N,{})})]})})]}),(0,y.jsx)(l.A,{ml:3,children:(0,y.jsx)(M,{cell:e})})]})})};var E=n(55881),T=n(42968),B=n(34417),L=n(50059),z=n(14809),O=n(38921),R=n(16950),F=n(80578),P=n(99650),J=n(53294),U=n(63527),G=n(89895),$=n(30574),Q=n(62097),V=n(37706),H=n(71784),Z=n(89492),W=n(67004),X=n(53054),Y=n(89915),q=n(97789),ee=n(20492),te=n(75987),ne=n(85112),se=n(49237),ae=n(89462),ie=n(5190),re=n(91923);const oe="completer:invoke",le="completer:select";var ce=n(19326);class de{_id;_outputs;_cell;_kernel;_panel;_sessionContext;_type;constructor(e){const{id:t,type:n,source:s,outputs:a,serverSettings:i,kernel:r,boxOptions:o}=e;this._id=t,this._outputs=a,this._kernel=r,this._type=n,this.setupCell(n,s,i,r,o)}setupCell(e="code",t,s,a,i){const r=a.kernelManager??new q.KernelManager({serverSettings:s}),o=a.sessionManager??new q.SessionManager({serverSettings:s,kernelManager:r}),l=a.kernelSpecManager??new q.KernelSpecManager({serverSettings:s}),c=a?{id:a.id,shouldStart:!1,autoStartDefault:!1,shutdownOnDispose:!1}:{name:"python",shouldStart:!0,autoStartDefault:!0,shutdownOnDispose:!0};this._sessionContext=new F.I({name:a?.path,path:a?.path,sessionManager:o,specsManager:l,type:"python",kernelPreference:c}),this._sessionContext._initialize=async()=>{const e=this._sessionContext.sessionManager;await e.ready,await e.refreshRunning();const t=(0,O.I6)(e.running(),(e=>e.kernel?.id===this._kernel.id));if(t)try{const n=e.connectTo({model:t,kernelConnectionOptions:{handleComms:!0}});this._sessionContext._handleNewSession(n)}catch(e){return this._sessionContext._handleSessionError(e),Promise.reject(e)}return await this._sessionContext._startIfNecessary()};const d=new G.k8;for(const e of G.k8.getDefaultThemes())d.addTheme(e);const u=new G.T9;for(const e of G.T9.getDefaultLanguages())u.addLanguage(e);u.addLanguage({name:"ipythongfm",mime:"text/x-ipythongfm",load:async()=>(await Promise.all([n.e(6636),n.e(9946),n.e(2899),n.e(5949)]).then(n.bind(n,15949))).markdown({codeLanguages:e=>u.findBest(e)})});const h=new G.mN(u),p=new R.J;document.addEventListener("keydown",(e=>{const t=document.activeElement;t&&t.closest(".dla-Jupyter-Cell")===this._cell.node&&p.processKeydownEvent(e)}),!0);const m=new X.K({initialFactories:Y.dn,latexTypesetter:new $.p,markdownParser:(0,re.A)(u)}),g=new se.y({loader:ie.l});m.addFactory({safe:!1,mimeTypes:[ae.a],createRenderer:e=>new ae.u(e,g)},0),g.registerWithKernel(a.connection);const _=new G.Ez({extensions:(()=>{const e=new G.AG;for(const t of G.AG.getDefaultExtensions({themes:d}))e.addExtension(t);return e.addExtension({name:"shared-model-binding",factory:e=>{const t=e.model.sharedModel;return G.AG.createImmutableExtension((0,G.rX)({ytext:t.ysource,undoManager:t.undoManager??void 0}))}}),e})(),languages:u}),x=(0,te.MQ)({cell_type:e,source:t,outputs:this._outputs,metadata:{}}),C=new E.fh.ContentFactory({editorFactory:_.newInlineEditor.bind(_)});"code"===e?this._cell=new E.Yr({rendermime:m,model:new U.DJ({sharedModel:x}),contentFactory:C}):"markdown"===e&&(this._cell=new E.KI({rendermime:m,model:new U.Xr({sharedModel:x}),contentFactory:C})),this._cell.addClass("dla-Jupyter-Cell"),this._cell.initializeState(),"markdown"===this._type&&(this._cell.rendered=!1),this._sessionContext.kernelChanged.connect(((e,t)=>{const n=t.newValue;console.log("Current Jupyter Kernel Connection",n),n&&!n.handleComms&&(console.warn("Jupyter Kernel Connection does not handle Comms",n.id),n.handleComms=!0,console.log("Jupyter Kernel Connection is updated to enforce Comms support",n.handleComms)),g.registerWithKernel(n)})),this._sessionContext.kernelChanged.connect((()=>{this._sessionContext.session?.kernel?.info.then((e=>{if("code"===this._type){const t=e.language_info,n=h.getMimeTypeByLanguage(t);this._cell.model&&(this._cell.model.mimeType=n)}}))}));const y=this._cell.editor,k=new Q.X,v=new V.A({editor:y,model:k}),w=new H.G,f=new Z.C({context:{widget:this._cell,editor:y,session:this._sessionContext.session},providers:[w],timeout:1e3}),j=new W.$({completer:v,reconciliator:f});this._sessionContext.ready.then((()=>{const e=new H.G;j.reconciliator=new Z.C({context:{widget:this._cell,editor:y,session:this._sessionContext.session},providers:[e],timeout:1e3})})),this._cell.ready.then((()=>{j.editor=this._cell&&this._cell.editor})),((e,t,n,s)=>{e.addCommand(oe,{label:"Completer: Invoke",execute:()=>n.invoke()}),e.addCommand(le,{label:"Completer: Select",execute:()=>n.completer.selectActive()}),e.addCommand("run:cell",{execute:()=>{t instanceof E.Yr?s.execute():t instanceof E.KI&&(t.rendered=!0)}}),e.addKeyBinding({selector:".jp-InputArea-editor.jp-mod-completer-enabled",keys:["Tab"],command:oe}),e.addKeyBinding({selector:".jp-InputArea-editor",keys:["Shift Enter"],command:"run:cell"}),[{selector:".jp-InputArea-editor.jp-mod-completer-active",keys:["Enter"],command:le}].map((t=>e.addKeyBinding(t)))})(p,this._cell,j,this),v.hide(),v.addClass("jp-Completer-Cell"),z.x0.attach(v,document.body);const S=new P.M7;S.addItem("spacer",P.M7.createSpacerItem());const b=new J.IB({icon:ee.J7,onClick:()=>{"code"===this._type?this.execute():"markdown"===this._type&&(this._cell.rendered=!0)},tooltip:"Run"});S.addItem("run",b),S.addItem("interrupt",P.M7.createInterruptButton(this._sessionContext)),S.addItem("restart",P.M7.createRestartButton(this._sessionContext)),S.addItem("status",P.M7.createKernelStatusItem(this._sessionContext)),"code"===this._type&&(this._cell.outputsScrolled=!1),this._cell.activate(),this._panel=new z.e6,this._panel.direction="top-to-bottom",this._panel.spacing=0,!1!==i?.showToolbar&&this._panel.addWidget(S),this._panel.addWidget(this._cell),!1!==i?.showToolbar&&z.e6.setStretch(S,0),z.e6.setStretch(this._cell,1),window.addEventListener("resize",(()=>{this._panel.update()})),this._panel.update()}get panel(){return this._panel}get cell(){return this._cell}get sessionContext(){return this._sessionContext}get kernel(){return this._kernel}execute=()=>{"code"===this._type?this._execute(this._cell):"markdown"===this._type&&(this._cell.rendered=!0)};async _execute(e,t){ce.vw.getState().setIsExecuting(this._id,!0);const n=e.model,s=n.sharedModel.getSource();if(!s.trim()||!this.kernel)return n.sharedModel.transact((()=>{n.clearExecution()}),!1),ce.vw.getState().setIsExecuting(this._id,!1),new Promise((()=>{}));const a={cellId:n.sharedModel.getId()};t={...n.metadata,...t,...a};const{recordTiming:i}=t;let r;n.sharedModel.transact((()=>{n.clearExecution(),e.outputHidden=!1}),!1),e.setPrompt("*"),n.trusted=!0;try{const a=(0,ne.g)(this._id,s,e.outputArea,this._kernel,t);if(i){const t=e=>{let t;switch(e.header.msg_type){case"status":t=`status.${e.content.execution_state}`;break;case"execute_input":t="execute_input";break;default:return!0}const s=e.header.date||(new Date).toISOString(),a=Object.assign({},n.getMetadata("execution"));return a[`iopub.${t}`]=s,n.setMetadata("execution",a),!0};e.outputArea.future.registerMessageHook(t)}else n.deleteMetadata("execution");r=e.outputArea.future;const o=await a;if(n.executionCount=o.content.execution_count,i){const e=Object.assign({},n.getMetadata("execution")),t=o.metadata.started;t&&(e["shell.execute_reply.started"]=t);const s=o.header.date;e["shell.execute_reply"]=s||(new Date).toISOString(),n.setMetadata("execution",e)}return ce.vw.getState().setIsExecuting(this._id,!1),o}catch(t){if(ce.vw.getState().setIsExecuting(this._id,!1),r&&!e.isDisposed&&e.outputArea.future===r&&(e.setPrompt(""),i&&r.isDisposed)){const e=Object.assign({},n.getMetadata("execution"));e.execution_failed=(new Date).toISOString(),n.setMetadata("execution",e)}throw t}}}const ue=e=>{const{autoStart:t,outputs:n=[],showToolbar:a,source:i="",startDefaultKernel:r,type:o,kernel:c}=e,{defaultKernel:d,serverSettings:u}=(0,T.PD)({startDefaultKernel:r}),[h]=(0,s.useState)(e.id||(0,B.YG)()),[p,m]=(0,s.useState)(),g=(0,ce.Ui)();return(0,s.useEffect)((()=>{const e=c||d;h&&u&&e&&e.ready.then((()=>{const s=new de({id:h,type:o,source:i,outputs:n,serverSettings:u,kernel:e,boxOptions:{showToolbar:a}});g.setAdapter(h,s),g.setSource(h,i),(e=>{e.cell.model.contentChanged.connect(((e,t)=>{g.setSource(h,e.sharedModel.getSource())})),e.cell instanceof E.Yr&&e.cell.outputArea.outputLengthChanged?.connect(((e,t)=>{g.setOutputsCount(h,t)})),e.sessionContext.initialize().then((()=>{t&&e.cell.model&&e.execute()})),e.sessionContext.kernelChanged.connect((()=>{e.sessionContext.session?.kernel?.info.then((e=>{g.setKernelSessionAvailable(h,!0)}))}))})(s),m(s);const r=e=>{let t=e.target;for(;t&&!t.classList.contains("jp-MarkdownOutput");)t=t.parentElement;t&&t.classList.contains("jp-MarkdownOutput")&&(s.cell.rendered=!1)};return document.addEventListener("dblclick",r),()=>{document.removeEventListener("dblclick",r)}}))}),[i,d,c,u]),p?(0,y.jsx)(l.A,{sx:{"& .dla-Jupyter-Cell":{position:"relative !important",contain:"content !important"},"& .jp-Toolbar":{height:"auto !important",position:"relative"},"& .lm-BoxPanel":{position:"relative"},"& .jp-Cell":{position:"relative"},"& .jp-CodeCell":{height:"auto !important",position:"relative"},"& .jp-MarkdownCell":{height:"auto !important",minHeight:"65px",position:"relative"},"& .jp-Cell-outputArea":{paddingBottom:"30px"},"& .jp-CodeMirrorEditor":{cursor:"text !important"}},children:(0,y.jsx)(L.j,{children:p.panel})}):(0,y.jsx)(l.A,{children:"Loading Jupyter Cell..."})};ue.defaultProps={autoStart:!0,source:"",outputs:[],showToolbar:!0,startDefaultKernel:!0,type:"code"};const he=e=>{const{source:t,outputshotRef:n,cellId:s}=e;return(0,y.jsx)(l.A,{ref:n,style:{marginTop:"8px"},children:(0,y.jsx)(ue,{startDefaultKernel:!0,source:t,id:s,autoStart:!0,showToolbar:!1})})},pe=()=>{const{cellId:e}=(0,i.g)();if(!e)return(0,y.jsx)(y.Fragment,{});const t=(0,u.J)(),n=(0,g.mt)(),_=n.layout().space,x=n.cell().cell,C=(0,r.S)(),v=(0,h.Z)(),{enqueueToast:w}=(0,p.d)(),{getCell:f,refreshCell:j,cloneCell:S}=(0,m.E)(),[b,I]=(0,s.useState)(),[K,A]=(0,s.useState)(!1),M=(0,s.useMemo)((()=>(0,s.createRef)()),[]);(0,s.useEffect)((()=>{const t=document.getElementById("right-panel-id"),s=(0,a.createPortal)((0,y.jsx)(k,{}),t);return n.layout().setRightPortal({portal:s,pinned:!1}),j(e).then((t=>{if(t.success){const t=f(e);t?(I(t.source),n.cell().update(t),n.layout().setItem(t),I(t.source)):v("/")}})),()=>{n.layout().setItem(void 0)}}),[e]);const N=(0,s.useCallback)((async s=>{C({title:"Are you sure?",content:"Please confirm you want to clone this cell in your private library."}).then((s=>{s&&S(e).then((e=>{e.success&&(w(e.message,{variant:"success"}),n.layout().triggerItemsRefresh(),v(`/${t?.handle}/library/cells`))}))}))}),[C,x]);return(0,y.jsx)(y.Fragment,{children:x&&b&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(o.z,{role:"header","aria-label":"Cell Editor",children:[(0,y.jsx)(o.z.TitleArea,{variant:"subtitle",children:(0,y.jsx)(o.z.Title,{children:"Cell Editor"})}),(0,y.jsxs)(o.z.Actions,{children:[(0,y.jsx)(l.A,{children:K?(0,y.jsx)(c.Q,{variant:"invisible",size:"small",onClick:()=>A(!1),children:"Hide details"}):(0,y.jsx)(c.Q,{variant:"invisible",size:"small",onClick:()=>A(!0),children:"Show details"})}),(0,y.jsx)(l.A,{ml:1,children:t&&_&&(0,y.jsx)(c.Q,{variant:"invisible",size:"small",leadingVisual:d.Nc$,onClick:N,children:"Clone"})})]})]}),(0,y.jsxs)(l.A,{children:[K&&(0,y.jsx)(l.A,{children:(0,y.jsx)(D,{})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(he,{source:b,outputshotRef:M,cellId:x?.id})})]})]})})},me=pe},99650:(e,t,n)=>{n.d(t,{M7:()=>m});var s,a,i=n(53294),r=n(85181),o=n(20492),l=n(88037),c=n(72879),d=n(14809),u=n(9387),h=n(80578),p=n(69474);!function(e){e.createInterruptButton=function(e,t){const n=(t=t||r.wK).load("jupyterlab");return new i.IB({icon:o.mU,onClick:()=>{var t,n;null===(n=null===(t=e.session)||void 0===t?void 0:t.kernel)||void 0===n||n.interrupt()},tooltip:n.__("Interrupt the kernel")})},e.createRestartButton=function(e,t,n){const s=(n=null!=n?n:r.wK).load("jupyterlab");return new i.IB({icon:o.he,onClick:()=>{(null!=t?t:new h.V({translator:n})).restart(e)},tooltip:s.__("Restart the kernel")})},e.createKernelNameItem=function(e,t,n){const s=l._Q.create(u.createElement(a.KernelNameComponent,{sessionContext:e,dialogs:null!=t?t:new h.V({translator:n}),translator:n}));return s.addClass("jp-KernelName"),s},e.createKernelStatusItem=function(e,t){return new a.KernelStatus(e,t)}}(s||(s={})),function(e){e.KernelNameComponent=function(e){const t=(e.translator||r.wK).load("jupyterlab"),n=()=>{e.dialogs.selectKernel(e.sessionContext)};return u.createElement(l.mE,{signal:e.sessionContext.kernelChanged,initialSender:e.sessionContext},(e=>u.createElement(i.fQ,{className:"jp-Toolbar-kernelName",onClick:n,tooltip:t.__("Switch kernel"),label:null==e?void 0:e.kernelDisplayName})))};class t extends d.x0{constructor(e,t){super(),this.translator=t||r.wK,this._trans=this.translator.load("jupyterlab"),this.addClass("jp-Toolbar-kernelStatus"),this._statusNames=(0,p._)(this.translator),this._onStatusChanged(e),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onStatusChanged,this)}_onStatusChanged(e){if(this.isDisposed)return;const t=e.kernelDisplayStatus,n={container:this.node,title:this._trans.__("Kernel %1",this._statusNames[t]||t),stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"};c.Tl.remove(this.node),"busy"===t||"starting"===t||"terminating"===t||"restarting"===t||"initializing"===t?o.sF.element(n):"connecting"===t||"disconnected"===t||"unknown"===t?o.KN.element(n):o.Rt.element(n)}}e.KernelStatus=t}(a||(a={}));class m extends i.M7{}!function(e){e.createInterruptButton=s.createInterruptButton,e.createKernelNameItem=s.createKernelNameItem,e.createKernelStatusItem=s.createKernelStatusItem,e.createRestartButton=s.createRestartButton,e.createSpacerItem=i.M7.createSpacerItem}(m||(m={}))},69474:(e,t,n)=>{n.d(t,{_:()=>l,s:()=>d});var s=n(62939),a=n(85181),i=n(88037),r=n(98238),o=n(9387);function l(e){const t=(e=e||a.wK).load("jupyterlab");return{unknown:t.__("Unknown"),starting:t.__("Starting"),idle:t.__("Idle"),busy:t.__("Busy"),terminating:t.__("Terminating"),restarting:t.__("Restarting"),autorestarting:t.__("Autorestarting"),dead:t.__("Dead"),connected:t.__("Connected"),connecting:t.__("Connecting"),disconnected:t.__("Disconnected"),initializing:t.__("Initializing"),"":""}}function c(e){const t=(e.translator||a.wK).load("jupyterlab");let n="";return e.status&&(n=` | ${e.status}`),o.createElement(s.pC,{onClick:e.handleClick,source:`${e.kernelName}${n}`,title:t.__("Change kernel for %1",e.activityName)})}class d extends i.QX{constructor(e,t){super(new d.Model(t)),this.translator=t||a.wK,this._handleClick=e.onClick,this.addClass("jp-mod-highlighted")}render(){return null===this.model?null:o.createElement(c,{status:this.model.status,kernelName:this.model.kernelName,activityName:this.model.activityName,handleClick:this._handleClick,translator:this.translator})}}!function(e){class t extends i.AF{constructor(e){super(),this._activityName="",this._kernelName="",this._kernelStatus="",this._sessionContext=null,e=null!=e?e:a.wK,this._trans=e.load("jupyterlab"),this._statusNames=l(e)}get kernelName(){return this._kernelName}get status(){return this._kernelStatus?this._statusNames[this._kernelStatus]:void 0}get activityName(){return this._activityName}set activityName(e){this._activityName!==e&&(this._activityName=e,this.stateChanged.emit())}get sessionContext(){return this._sessionContext}set sessionContext(e){var t,n,s,a;null===(t=this._sessionContext)||void 0===t||t.statusChanged.disconnect(this._onKernelStatusChanged,this),null===(n=this._sessionContext)||void 0===n||n.connectionStatusChanged.disconnect(this._onKernelStatusChanged,this),null===(s=this._sessionContext)||void 0===s||s.kernelChanged.disconnect(this._onKernelChanged,this);const i=this._getAllState();this._sessionContext=e,this._kernelStatus=null==e?void 0:e.kernelDisplayStatus,this._kernelName=null!==(a=null==e?void 0:e.kernelDisplayName)&&void 0!==a?a:this._trans.__("No Kernel"),null==e||e.statusChanged.connect(this._onKernelStatusChanged,this),null==e||e.connectionStatusChanged.connect(this._onKernelStatusChanged,this),null==e||e.kernelChanged.connect(this._onKernelChanged,this),this._triggerChange(i,this._getAllState())}_onKernelStatusChanged(){var e;this._kernelStatus=null===(e=this._sessionContext)||void 0===e?void 0:e.kernelDisplayStatus,this.stateChanged.emit(void 0)}_onKernelChanged(e,t){var n;const s=this._getAllState();this._kernelStatus=null===(n=this._sessionContext)||void 0===n?void 0:n.kernelDisplayStatus,this._kernelName=e.kernelDisplayName,this._triggerChange(s,this._getAllState())}_getAllState(){return[this._kernelName,this._kernelStatus,this._activityName]}_triggerChange(e,t){r.JSONExt.deepEqual(e,t)&&this.stateChanged.emit(void 0)}}e.Model=t}(d||(d={}))}}]);