[taitale_env]

runtime = container
engine = docker
image = docker.io/csirocass/askapsoft
tag = 1.17.6-openmpi4
workload_manager = mpi
dirty = False
user_defaults = True
dryrun = False
ipy = False

[mpi]
workload_exec = mpiexec -n {workers} {cmd}

[slurm]
workload_exec = srun --nodes={nodes} --ntasks={workers} {cmd}

[native]
exec = {workload_exec} > {logfile}{pipestderr}

[container]
exec = {engine} run --rm -w /home/yanda --user $UID:$GID -v $PWD:/home/yanda/ {image}:{tag} {workload_exec} > {logfile}{pipestderr}
