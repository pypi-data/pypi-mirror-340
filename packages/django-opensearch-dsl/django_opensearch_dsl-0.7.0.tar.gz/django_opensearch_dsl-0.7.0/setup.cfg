[tox:tox]
distshare = {homedir}/.tox/distshare
	envlist = py{39,310,311,312,313}-django{42,50,51,52}-opensearch{10,20}
skipsdist = true
skip_missing_interpreters = true
indexserver = 
	pypi = https://pypi.python.org/simple

[testenv]
setenv = 
	PYTHONPATH = {toxinidir}
	DJANGO_SETTINGS_MODULE = tests.project.settings
	opensearch10: DJANGO_OS_PORT=9210
	opensearch20: DJANGO_OS_PORT=9220
deps = 
	-rrequirements.txt
	-rrequirements_dev.txt
	django42: django>=4.2.0,<4.3.0
	django50: django>=5.0.0,<5.1.0
	django51: django>=5.1.0,<5.2.0
	django52: django>=5.2.0,<6.0.0
	opensearch10: opensearch-py>=2.2.0
	opensearch20: opensearch-py>=2.2.0
commands = 
	python3 manage.py migrate
	coverage run --source=. manage.py test
	coverage report -m
	coverage xml

[pycodestyle]
count = True
max-line-length = 120
max-doc-length = 100
exclude = venv, .tox
ignore = W503, W504, W605, E121, E123, E126, E203, E501

[pydocstyle]
convention = numpy
match_dir = (?!django_dummy_app|project|venv|migrations|tests|\.).*
match = (?!manage).*\.py
add_ignore = D100, D104, D105, D106

[tool:isort]
profile = black
line_length = 120
src_paths = django_opensearch_dsl,tests

[bandit]
targets = django_opensearch_dsl, tests
exclude = venv, .tox
recursive = True
quiet = True
format = custom
msg-template = {abspath}:{line} - {test_id} - {severity} - {msg}

[coverage:report]
exclude_lines = 
	pragma: no cover
	def __repr__
	def __str__
	TYPE_CHECKING
	raise NotImplementedError
	@abstractmethod
	if verbosity
	if verbose
include = 
	django_opensearch_dsl/*
omit = 
	venv/*
	site-packages/*

[coverage:run]
branch = True
source = 
	django_opensearch_dsl

[coverage:html]
title = Django Opensearch DSL's Coverage

[egg_info]
tag_build = 
tag_date = 0

