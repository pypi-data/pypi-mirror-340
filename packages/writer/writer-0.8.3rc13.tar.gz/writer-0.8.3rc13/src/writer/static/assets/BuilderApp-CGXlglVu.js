function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./SharedMoreDropdown-BVO0pMuA.js","./index-EqsSXNCT.js","./index-DtZFmRxE.css","./floating-ui.vue-Dut-ZoDd.js","./SharedMoreDropdown-BWKlox8E.css","./BuilderEmbeddedCodeEditor-D4MkTiTa.js","./BuilderEmbeddedCodeEditor-DiDqfWdt.css","./BuilderSettings-BSESHlMX.js","./instancePath-BsbOTTI8.js","./useComponentDescription-DHempJb9.js","./BaseTransitionSlideFade-Bd4IIrQx.js","./BaseTransitionSlideFade-D8wg9qv6.css","./marked.esm-273vDTCT.js","./BuilderSettings-D2jsj6L8.css","./BuilderSidebar-B_rVEgOY.js","./BuilderSidebar-CmLuYwaS.css","./ComponentRenderer-CfzUdQqw.js","./ComponentRenderer-Cev5uai4.css","./BuilderInstanceTracker-CeMAVd4Q.js","./BuilderInstanceTracker-BECcXNnW.css","./BuilderInsertionOverlay-gN3Qh5-c.js","./BuilderInsertionOverlay-D2XS0ij9.css","./BuilderInsertionLabel-D00JikFQ.js","./BuilderInsertionLabel-_YS5WPfq.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var Ke=(e,n,t)=>{if(!n.has(e))throw TypeError("Cannot "+t)};var he=(e,n,t)=>(Ke(e,n,"read from private field"),t?t.call(e):n.get(e)),Me=(e,n,t)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,t)},Re=(e,n,t,s)=>(Ke(e,n,"write to private field"),s?s.call(e,t):n.set(e,t),t);import{d as F,i as K,a as N,r as q,c as g,o as l,e as p,f as a,x as M,A as O,_ as R,q as I,M as w,N as be,O as Be,P as Je,w as $e,m as me,Q as Ye,R as at,s as x,W as Z,b as A,t as L,S as Oe,T as B,U as Le,k as Te,V as Ie,n as Pe,v as ze,G as Ve,H as ve,X as ot,Y as de,Z as Ne,$ as J,a0 as Se,a1 as le,a2 as ue,a3 as Ue,a4 as lt,a5 as st,a6 as He,E as ae,y as j,z as ie,a7 as it,a8 as rt,a9 as dt,aa as Xe,ab as X,L as Q,ac as De,ad as ut,ae as ct,af as pt,ag as vt,ah as mt,ai as ft,C as yt,aj as _t,ak as ht,al as Ze}from"./index-EqsSXNCT.js";import{B as gt}from"./BaseTransitionSlideFade-Bd4IIrQx.js";import{marked as bt}from"./marked.esm-273vDTCT.js";const wt={class:"BuilderSwitcher"},kt=F({__name:"BuilderSwitcher",setup(e){const n=K(N.builderManager);let t=q(null);const s=c=>{const r=n.getMode();r!=c&&(t.value=c,n.setMode(c),(c=="preview"||r=="blueprints"||c=="blueprints")&&n.setSelection(null))},i=g(()=>n.getMode());return(c,r)=>(l(),p("div",wt,[a("button",{"data-automation-action":"set-mode-ui",class:O({active:i.value=="ui"}),type:"button",onClick:r[0]||(r[0]=_=>s("ui"))},r[3]||(r[3]=[a("i",{class:"icon material-symbols-outlined"}," brush ",-1),M(" UI ")]),2),a("button",{"data-automation-action":"set-mode-blueprints",class:O({active:i.value=="blueprints"}),type:"button",onClick:r[1]||(r[1]=_=>s("blueprints"))},r[4]||(r[4]=[a("i",{class:"icon material-symbols-outlined"},"linked_services",-1),M(" Blueprints ")]),2),a("button",{class:O({active:i.value=="preview"}),"data-automation-action":"set-mode-preview",type:"button",onClick:r[2]||(r[2]=_=>s("preview"))},r[5]||(r[5]=[a("i",{class:"icon material-symbols-outlined"}," preview ",-1),M(" Preview ")]),2)]))}}),Ct=R(kt,[["__scopeId","data-v-ae7e3d97"]]),Bt={class:"BuilderStateExplorer"},$t=F({__name:"BuilderStateExplorer",setup(e){const n=K(N.core);return(t,s)=>(l(),p("div",Bt,[I(be,{data:w(n).userState.value,"enable-copy-to-json":!0,"initial-depth":1,"hide-root":!0},null,8,["data"])]))}}),St=R($t,[["__scopeId","data-v-eafb7b97"]]),Dt=F({__name:"WdsStateDot",props:{state:{type:String,required:!0}},setup(e){return(n,t)=>(l(),p("div",{class:O(["WdsStateDotState",`WdsStateDotState--${e.state}`])},null,2))}}),Qe=R(Dt,[["__scopeId","data-v-4eacfc04"]]);var ce,pe;class Lt{constructor(n){Me(this,ce,void 0);Me(this,pe,void 0);Re(this,ce,n==null?void 0:n.signal),Re(this,pe,(n==null?void 0:n.baseUrl)??window.location.origin)}async fetchApplicationDeployment(n,t){const s=new URL(`/api/template/organization/${n}/application/${t}/deployment`,he(this,pe)),i=await fetch(s,{signal:he(this,ce),credentials:"include"});if(!i.ok)throw Error(await i.text());return i.json()}async publishApplication(n,t,s){if(s===void 0){const _=await this.fetchApplicationDeployment(n,t);s={applicationVersionId:_.applicationVersion.id,applicationVersionDataId:_.applicationVersionData.id}}const i=new URL(`/api/template/organization/${n}/application/${t}/publish`,he(this,pe)),c=await fetch(i,{method:"PUT",body:JSON.stringify(s),signal:he(this,ce),credentials:"include"});if(!c.ok)throw Error(await c.text());return await c.json()}}ce=new WeakMap,pe=new WeakMap;const ge=Be([]);function qe(){function e(t){ge.value=ge.value.filter(s=>s.id!==t)}function n(t){const s=new Date().getTime();ge.value=[...ge.value,{...t,id:s}],t.closable||setTimeout(()=>e(s),t.delayMs??3e3)}return{pushToast:n,removeToast:e,toasts:Je(ge)}}var Tt={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function It(e){const n=Ye(),{pushToast:t}=qe(),s=new AbortController,i=q(!1),c=Be(),r=Be(),_=Tt.VITE_WRITER_BASE_URL??window.location.origin,k=new Lt({signal:s.signal,baseUrl:_}),S=g(()=>e.writerApplication.value!==void 0),m=g(()=>{var C;return Number((C=e.writerApplication.value)==null?void 0:C.organizationId)||void 0}),y=g(()=>{var C;return(C=e.writerApplication.value)==null?void 0:C.id}),v=g(()=>new URL(`/aistudio/organization/${m.value}/agent/${y.value}/deploy`,_)),d=g(()=>{var C;return(C=r.value.applicationVersionData.data)==null?void 0:C.deploymentUrl}),f=g(()=>r.value.lastDeployedAt?new Date(r.value.lastDeployedAt):void 0),o=g(()=>!!(S.value&&r.value)),b=g(()=>{if(r.value!==void 0)return!!(r.value.writer&&r.value.lastDeployedAt)});$e(e.writerApplication,u,{immediate:!0}),me(()=>{document.addEventListener("visibilitychange",async()=>{document.visibilityState==="visible"&&await u()},{signal:s.signal})});async function u(){if(e.writerApplication.value)try{r.value=await k.fetchApplicationDeployment(m.value,y.value)}catch(C){n.error("Failed to fetch deployment information",C),r.value=void 0}}async function h(){if(e.writerApplication.value){if(!b.value){window.open(v.value,"_blank");return}i.value=!0,c.value=void 0;try{await k.publishApplication(m.value,y.value,{applicationVersionId:r.value.applicationVersion.id,applicationVersionDataId:r.value.applicationVersionData.id}),await u(),t({type:"success",message:"agent deployed",action:{label:"See it live",func:()=>window.open(d.value,"_blank"),icon:"open_in_new"}})}catch(C){c.value=C,n.error("Deploy failed",C),t({type:"error",message:"deploy failed"})}finally{i.value=!1}}}return{isCloudApp:S,canDeploy:o,hasBeenPublished:b,publishApplication:h,isDeploying:Je(i),lastDeployedAt:f}}const Pt={class:"BuilderHeader"},xt={class:"BuilderHeader__toolbar"},At=F({__name:"BuilderHeader",setup(e){const n=K(N.core),t=K(N.builderManager),{undo:s,redo:i,getUndoRedoSnapshot:c}=Le(n,t),r=q(!1),{canDeploy:_,isDeploying:k,publishApplication:S,hasBeenPublished:m,lastDeployedAt:y}=It(n),v=g(()=>c()),d=new Intl.DateTimeFormat(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});async function f(){m.value?o.value=!0:await S()}const o=q(!1),b=[{desc:"Cancel",fn:()=>o.value=!1},{desc:"Yes, deploy changes",fn:async()=>{o.value=!1,await S()}}],u=g(()=>y.value?`Editor Last saved ${d.format(y.value)}`:void 0),h=g(()=>m.value===!0?"Deploy changes":(m.value===!1,"Configure deployment")),C=g(()=>{let P="";switch(n.syncHealth.value){case"offline":P+="Offline. Not syncing.";break;case"connected":P+="Online. Syncing...";break;case"idle":P+="Sync not initialised.";break;case"suspended":P+="Sync suspended.";break}return n.featureFlags.value.length>0&&(P+=` Feature flags: ${n.featureFlags.value.join(", ")}`),P}),E=g(()=>{switch(n.syncHealth.value){case"offline":case"suspended":case"idle":return"error";default:return"deployed"}});function H(){r.value=!0}return(P,$)=>(l(),p("div",Pt,[$[7]||($[7]=a("img",{src:at,alt:"Writer Framework logo"},null,-1)),I(Ct),$[8]||($[8]=a("div",{class:"gap"},null,-1)),a("div",xt,[I(Z,{variant:"secondary",size:"smallIcon","data-automation-key":"undo","data-writer-tooltip":v.value.isUndoAvailable?`Undo: ${v.value.undoDesc}`:"Nothing to undo",disabled:!v.value.isUndoAvailable,"data-writer-tooltip-placement":"bottom",onClick:$[0]||($[0]=U=>w(s)())},{default:x(()=>$[3]||($[3]=[a("i",{class:"material-symbols-outlined"},"undo",-1)])),_:1},8,["data-writer-tooltip","disabled"]),I(Z,{variant:"secondary",size:"smallIcon","data-automation-key":"redo","data-writer-tooltip":v.value.isRedoAvailable?`Redo: ${v.value.redoDesc}`:"Nothing to redo",disabled:!v.value.isRedoAvailable,"data-writer-tooltip-placement":"bottom",onClick:$[1]||($[1]=U=>w(i)())},{default:x(()=>$[4]||($[4]=[a("i",{class:"material-symbols-outlined"},"redo",-1)])),_:1},8,["data-writer-tooltip","disabled"]),I(Z,{variant:"secondary",size:"smallIcon","data-writer-tooltip":"State Explorer","data-writer-tooltip-placement":"bottom",onClick:H},{default:x(()=>$[5]||($[5]=[a("i",{class:"material-symbols-outlined"},"mystery",-1)])),_:1}),w(_)?(l(),A(Z,{key:0,size:"small",loading:w(k),"data-writer-tooltip":u.value,"data-writer-tooltip-placement":"bottom","data-automation-key":"deploy",onClick:f},{default:x(()=>[M(L(h.value)+" ",1),o.value?(l(),A(Oe,{key:0,class:"BuilderHeader__toolbar__deployModal",title:"Are you sure you want to deploy these changes?",size:"normal",actions:b,"data-automation-key":"deployConfirmModal"},{default:x(()=>$[6]||($[6]=[a("p",{class:"BuilderHeader__toolbar__deployModal__text"}," This will replace the current live version of this agent everywhere it is currently deployed. ",-1)])),_:1})):B("",!0)]),_:1},8,["loading","data-writer-tooltip"])):B("",!0),I(Qe,{state:E.value,"data-writer-tooltip":C.value,"data-writer-tooltip-placement":"left"},null,8,["state","data-writer-tooltip"]),r.value?(l(),A(Oe,{key:1,title:"State Explorer","display-close-button":"",onClose:$[2]||($[2]=U=>r.value=!1)},{default:x(()=>[I(St)]),_:1})):B("",!0)])]))}}),Et=R(At,[["__scopeId","data-v-9f298ad2"]]),Ft={class:"text"},Mt=200,Rt=4,Ut=F({__name:"BuilderTooltip",setup(e){const n=Te("rootEl"),t=q(!1),s=q(null);let i=null,c=null;const r=q("top"),_=q({top:0,left:0});async function k(){if(!i||(s.value=i.dataset.writerTooltip,!s.value))return;const d=i.dataset.writerTooltipGap?parseInt(i.dataset.writerTooltipGap):Rt;if(t.value=S(i),!t.value)return;await ve();const{x:f,y:o,width:b,height:u}=i.getBoundingClientRect(),{width:h,height:C}=n.value.getBoundingClientRect();switch(r.value){case"top":_.value.top=o-C-d,_.value.left=f+b/2-h/2;break;case"right":_.value.top=o+u/2-C/2,_.value.left=f+b+d;break;case"left":_.value.left=f-h-d,_.value.top=o+u/2-C/2;break;case"bottom":_.value.top=o+u+d,_.value.left=f+b/2-h/2;break}}function S(d){return d.getAttribute("data-writer-tooltip-strategy")==="overflow"?d.scrollWidth>d.clientWidth:!0}function m(d){const o=d.target.closest("[data-writer-tooltip]");if(o)i!==o&&(t.value=!1);else{t.value=!1,i=null;return}i=o,r.value=i.dataset.writerTooltipPlacement??"top",setTimeout(()=>y(o),Mt)}async function y(d){d===i&&(c==null||c.disconnect(),c=new MutationObserver(k),c.observe(i,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement","data-writer-tooltip-strategy"]}),k())}const v=g(()=>{const{top:d,left:f}=_.value;return{top:`${d}px`,left:`${f}px`}});return me(()=>{document.documentElement.addEventListener("mouseover",m)}),Ie(()=>{document.documentElement.removeEventListener("mouseover",m),c==null||c.disconnect()}),(d,f)=>Pe((l(),p("div",{ref_key:"rootEl",ref:n,class:"BuilderTooltip",style:Ve(v.value)},[a("div",{class:O(["arrow",r.value])},null,2),a("div",Ft,L(s.value),1)],4)),[[ze,t.value]])}}),Ot=R(Ut,[["__scopeId","data-v-7ba01c7c"]]),Wt={class:"BuilderAsyncLoader"},zt=F({__name:"BuilderAsyncLoader",setup(e){return(n,t)=>(l(),p("div",Wt,[I(ot)]))}}),se=R(zt,[["__scopeId","data-v-bb820549"]]),Vt=""+new URL("art-paper-WsD9P5Lu.svg",import.meta.url).href,qt="data:image/svg+xml,%3csvg%20width='120'%20height='160'%20viewBox='0%200%20120%20160'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='16.0273'%20y='89.9375'%20width='80.1422'%20height='55.209'%20rx='7.12375'%20fill='%23A95EF8'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M47.9297%20135.352H13.3542C9.41988%20135.352%206.23047%20138.541%206.23047%20142.475V152.27C6.23047%20156.205%209.41987%20159.394%2013.3542%20159.394H97.9487C101.883%20159.394%20105.072%20156.205%20105.072%20152.27V142.475C105.072%20138.541%20101.883%20135.352%2097.9487%20135.352H63.3737C63.3737%20136.103%2063.174%20136.848%2062.7859%20137.542C62.3979%20138.237%2061.8291%20138.868%2061.112%20139.399C60.395%20139.931%2059.5437%20140.352%2058.6068%20140.64C57.6699%20140.928%2056.6658%20141.076%2055.6517%20141.076C54.6376%20141.076%2053.6335%20140.928%2052.6966%20140.64C51.7597%20140.352%2050.9085%20139.931%2050.1914%20139.399C49.4744%20138.868%2048.9056%20138.237%2048.5175%20137.542C48.1295%20136.848%2047.9297%20136.103%2047.9297%20135.352Z'%20fill='%23721CC9'/%3e%3crect%20x='27.6055'%20y='103.295'%20width='56.99'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='38.293'%20y='112.199'%20width='35.6187'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='46.3047'%20y='121.104'%20width='19.5903'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20y='10.3691'%20width='40.0647'%20height='30.0485'%20rx='7.12375'%20transform='rotate(-15%200%2010.3691)'%20fill='%23EDE2FF'/%3e%3cpath%20d='M15.0475%2021.5308C15.2249%2020.8687%2016.0526%2020.6469%2016.5373%2021.1316L21.9902%2026.5846C22.475%2027.0693%2022.2532%2027.897%2021.5911%2028.0744L14.1421%2030.0703C13.48%2030.2477%2012.8741%2029.6418%2013.0515%2028.9797L15.0475%2021.5308Z'%20fill='%23D4B2F7'/%3e%3cpath%20d='M25.3727%2010.4659C25.5501%209.80376%2026.3777%209.58199%2026.8624%2010.0667L34.9516%2018.1559C35.4363%2018.6406%2035.2145%2019.4682%2034.5524%2019.6456L23.5024%2022.6065C22.8403%2022.7839%2022.2344%2022.178%2022.4118%2021.5159L25.3727%2010.4659Z'%20fill='%23D4B2F7'/%3e%3crect%20x='68.2383'%20y='23.1523'%20width='54.3186'%20height='40.0711'%20rx='7.12375'%20transform='rotate(17.6282%2068.2383%2023.1523)'%20fill='%23D4B2F7'/%3e%3cpath%20d='M72.1976%2052.7145C71.7609%2052.9406%2071.5902%2053.4779%2071.8163%2053.9146C72.0424%2054.3514%2072.5797%2054.5221%2073.0164%2054.296L72.1976%2052.7145ZM82.1128%2048.5839L82.8321%2048.059L82.3818%2047.4419L81.7034%2047.7931L82.1128%2048.5839ZM86.9945%2055.274L86.2752%2055.7989L86.71%2056.3948L87.3764%2056.0784L86.9945%2055.274ZM104.339%2047.7366C104.504%2047.2733%20104.262%2046.764%20103.798%2046.599L96.2487%2043.9102C95.7854%2043.7452%2095.2761%2043.987%2095.1111%2044.4503C94.9461%2044.9136%2095.1879%2045.4229%2095.6512%2045.5879L102.362%2047.9779L99.972%2054.6888C99.807%2055.1521%20100.049%2055.6614%20100.512%2055.8264C100.975%2055.9914%20101.485%2055.7496%20101.65%2055.2863L104.339%2047.7366ZM73.0164%2054.296L82.5222%2049.3746L81.7034%2047.7931L72.1976%2052.7145L73.0164%2054.296ZM81.3935%2049.1087L86.2752%2055.7989L87.7138%2054.7491L82.8321%2048.059L81.3935%2049.1087ZM87.3764%2056.0784L103.882%2048.2423L103.118%2046.6334L86.6126%2054.4696L87.3764%2056.0784Z'%20fill='%23F6EFFD'/%3e%3c/svg%3e",We=150;function jt(e){const n=q(structuredClone(de(e.sourceFiles.value)));$e(e.sourceFiles,(u,h)=>{let C=!1,E=structuredClone(de(n.value));const H=r(h).map(t);for(const P of Ne(u)){const $=J(P,h),U=J(P,u);if(ue(U))continue;if($===void 0||Se(U)){E=Ue(P,E,structuredClone(de(U))),C=!0;continue}if(!le($))continue;const ee=!$.complete&&U.complete,oe=$.complete&&U.complete;if(!ee&&!oe)continue;const fe=t(P);if(H.includes(fe))continue;const te=J(P,E);le(te)&&(C=!0,te.complete=!0,te.content=U.content)}for(const P of lt(E))J(P,u)===void 0&&(E=st(P,E),C=!0);C&&(n.value=E)});function t(u){return u.join("/")}const s=Be(),i=g(()=>Array.from(Ne(n.value))),c=g(()=>r(e.sourceFiles.value));function r(u){return i.value.filter(h=>{const C=J(h,n.value);if(Se(C))return!1;if(!le(C))return!0;const E=J(h,u);return le(E)?!C.complete||!E.complete?!1:C.content!==E.content:!0})}const _=g(()=>{if(s.value!==void 0)return J(s.value,n.value)}),k=g({get(){return le(_.value)?_.value.content:""},set(u){if(s.value===void 0)return;const h=J(s.value,n.value);le(h)&&(h.content=u)}});function S(u=1){const h=`new-file-${u}.txt`;return J([h],n.value)?S(u+1):h}async function m(){const u=S();n.value=Ue([u],de(n.value)),d([u]),await e.sendCreateSourceFileRequest([u])}const y=g(()=>{var h;return(h=s.value)!=null&&h.length?s.value.at(-1).split(".").at(-1):""}),v=g(()=>{switch(y.value){case"py":return"python";case"md":case"markdown":return"markdown";default:return y.value}});function d(u){s.value=u,le(_.value)&&!_.value.complete&&e.requestSourceFileLoading(u)}async function f(u){if(!(!s.value||!_.value)&&(_.value.type==="file"&&await e.sendCodeSaveRequest(k.value,s.value),u)){const h=[...de(s.value)];s.value=void 0;try{await e.sendRenameSourceFileRequest(h,u)}catch(C){throw s.value=h,C}d(u)}}function o(u){return new Promise((h,C)=>{const E=new FileReader;E.addEventListener("loadend",H=>{const P=H.target.result;if(P instanceof ArrayBuffer){const $=String.fromCharCode.apply(null,new Uint8Array(P));return h($)}h(P.split(",")[1])}),E.addEventListener("error",()=>{C()}),E.readAsDataURL(u)})}async function b(u){const h=We*1024*1024;if(u.size>h)throw Error(`Cannot upload file bigger than ${We}mb`);const C=[u.name];if(J(C,e.sourceFiles.value))throw Error(`The file ${u.name} already exists`);n.value=Ue(C,de(n.value),{type:"binary",uploading:!0});const E=await o(u);await e.sendFileUploadRequest(C,E)}return{code:k,sourceFileDraft:n,fileOpen:_,filepathOpen:s,pathsUnsaved:c,openedFileLanguage:v,save:f,upload:b,openFile:d,openNewFile:m,getNewFilename:S}}const Kt={class:"BuilderDropFileZone"},Nt=F({__name:"BuilderDropFileZone",setup(e){return(n,t)=>(l(),p("div",Kt,[t[0]||(t[0]=a("img",{src:qt,alt:"Drop file illustration"},null,-1)),t[1]||(t[1]=a("h2",null,"Upload files",-1)),a("p",null,"Files can be up to "+L(w(We))+"mb",1)]))}}),Ht=R(Nt,[["__scopeId","data-v-92e0a561"]]),Zt={class:"BuilderPanel__collapser"},Gt={class:"material-symbols-outlined"},Jt={class:"BuilderPanel__title"},Yt={class:"BuilderPanel__titleCompanion"},Xt=["data-order"],Qt={key:0,class:"BuilderPanel__contents__leftPanel"},en={class:"BuilderPanel__actions"},tn={class:"BuilderPanel__actionsCompanion"},nn={class:"material-symbols-outlined"},an={class:"BuilderPanel__mainContents"},on=F({__name:"BuilderPanel",props:{panelId:{},name:{},actions:{},contentsTeleportEl:{},scrollable:{type:Boolean},keyboardShortcutKey:{},enableLeftPanel:{type:Boolean},enableDropFile:{type:Boolean}},emits:{openned:e=>typeof e=="boolean",filesDrop:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:n}){const t=K(N.builderManager),s=["code","log"],i=e,c=n,r=g(()=>i.enableDropFile&&_.value),_=q(!1);function k(o,b){i.enableDropFile&&(o.preventDefault(),_.value=b)}function S(o){if(_.value=!1,!i.enableDropFile)return;o.preventDefault();const b=[];if(o.dataTransfer.items)for(const u of o.dataTransfer.items){if(u.kind!=="file")continue;const h=u.getAsFile();h&&b.push(h)}else for(const u of o.dataTransfer.files)b.push(u);b.length>0&&c("filesDrop",b)}const m=g(()=>!t.openPanels.value.has(i.panelId)),y=g(()=>s.indexOf(i.panelId));function v(o){if(t.openPanels.value.has(o)){t.openPanels.value.delete(o),c("openned",!1);return}t.openPanels.value.add(o),c("openned",!0)}function d(o){const b=rt(o);if(b&&o.key==i.keyboardShortcutKey.toLowerCase()){o.preventDefault(),v(i.panelId);return}i.actions.forEach(u=>{if(!u.keyboardShortcut)return;const{key:h,modifierKey:C}=u.keyboardShortcut;h.toLowerCase()==o.key&&(!b&&C||(o.preventDefault(),u.callback()))})}function f(o){if(!o)return"";let b=" (";return o.modifierKey&&(b+=He()),b+=o.key,b+=")",b}return me(async()=>{document.addEventListener("keydown",d)}),Ie(()=>{document.removeEventListener("keydown",d)}),(o,b)=>(l(),p("div",{class:O(["BuilderPanel",{collapsed:m.value}])},[a("div",Zt,[I(Z,{variant:"neutral",size:"smallIcon","data-automation-action":"toggle-panel","data-automation-key":o.panelId,"data-writer-tooltip":`Toggle ${o.name} (${w(He)()}${o.keyboardShortcutKey})`,onClick:b[0]||(b[0]=u=>v(o.panelId))},{default:x(()=>[a("i",Gt,L(m.value?"expand_less":"expand_more"),1)]),_:1},8,["data-automation-key","data-writer-tooltip"])]),a("div",Jt,L(o.name),1),a("div",Yt,[ae(o.$slots,"titleCompanion",{},void 0,!0)]),m.value?B("",!0):(l(),A(it,{key:0,to:o.contentsTeleportEl},[a("div",{style:Ve({order:y.value}),"data-order":y.value,class:O(["BuilderPanel__contents",{"BuilderPanel__contents--leftPanel":o.enableLeftPanel,"BuilderPanel__contents--dropingFile":r.value}]),onDrop:S,onDragover:b[1]||(b[1]=u=>k(u,!0)),onDragleave:b[2]||(b[2]=u=>k(u,!1))},[r.value?(l(),A(Ht,{key:0})):(l(),p(j,{key:1},[o.enableLeftPanel?(l(),p("div",Qt,[ae(o.$slots,"leftPanel",{},void 0,!0)])):B("",!0),a("div",en,[a("div",tn,[ae(o.$slots,"actionsCompanion",{},void 0,!0)]),(l(!0),p(j,null,ie(o.actions,(u,h)=>(l(),A(Z,{key:h,"data-writer-tooltip":u.name+f(u.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",disabled:u.isDisabled,onClick:u.callback},{default:x(()=>[a("i",nn,L(u.icon),1)]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),a("div",an,[ae(o.$slots,"default",{},void 0,!0)])],64))],46,Xt)],8,["to"]))],2))}}),et=R(on,[["__scopeId","data-v-a30a0b3d"]]),ln={class:"BuilderTree"},sn=["draggable","data-automation-key","aria-expanded"],rn={class:"material-symbols-outlined"},dn=["data-writer-tooltip"],un={key:1,class:"BuilderTree__main__dropdown"},cn={class:"BuilderTree__children"},pn=F({__name:"BuilderTree",props:{name:{type:String,required:!0},query:{type:String,required:!1,default:void 0},dataAutomationKey:{type:String,required:!1,default:void 0},hasChildren:{type:Boolean},draggable:{type:Boolean},matched:{type:Boolean},selected:{type:Boolean},disabled:{type:Boolean},dropdownOptions:{type:Array,required:!1,default:void 0}},emits:{expandBranch:()=>!0,select:e=>!!e,dragover:e=>!!e,dragstart:e=>!!e,dragend:e=>!!e,drop:e=>!!e,dropdownSelect:e=>typeof e=="string"},setup(e,{expose:n,emit:t}){const s=X(()=>Q(()=>import("./SharedMoreDropdown-BVO0pMuA.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),i=e,c=t;n({expand:m,toggleCollapse:y});const r=q(!1),_=q(!1),k=g(()=>!i.matched),S=g(()=>!i.hasChildren);function m(){r.value=!1,c("expandBranch")}function y(v){v??(v=!r.value),v!==r.value&&(r.value=v)}return(v,d)=>(l(),p("div",ln,[a("div",{class:O(["BuilderTree__main",{selected:e.selected,notMatched:k.value,childless:S.value}]),tabindex:"0",draggable:e.draggable,"data-automation-key":e.dataAutomationKey,"aria-expanded":!r.value,onMouseenter:d[2]||(d[2]=f=>_.value=!0),onMouseleave:d[3]||(d[3]=f=>_.value=!1),onClick:d[4]||(d[4]=f=>v.$emit("select",f)),onKeydown:d[5]||(d[5]=Xe(f=>v.$emit("select",f),["enter"])),onDragover:d[6]||(d[6]=f=>v.$emit("dragover",f)),onDragstart:d[7]||(d[7]=f=>v.$emit("dragstart",f)),onDragend:d[8]||(d[8]=f=>v.$emit("dragend",f)),onDrop:d[9]||(d[9]=f=>v.$emit("drop",f))},[e.hasChildren?(l(),A(Z,{key:0,class:"BuilderTree__main__collapser",variant:"neutral",size:"icon",disabled:e.disabled,onClick:d[0]||(d[0]=dt(f=>y(void 0),["stop"]))},{default:x(()=>[a("i",rn,L(r.value?"expand_more":"expand_less"),1)]),_:1},8,["disabled"])):B("",!0),ae(v.$slots,"nameLeft",{},void 0,!0),a("span",{class:O(["BuilderTree__main__name",{"BuilderTree__main__name--disabled":e.disabled}]),"data-writer-tooltip":e.name,"data-writer-tooltip-strategy":"overflow"},L(e.name),11,dn),ae(v.$slots,"nameRight",{},void 0,!0),e.dropdownOptions&&_.value?(l(),p("div",un,[I(w(s),{options:e.dropdownOptions,"trigger-custom-size":"16px",onSelect:d[1]||(d[1]=f=>v.$emit("dropdownSelect",f))},null,8,["options"])])):B("",!0)],42,sn),I(gt,null,{default:x(()=>[Pe(a("div",cn,[ae(v.$slots,"children",{},void 0,!0)],512),[[ze,!r.value&&e.hasChildren]])]),_:3})]))}}),vn=R(pn,[["__scopeId","data-v-fca510f3"]]),mn=["width","height","viewBox","aria-valuenow"],fn=["r","cx","cy","stroke","stroke-width"],yn=["r","cx","cy","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],_n=F({__name:"WdsProgressLinear",props:{progress:{type:Number,required:!1,default:100},sizePx:{type:Number,required:!1,default:12},strokeWidth:{type:Number,required:!1,default:2}},setup(e){const n=e,t=g(()=>n.sizePx/2),s=g(()=>n.sizePx/2-n.strokeWidth/2),i=g(()=>2*Math.PI*s.value),c=g(()=>i.value*((100-n.progress)/100)),r=g(()=>`0 0 ${n.sizePx} ${n.sizePx}`);return(_,k)=>(l(),p("svg",{width:e.sizePx,height:e.sizePx,viewBox:r.value,style:{transform:"rotate(-90deg)"},role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"},[a("circle",{r:s.value,cx:t.value,cy:t.value,fill:"transparent",stroke:w(De).Blue1,"stroke-width":e.strokeWidth},null,8,fn),a("circle",{r:s.value,cx:t.value,cy:t.value,fill:"transparent",stroke:w(De).Blue5,"stroke-width":e.strokeWidth,"stroke-dasharray":i.value,"stroke-dashoffset":c.value},null,8,yn)],8,mn))}}),hn=F({__name:"BuilderCodePanelFileUploading",props:{timeMs:{type:Number,required:!0}},setup(e){const n=e,t=q(0);return me(()=>{let s;const i=c=>{s||(s=c);const r=c-s;t.value=Math.min(r/n.timeMs*100,100),t.value<100&&requestAnimationFrame(i)};requestAnimationFrame(i)}),(s,i)=>(l(),A(_n,{class:"BuilderCodePanelFileUploading",progress:t.value,"size-px":12,"stroke-width":2},null,8,["progress"]))}}),gn=R(hn,[["__scopeId","data-v-449f2dac"]]),Ge=[{label:"Delete",value:"delete",icon:"delete"}],bn=F({__name:"BuilderCodePanelSourceFilesTree",props:{sourceFiles:{type:Object,required:!0},path:{type:Array,default:()=>[]},pathActive:{type:Array,default:()=>[]},pathsUnsaved:{type:Array,default:()=>[]},displayAddFileButton:{type:Boolean}},emits:{select:e=>Array.isArray(e),delete:e=>Array.isArray(e),addFile:()=>!0},setup(e,{emit:n}){const t=e,s=n;function i(d){return d.join("/")}const c=g(()=>i(t.pathActive)),r=g(()=>t.pathsUnsaved.map(i)),_=g(()=>ue(t.sourceFiles)?Object.entries(t.sourceFiles.children).sort((d,f)=>d[0].localeCompare(f[0])):[]);function k(d){const f=J([...t.path,d],t.sourceFiles);return Se(f)&&f.uploading}function S(d){const f=i([...t.path,d]);return r.value.includes(f)}function m(d){return i([...t.path,d])===c.value}function y(d){if(!ue(t.sourceFiles)||k(d))return;const f=t.sourceFiles.children[d];ue(f)||s("select",[...t.path,d])}function v(d,f){d==="delete"&&s("delete",[...t.path,f])}return(d,f)=>(l(),p("div",null,[(l(!0),p(j,null,ie(_.value,([o,b])=>(l(),A(vn,{key:o,name:o,matched:"","has-children":w(ue)(b),selected:m(o),disabled:k(o),"right-click-options":Ge,"dropdown-options":w(ue)(b)||w(Se)(b)?Ge:void 0,onSelect:u=>y(o),onDropdownSelect:u=>v(u,o)},ut({children:x(()=>[I(tt,{"source-files":b,"path-active":e.pathActive,"paths-unsaved":e.pathsUnsaved,path:[...e.path,o],onSelect:f[0]||(f[0]=u=>d.$emit("select",u)),onDelete:f[1]||(f[1]=u=>d.$emit("delete",u))},null,8,["source-files","path-active","paths-unsaved","path"])]),_:2},[k(o)||S(o)?{name:"nameLeft",fn:x(()=>[k(o)?(l(),A(gn,{key:0,"time-ms":2e3})):S(o)?(l(),A(Qe,{key:1,state:"newDraft"})):B("",!0)]),key:"0"}:void 0]),1032,["name","has-children","selected","disabled","dropdown-options","onSelect","onDropdownSelect"]))),128))]))}}),tt=R(bn,[["__scopeId","data-v-42a4456e"]]),wn=["disabled"],kn={key:0,class:"material-symbols-outlined"},Cn={class:"WdsButtonLink__text"},Bn={key:1,class:"material-symbols-outlined"},$n=F({__name:"WdsButtonLink",props:{variant:{type:String,default:"primary"},weight:{type:String,default:"default"},leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},text:{type:String,required:!0},disbaled:{type:Boolean}},setup(e){const n=e,t=g(()=>[`WdsButtonLink--variant-${n.variant}`,`WdsButtonLink--weight-${n.weight}`]);return(s,i)=>(l(),p("button",{class:O(["WdsButtonLink",t.value]),disabled:e.disbaled,role:"button"},[e.leftIcon?(l(),p("i",kn,L(e.leftIcon),1)):B("",!0),a("span",Cn,L(e.text),1),e.rightIcon?(l(),p("i",Bn,L(e.rightIcon),1)):B("",!0)],10,wn))}}),nt=R($n,[["__scopeId","data-v-27c92b97"]]),Sn={class:"BuilderCodePanelFileUploadBtn"},Dn=F({__name:"BuilderCodePanelFileUploadBtn",emits:{selected:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:n}){const t=Te("input"),s=n;function i(){var c;(c=t.value.files)!=null&&c.length&&s("selected",t.value.files)}return(c,r)=>(l(),p("form",Sn,[Pe(a("input",{ref_key:"input",ref:t,type:"file",multiple:"true",onChange:i},null,544),[[ze,!1]]),I(nt,{"left-icon":"upload",text:"Upload",onClick:r[0]||(r[0]=_=>w(t).click())})]))}}),Ln={class:"BuilderCodePanel__tree"},Tn={class:"BuilderCodePanel__tree__actions"},In={key:1,class:"BuilderCodePanel__noPreview"},Pn={class:"BuilderCodePanel__actionsCompanion"},xn=F({__name:"BuilderCodePanel",props:{contentsTeleportEl:{}},setup(e){const n=X(()=>Q(()=>import("./SharedMoreDropdown-BVO0pMuA.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),t=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-D4MkTiTa.js").then(D=>D.a),__vite__mapDeps([5,1,2,6]),import.meta.url),loadingComponent:se}),s=K(N.core),i=[{label:"Rename file",value:"rename",icon:"edit"},{label:"Delete file",value:"delete",icon:"delete"}],{sourceFileDraft:c,openFile:r,upload:_,openNewFile:k,code:S,openedFileLanguage:m,filepathOpen:y,fileOpen:v,pathsUnsaved:d,save:f}=jt(s);async function o(D){await Promise.all([...D].map(b))}async function b(D){try{await _(D),h({type:"success",message:`File ${D.name} uploaded`})}catch(z){h({type:"error",message:z.message})}}const u=g(()=>{var D;return(D=v.value)==null?void 0:D.type}),{pushToast:h}=qe(),C=Ye();function E(D){const z=new AbortController;me(()=>{document.addEventListener("keydown",async G=>{const Ae=G.metaKey||G.ctrlKey,Ee=G.key==="s"||G.key==="S";!Ae||!Ee||(G.preventDefault(),await D())},{signal:z.signal})}),Ie(z.abort)}E(ye);const H=Te("filenameEl"),P=q(""),$=q(!1),U=g(()=>{var D;return((D=y.value)==null?void 0:D.join("/"))??""}),ee=g(()=>U.value!=="main.py"),oe=g(()=>U.value!==P.value),fe=g(()=>$.value||U.value==="main.py"),te=g(()=>oe.value?!1:y.value===void 0?!0:!d.value.map(D=>D.join("/")).includes(U.value));$e(y,()=>{var D;P.value=((D=y.value)==null?void 0:D.join("/"))??""}),$e(s.sessionTimestamp,()=>{$.value=!1});function xe(D){D&&y.value===void 0&&r(["main.py"])}async function we(){var D;U.value!=="main.py"&&(await ve(),(D=H.value)==null||D.focus())}async function ne(D){switch(D){case"rename":return we();case"delete":await Ce(y.value)}}async function ke(){await k(),we()}async function Ce(D){await s.sendDeleteSourceFileRequest(D),h({type:"success",message:"The file was deleted"}),y.value.join("/").startsWith(D.join("/"))&&r(["main.py"])}async function ye(){if(y.value===void 0)return h({type:"error",message:"There is no file open"});if(te.value)return h({type:"info",message:"There are not file changes to save"});$.value=!0;try{await f(oe.value?P.value.split("/"):void 0),h({type:"success",message:"The file was saved"})}catch(D){C.error("The file hasn't been saved.",D),h({type:"error",message:"The file hasn't been saved"});return}finally{$.value=!1}}return(D,z)=>(l(),A(et,{"panel-id":"code",name:"Code","contents-teleport-el":D.contentsTeleportEl,actions:[],scrollable:!1,"enable-left-panel":"","keyboard-shortcut-key":"J",class:"BuilderCodePanel","enable-drop-file":"",onFilesDrop:o,onOpenned:xe},{leftPanel:x(()=>[a("div",Ln,[I(tt,{"path-active":w(y),"paths-unsaved":w(d),"source-files":w(c),onAddFile:ke,onSelect:w(r),onDelete:Ce},null,8,["path-active","paths-unsaved","source-files","onSelect"]),a("div",Tn,[I(nt,{"left-icon":"add",text:"Add file",onClick:ke}),I(Dn,{onSelected:o})])])]),actionsCompanion:x(()=>[a("div",Pn,[I(ct,{ref_key:"filenameEl",ref:H,modelValue:P.value,"onUpdate:modelValue":z[1]||(z[1]=G=>P.value=G),disabled:!ee.value,class:"BuilderCodePanel__actionsCompanion__filename",autofocus:"",variant:"ghost",onKeydown:Xe(ye,["enter"])},null,8,["modelValue","disabled"]),I(Z,{variant:"primary",size:"small",disabled:$.value||te.value,class:"BuilderCodePanel__actionsCompanion__saveBtn",onClick:ye},{default:x(()=>z[3]||(z[3]=[a("i",{class:"material-symbols-outlined"},"keyboard_backspace",-1),M(" Save file ")])),_:1},8,["disabled"]),I(w(n),{disabled:fe.value,options:i,onSelect:ne},null,8,["disabled"])])]),default:x(()=>[u.value==="file"?(l(),A(w(t),{key:0,modelValue:w(S),"onUpdate:modelValue":z[0]||(z[0]=G=>pt(S)?S.value=G:null),variant:"full",language:w(m),disabled:$.value},null,8,["modelValue","language","disabled"])):B("",!0),u.value==="binary"?(l(),p("div",In,z[2]||(z[2]=[a("img",{class:"BuilderCodePanel__noPreview__img",src:Vt},null,-1),a("p",{class:"BuilderCodePanel__noPreview__title"},"Can’t Preview File",-1),a("p",{class:"BuilderCodePanel__noPreview__desc"}," Non-text files are not available to view here ",-1)]))):B("",!0)]),_:1},8,["contents-teleport-el"]))}}),An=R(xn,[["__scopeId","data-v-38ac6bfd"]]),En={class:"BuiderLogBlueprintExecutionTrace"},Fn={key:0,class:"trace"},Mn={class:"type"},Rn={key:0},Un={key:1},On={class:"main"},Wn={key:0},zn={key:1},Vn={key:2},qn={key:3},jn={class:"details"},Kn={class:"data","data-automation-key":"result"},Nn={key:1,class:"nothing"},Hn={class:"data","data-automation-key":"return-value"},Zn={class:"environment"},Gn={class:"data"},Jn={key:1,class:"nothing"},Yn={class:"callStack"},Xn={class:"eyebrow"},Qn=F({__name:"BuilderLogBlueprintExecutionTrace",props:{executionItem:{}},emits:["closeModal"],setup(e,{emit:n}){const t=K(N.core),s=K(N.builderManager),i=n,{goToComponentParentPage:c}=Le(t,s),r=e,_=g(()=>{var y;const m=((y=r.executionItem.executionEnvironment)==null?void 0:y.call_stack)??[];return Object.fromEntries(m.map(v=>[v,t.getComponentById(v)]))}),k=g(()=>{var m;return((m=r.executionItem.executionEnvironment)==null?void 0:m.trace)??[]});async function S(m){i("closeModal"),s.setMode("blueprints"),await ve(),c(m),await ve(),s.setSelection(m,void 0,"log")}return(m,y)=>{var v,d,f;return l(),p("div",En,[k.value.length>0?(l(),p("div",Fn,[(l(!0),p(j,null,ie(k.value,(o,b)=>(l(),p("div",{key:b,class:"traceEntry"},[a("div",Mn,[o.type=="functionCall"?(l(),p("span",Rn,"⚡️")):B("",!0),o.type=="reasoning"?(l(),p("span",Un,"🧠")):B("",!0)]),a("div",On,[o.thought?(l(),p("div",Wn,[y[0]||(y[0]=a("strong",null,"Thought.",-1)),M(" "+L(o.thought),1)])):B("",!0),o.action?(l(),p("div",zn,[y[1]||(y[1]=a("strong",null,"Action.",-1)),M(" "+L(o.action),1)])):B("",!0),o.name?(l(),p("div",Vn,L(o.name),1)):B("",!0),o.parameters?(l(),p("div",qn,[I(be,{"hide-root":!0,data:o.parameters,"initial-depth":1,class:"data"},null,8,["data"])])):B("",!0)])]))),128))])):B("",!0),a("div",jn,[a("div",null,[y[2]||(y[2]=a("h3",null,"Result",-1)),y[3]||(y[3]=a("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),a("div",Kn,[(v=m.executionItem)!=null&&v.result?(l(),A(be,{key:0,data:m.executionItem.result,"initial-depth":1,class:"data"},null,8,["data"])):(l(),p("div",Nn,"No result."))])]),a("div",null,[y[4]||(y[4]=a("h3",null,"Return value",-1)),y[5]||(y[5]=a("p",null," The value being returned, which is used to determine the result of 'Run blueprint' blocks and 'Chat completion' tool calls. ",-1)),a("div",Hn,[(d=m.executionItem)!=null&&d.returnValue?(l(),A(be,{key:0,data:m.executionItem.returnValue,"initial-depth":1,class:"data"},null,8,["data"])):(l(),p(j,{key:1},[M(" No return value. ")],64))])])]),a("div",Zn,[y[6]||(y[6]=a("h3",null,"Execution environment",-1)),y[7]||(y[7]=a("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),a("div",Gn,[(f=m.executionItem)!=null&&f.executionEnvironment?(l(),A(be,{key:0,data:m.executionItem.executionEnvironment,"initial-depth":1,class:"data"},null,8,["data"])):(l(),p("div",Jn,"Empty execution environment."))])]),a("div",Yn,[y[9]||(y[9]=a("h3",null,"Call stack",-1)),(l(!0),p(j,null,ie(_.value,(o,b)=>{var u,h,C;return l(),p("div",{key:b,class:O(["component",{active:b==m.executionItem.componentId}])},[a("div",null,[a("div",Xn,[b==m.executionItem.componentId?(l(),p(j,{key:0},[M(" This block · ")],64)):B("",!0),M(" "+L(((u=w(t).getComponentDefinition(o==null?void 0:o.type))==null?void 0:u.name)??"Unavailable component")+" · Id: "+L(b),1)]),M(" "+L(((h=o==null?void 0:o.content)==null?void 0:h.alias)??((C=w(t).getComponentDefinition(o==null?void 0:o.type))==null?void 0:C.name)??"Unavailable component"),1)]),o?(l(),A(Z,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:E=>S(b)},{default:x(()=>y[8]||(y[8]=[a("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):B("",!0)],2)}),128))])])}}}),ea=R(Qn,[["__scopeId","data-v-ded14e09"]]),ta={class:"BuilderListItem"},na=["viewBox"],aa=["d","stroke"],oa=["d","stroke"],la={class:"BuilderListItem__content"},sa=F({__name:"BuilderListItem",props:{isLast:{type:Boolean,required:!1},height:{type:Number,required:!1,default:1e3},color:{type:String,required:!1,default:De.Blue2},colorLast:{type:String,required:!1,default:De.Blue2}},setup(e){const n=e,t=g(()=>n.height/2),s=g(()=>`0 0 17 ${n.height}`),i=g(()=>["M1 0",`V${t.value-8}`,`C1 ${t.value-4}.4183 4.58172 ${t.value} 9 ${t.value}`,"H17"].join(" ")),c=g(()=>[`M1 ${t.value-8}`,`V${n.height}`].join(" "));return(r,_)=>(l(),p("div",ta,[(l(),p("svg",{viewBox:s.value,fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMax meet",class:"BuilderListItem__anchor"},[e.isLast?B("",!0):(l(),p("path",{key:0,d:c.value,stroke:e.colorLast,"stroke-width":"1"},null,8,aa)),a("path",{d:i.value,stroke:e.color,"stroke-width":"1"},null,8,oa)],8,na)),a("div",la,[ae(r.$slots,"default",{},void 0,!0)])]))}}),ia=R(sa,[["__scopeId","data-v-33f3edcd"]]),ra={class:"BuilderLogBlueprintExecution"},da={class:"name"},ua={key:0},ca={class:"eyebrow"},pa={class:"outcome"},va={class:"result"},ma={class:"time"},fa={key:0,class:"message markdown"},ya=F({__name:"BuilderLogBlueprintExecution",props:{executionLog:{}},setup(e){const n=K(N.core),t=K(N.builderManager),{goToComponentParentPage:s}=Le(n,t),i=e,c=q(null),r=g(()=>({summary:[...i.executionLog.summary.filter(m=>!!m.outcome).map(m=>({...m,component:n.getComponentById(m.componentId),componentDef:n.getComponentById(m.componentId)?n.getComponentDefinition(n.getComponentById(m.componentId).type):void 0}))]}));async function _(S){t.setMode("blueprints"),await ve(),s(S),await ve(),t.setSelection(S,void 0,"log")}function k(S){return S<0?"N/A":S<.1?"< 0.1s":`${S.toFixed(2)}s`}return(S,m)=>{const y=vt("dompurify-html");return l(),p("div",ra,[(l(!0),p(j,null,ie(r.value.summary,(v,d)=>(l(),A(ia,{key:d,"is-last":d+1===r.value.summary.length},{default:x(()=>{var f,o,b,u,h,C,E,H,P,$,U,ee;return[a("div",{class:O(["itemWrapper",{"itemWrapper--first":d===0,"itemWrapper--last":d+1===r.value.summary.length}])},[a("div",{class:O(["item",{selected:w(t).isComponentIdSelected(v.componentId)}])},[a("div",da,[(o=(f=v.component)==null?void 0:f.content)!=null&&o.alias?(l(),p("div",ua,[a("div",ca,L(((b=v.componentDef)==null?void 0:b.name)??"Unavailable component"),1),M(" "+L((h=(u=v.component)==null?void 0:u.content)==null?void 0:h.alias),1)])):(l(),p(j,{key:1},[M(L(((C=v.componentDef)==null?void 0:C.name)??"Unavailable component"),1)],64)),v.component?(l(),A(Z,{key:2,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:oe=>_(v.componentId)},{default:x(()=>m[1]||(m[1]=[a("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):B("",!0)]),a("div",pa,[v.outcome!=="in_progress"?(l(),p(j,{key:0},[a("div",{class:O(["ball",(P=(H=(E=v.componentDef)==null?void 0:E.outs)==null?void 0:H[v.outcome])==null?void 0:P.style])},null,2),M(" "+L(((ee=(U=($=v.componentDef)==null?void 0:$.outs)==null?void 0:U[v.outcome])==null?void 0:ee.name)??v.outcome),1)],64)):(l(),p(j,{key:1},[m[2]||(m[2]=a("div",{class:"ballContainer"},[a("div",{class:"ball inProgress"})],-1)),m[3]||(m[3]=M(" In progress... "))],64))]),a("div",va,[c.value==d?(l(),A(Oe,{key:0,title:"Trace",size:"wide",actions:[{desc:"Done",fn:()=>c.value=null}]},{default:x(()=>[I(ea,{"execution-item":v,onCloseModal:m[0]||(m[0]=()=>c.value=null)},null,8,["execution-item"])]),_:2},1032,["actions"])):B("",!0),v.result||v.returnValue||v.executionEnvironment?(l(),A(Z,{key:1,variant:"special",size:"small",onClick:()=>c.value=d},{default:x(()=>m[4]||(m[4]=[a("i",{class:"material-symbols-outlined"},"find_in_page",-1),M(" Trace ")])),_:2},1032,["onClick"])):B("",!0)]),a("div",ma,L(k(v.executionTimeInSeconds)),1),v.message?Pe((l(),p("div",fa,null,512)),[[y,w(bt).parse(v.message)]]):B("",!0)],2)],2)]}),_:2},1032,["is-last"]))),128))])}}}),_a=R(ya,[["__scopeId","data-v-d778122d"]]),ha={class:"BuilderLogIndicator"},ga={key:0,class:"number error"},ba={key:1,class:"number info"},wa=F({__name:"BuilderLogIndicator",setup(e){const n=K(N.builderManager),t=g(()=>n.getLogEntries().reduce((s,i)=>(i.type in s||(s[i.type]=0),s[i.type]++,s),{}));return(s,i)=>(l(),p("div",ha,[t.value.error>0?(l(),p("div",ga,[i[0]||(i[0]=a("div",{class:"icon"},[a("i",{class:"material-symbols-outlined"},"error")],-1)),M(" "+L(t.value.error??0),1)])):B("",!0),t.value.info>0?(l(),p("div",ba,[i[1]||(i[1]=a("div",{class:"icon"},[a("i",{class:"material-symbols-outlined"},"info")],-1)),M(" "+L(t.value.info??0),1)])):B("",!0)]))}}),ka=R(wa,[["__scopeId","data-v-34a7a9ff"]]),Ca={key:0,class:"entries"},Ba={class:"icon"},$a={key:0,class:"material-symbols-outlined"},Sa={key:1,class:"material-symbols-outlined"},Da={class:"title"},La={class:"time"},Ta={class:"content"},Ia={key:0,class:"codeContainer"},Pa={key:1,class:"emptyMessage"},xa=F({__name:"BuilderLogPanel",props:{contentsTeleportEl:{}},setup(e){const n=K(N.builderManager),t=[{icon:"delete",name:"Clear log",callback:()=>{n.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}}],s=g(()=>n.getLogEntries());return(i,c)=>(l(),A(et,{"panel-id":"log",name:"Log","contents-teleport-el":i.contentsTeleportEl,actions:t,scrollable:!0,"keyboard-shortcut-key":"K",class:"BuilderLogPanel"},{titleCompanion:x(()=>[I(ka)]),default:x(()=>[s.value.length>0?(l(),p("div",Ca,[(l(!0),p(j,null,ie(s.value,(r,_)=>(l(),p(j,{key:_},[a("div",{class:O(["entry",r.type])},[a("div",Ba,[r.type=="error"?(l(),p("i",$a,"error")):(l(),p("i",Sa,"info"))]),a("div",Da,L(r.title)+L(r.repeated>0?` · Repeated ${r.repeated} times`:""),1),a("div",La,L(r.timestampReceived.toLocaleTimeString()),1),a("div",Ta,[M(L(r.message)+" ",1),r.code?(l(),p("div",Ia,[a("code",null,L(r.code),1)])):B("",!0)])],2),r.blueprintExecution?(l(),A(_a,{key:0,"execution-log":r.blueprintExecution},null,8,["execution-log"])):B("",!0)],64))),128))])):B("",!0),s.value.length==0?(l(),p("div",Pa,c[0]||(c[0]=[a("div",null,[M(" Exceptions and other relevant messages will be shown here."),a("br"),M("Also, you can include print statements in event handlers to create log entries. ")],-1)]))):B("",!0)]),_:1},8,["contents-teleport-el"]))}}),Aa=R(xa,[["__scopeId","data-v-22d3ef97"]]),Ea={class:"switches"},Fa=F({__name:"BuilderPanelSwitcher",setup(e){const n=K(N.builderManager),t=Te("screenEl");return(s,i)=>(l(),p("div",{class:O(["BuilderPanelSwitcher",{openPanels:w(n).openPanels.value.size>0}])},[a("div",{ref_key:"screenEl",ref:t,class:"screen"},null,512),a("div",Ea,[I(An,{"contents-teleport-el":w(t)},null,8,["contents-teleport-el"]),I(Aa,{"contents-teleport-el":w(t)},null,8,["contents-teleport-el"])])],2))}}),Ma=R(Fa,[["__scopeId","data-v-75a489c0"]]),Ra={class:"WdsToast__icon"},Ua={class:"material-symbols-outlined"},Oa={class:"material-symbols-outlined"},Wa=F({__name:"WdsToast",props:{type:{type:String,required:!0},message:{type:String,required:!0},closable:{type:Boolean},action:{type:Object,required:!1,default:void 0}},emits:{close:()=>!0},setup(e){const n=e,t=g(()=>{switch(n.type){case"info":return"info";case"success":return"check";case"error":return"close";default:return"question_mark"}});return(s,i)=>(l(),p("div",{class:O(["WdsToast",`WdsToast--${e.type}`])},[a("div",Ra,[a("span",Ua,L(t.value),1)]),a("p",null,L(e.message),1),e.action?(l(),p("button",{key:0,class:"WdsToast__action",onClick:i[0]||(i[0]=(...c)=>e.action.func&&e.action.func(...c))},[M(L(e.action.label)+" ",1),a("span",Oa,L(e.action.icon),1)])):B("",!0),e.closable?(l(),A(Z,{key:1,class:"WdsToast__close",variant:"neutral",size:"smallIcon",onClick:i[1]||(i[1]=c=>s.$emit("close"))},{default:x(()=>i[2]||(i[2]=[a("span",{class:"material-symbols-outlined"},"close",-1)])),_:1})):B("",!0)],2))}}),za=R(Wa,[["__scopeId","data-v-e8cc4657"]]),Va={class:"BuilderToasts"},qa=F({__name:"BuilderToasts",setup(e){const{toasts:n,removeToast:t}=qe();return(s,i)=>(l(),p("div",Va,[I(mt,{name:"list",tag:"div"},{default:x(()=>[(l(!0),p(j,null,ie(w(n),c=>(l(),A(za,{key:c.id,class:"BuilderToasts__toast",closable:c.closable,message:c.message,type:c.type,action:c.action,onClick:r=>w(t)(c.id)},null,8,["closable","message","type","action","onClick"]))),128))]),_:1})]))}}),ja=R(qa,[["__scopeId","data-v-42b26df9"]]),Ka={key:0,class:"sidebar"},Na={class:"builderMain"},Ha={class:"rendererWrapper"},Za=F({__name:"BuilderApp",setup(e){ft(T=>({12287269:w(k).getMode()!=="preview"?"var(--builderSidebarWidth)":"0px"}));const n=X({loader:()=>Q(()=>import("./BuilderSettings-BSESHlMX.js"),__vite__mapDeps([7,1,2,8,9,5,6,10,11,12,13]),import.meta.url),loadingComponent:se}),t=X({loader:()=>Q(()=>import("./BuilderSidebar-B_rVEgOY.js"),__vite__mapDeps([14,1,2,9,10,11,12,15]),import.meta.url),loadingComponent:se}),s=X({loader:()=>Q(()=>import("./ComponentRenderer-CfzUdQqw.js"),__vite__mapDeps([16,1,2,8,17]),import.meta.url),loadingComponent:se}),i=X({loader:()=>Q(()=>import("./BuilderInstanceTracker-CeMAVd4Q.js"),__vite__mapDeps([18,1,2,19]),import.meta.url),loadingComponent:se}),c=X({loader:()=>Q(()=>import("./BuilderInsertionOverlay-gN3Qh5-c.js"),__vite__mapDeps([20,1,2,21]),import.meta.url),loadingComponent:se}),r=X({loader:()=>Q(()=>import("./BuilderInsertionLabel-D00JikFQ.js"),__vite__mapDeps([22,1,2,23]),import.meta.url),loadingComponent:se}),_=K(N.core),k=K(N.builderManager),{candidateId:S,candidateInstancePath:m,isCandidacyConfirmed:y,dropComponent:v,assignInsertionCandidacy:d,removeInsertionCandidacy:f}=_t(_),{createAndInsertComponent:o,undo:b,redo:u,moveComponent:h,moveComponentUp:C,moveComponentDown:E,cutComponent:H,isPasteAllowed:P,isCopyAllowed:$,isCutAllowed:U,isDeleteAllowed:ee,isGoToParentAllowed:oe,pasteComponent:fe,copyComponent:te,removeComponentsSubtree:xe,goToParent:we}=Le(_,k),ne=g(()=>k.getMode()),ke=g(()=>k.firstSelectedId.value);function Ce(T){if(T.key=="Escape"){k.setSelection(null);return}const V=ht()?T.metaKey:T.ctrlKey;if(T.target.closest("textarea, input, select"))return;if(T.key=="z"&&V){T.preventDefault(),b();return}if(T.key=="y"&&V){T.preventDefault(),u();return}if(!k.isSingleSelectionActive.value||!k.firstSelectedItem.value)return;const{componentId:W,instancePath:re}=k.firstSelectedItem.value;if(T.key=="Delete"){const _e=k.selection.value.filter(Fe=>ee(Fe.componentId)).map(Fe=>Fe.componentId);xe(..._e);return}if(T.key=="ArrowUp"&&V&&T.shiftKey){if(!oe(W))return;we(W,re);return}if(T.key=="ArrowUp"&&V){C(W);return}if(T.key=="ArrowDown"&&V){E(W);return}if(T.key=="v"&&V){if(!P(W))return;fe(W);return}if(T.key=="c"&&V){if(!$(W))return;te(W);return}if(T.key=="x"&&V){if(!U(W))return;H(W);return}}function ye(T){ne.value!=="preview"&&d(T)}function D(T){if(ne.value==="preview")return;k.setSelection(null);const V=v(T);if(!V)return;const{draggedType:Y,draggedId:W,parentId:re,position:_e}=V;W?h(W,re,_e):o(Y,re,_e)}function z(T){if(ne.value==="preview"||T.target.closest("[data-writer-unselectable]"))return;const Y=T.target.closest("[data-writer-id]");if(!Y)return;const W=Y.dataset.writerId,re=Y.dataset.writerInstancePath;k.isComponentIdSelected(W)&&k.selectionStatus.value!==Ze.Multiple||(T.preventDefault(),T.stopPropagation(),k.handleSelectionFromEvent(T,W,re,"click"))}function G(){k.isSettingsBarCollapsed.value=!1}const Ae=T=>{if(ne.value==="preview")return;const Y=T.target.closest("[data-writer-id]").dataset.writerId,{type:W}=_.getComponentById(Y);k.selectionStatus.value===Ze.Multiple&&(k.setSelection(Y,void 0,"click"),k.isSettingsBarCollapsed.value=!0),T.dataTransfer.setData(`application/json;writer=${W},${Y}`,"{}")};function Ee(T){k.setSelection(null),f(T)}const je=new AbortController;return me(()=>{document.addEventListener("keydown",Ce,{signal:je.signal})}),Ie(()=>je.abort()),(T,V)=>(l(),p("div",{class:"BuilderApp",tabindex:"-1",style:Ve(w(yt))},[a("div",{class:O(["mainGrid",{openPanels:w(k).openPanels.value.size>0}])},[I(Et,{class:"builderHeader"}),ne.value!=="preview"?(l(),p("div",Ka,[I(w(t))])):B("",!0),a("div",Na,[a("div",Ha,[I(w(s),{class:O(["componentRenderer",{settingsOpen:w(k).isSingleSelectionActive}]),onDragover:ye,onDragstart:Ae,onDragend:Ee,onDrop:D,onClickCapture:z,onDblclick:G},null,8,["class"])]),w(k).isSingleSelectionActive?(l(),A(w(n),{key:ke.value??"noneSelected"})):B("",!0)]),I(Ma,{class:"panelSwitcher"})],2),ne.value!=="preview"?(l(),p(j,{key:0},[w(S)&&!w(y)?(l(),p(j,{key:0},[(l(),A(w(i),{key:w(m),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":w(m),"match-size":!0},{default:x(()=>[I(w(c))]),_:1},8,["instance-path"])),(l(),A(w(i),{key:w(m),class:"insertionLabelTracker","instance-path":w(m),"vertical-offset-pixels":-48},{default:x(()=>[I(w(r),null,{default:x(()=>[M(L(w(_).getComponentDefinition(w(_).getComponentById(w(S)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):B("",!0)],64)):B("",!0),V[0]||(V[0]=a("div",{id:"modal"},null,-1)),I(Ot,{id:"tooltip"}),I(ja)],4))}}),Ga=R(Za,[["__scopeId","data-v-993f9863"]]),eo=Object.freeze(Object.defineProperty({__proto__:null,default:Ga},Symbol.toStringTag,{value:"Module"}));export{se as B,vn as T,nt as W,ia as a,eo as b,qe as u};
