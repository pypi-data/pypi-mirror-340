{%- set source_file = view_object.traceability_index.document_tree.source_tree.get_source_for_file(file) -%}

{% set lines_ = view_object.get_file_stats_lines_total(source_file) %}
{% set lines_total = view_object.get_file_stats_lines_total_non_empty(source_file) %}
{% set lines_covered = view_object.get_file_stats_non_empty_lines_covered(source_file) %}
{% set lines_percent = view_object.get_file_stats_non_empty_lines_covered_percentage(source_file) %}
{% set func_total = view_object.get_file_stats_functions_total(source_file) %}
{% set func_covered = view_object.get_file_stats_functions_covered(source_file) %}
{% set func_percent = view_object.get_file_stats_functions_covered_percentage(source_file) %}

<tr class="project_coverage-file {% if lines_covered == '0' %}project_coverage-file_uncovered{% endif %}">
  <td style="padding-left:{{ folder.get_level() }}0px">
    <a
      class="project_coverage-file-link"
      {% if source_file.is_referenced -%}
        href="{{ view_object.link_renderer.render_source_file_link_from_root_2(source_file) }}"
      {%- endif -%}
      title="{{ source_file.in_doctree_source_file_rel_path_posix }}"
    >
      <div class="project_coverage-file-icon">
        {%- include "_res/svg_ico16_file.jinja" -%}
      </div>
      <div class="project_coverage-file-details">
        <div class="project_coverage-file-title">
          {{ file.get_file_name() }}
        </div>
        <div class="project_coverage-file-path">
          {{ source_file.in_doctree_source_file_rel_path_posix }}
        </div>
      </div>

    </a>
  </td>

  <td><span class="value_extended {% if lines_covered == '0' %}color-danger{% endif %}" data-ext="%">{{ lines_percent }}</span></td>
  <td><span class="value_extended {% if lines_covered == '0' %}color-danger{% endif %}">{{ lines_covered }}</span></td>
  <td><span class="value_extended">{{ lines_total }}</span></td>
  <td><span class="value_extended color-secondary">{{ lines_ }}</span></td>

  <td><span class="value_extended" data-ext="%">{{ func_percent }}</span></td>
  <td><span class="value_extended">{{ func_covered }}</span></td>
  <td><span class="value_extended">{{ func_total }}</span></td>

  {# <td>
      {%- if source_file.is_referenced -%}
        {%- set range_reqs =
          view_object.traceability_index.get_source_file_reqs(source_file.in_doctree_source_file_rel_path_posix) -%}

        {%- if range_reqs -%}
          {%- set coverage_info =
            view_object.traceability_index.get_coverage_info(source_file.in_doctree_source_file_rel_path_posix) -%}
          {% with coverage_value = coverage_info.get_coverage() %}
            {% include "screens/source_file_coverage/value_bar.jinja" %}
          {% endwith %}

        {%- else -%}
          {% with coverage_value = none %}
            {% include "screens/source_file_coverage/value_bar.jinja" %}
          {% endwith %}
        {%- endif -%}

      {%- else -%}
        {% with coverage_value = none %}
          {% include "screens/source_file_coverage/value_bar.jinja" %}
        {% endwith %}
      {%- endif -%}
    </td> #}
</tr>
